this.JSF={};
(function(e,c){function b(b,d){var c=Object.keys(d),k,m,e;m=0;for(e=c.length;m<e;m++){var q=c[m],l=95!==q.charCodeAt(0),p=d[q];!p||"object"!==typeof p||void 0===p.value&&"function"!==typeof p.get&&"function"!==typeof p.set?l?b[q]=p:(k=k||{},k[q]={value:p,enumerable:l,configurable:!0,writable:!0}):(void 0===p.enumerable&&(p.enumerable=l),k=k||{},k[q]=p)}k&&Object.defineProperties(b,k)}function d(d,g,c){d=d||function(){};g&&b(d.prototype,g);c&&b(d,c);return d}c.Jp=d;c.o=function(f,g,c,k){if(f)return g=g||
function(){},f=f.prototype,g.prototype=Object.create(f),Object.defineProperty(g.prototype,"_super",{value:f}),Object.defineProperty(g,"superClass",{value:f}),g.i=f,Object.defineProperty(g.prototype,"constructor",{value:g,writable:!0,configurable:!0,enumerable:!0}),c&&b(g.prototype,c),k&&b(g,k),g;console.log("baseClass=",f,"||",g,c,k);return d(g,c,k)};c.Ov=function(b){var d=Object.create(null),c;for(c in b)Object.defineProperty(d,c,{value:b[c],enumerable:!0,writable:!1});return d};(function(d){function g(d,
f,g){f=f.split(".");for(var c=0,e=f.length;c<e;c++){var l=f[c];d[l]||Object.defineProperty(d,l,{value:{},writable:!1,enumerable:!0,configurable:!0});d=d[l]}g&&b(d,g);return d}e[d]||(e[d]=Object.create(Object.prototype));d=e[d];d.Fb||(d.Fb=Object.create(Object.prototype));Object.defineProperties(d.Fb,{Tv:{value:g,writable:!0,enumerable:!0},a:{value:function(b,d){return g(e,b,d)},writable:!0,enumerable:!0}})})("JSF")})(this,JSF);var N={};window.a=function(e,c){N[e]=c};
window.require=function(e){N[e]||console.log("Tried to get "+e+", but module is not yet defined");return N[e]};(function(){var e=JSF.Jp(function b(){this.uid=b.Qj();this.J={}},{uid:null,J:null,on:function(b,d){this.J[b]||(this.J[b]=[]);this.J[b].push(d)},$:function(b,d){if(this.J[b]&&this.J[b].length){for(var f=0,g=this.J[b].length,h=[];f<g;++f)this.J[b][f]!=d&&h.push(this.J[b][f]);this.J[b]=h}},ua:function(b,d){if(this.J[b]&&this.J[b].length)for(var f=0,g=null,h=this.J[b].length;f<h;++f,h=this.J[b].length){g=this.J[b][f];if("string"==typeof g)if(0==g.indexOf("function("))(0,eval("["+g+"]")[0])(d);else eval(g);
else g(d);this.J[b].length<h&&f--}}},{Qj:function(){var b=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],d=Array(36),f=0,g,h;for(g=0;8>g;g++)d[f++]=b[Math.floor(16*Math.random())];for(g=0;3>g;g++)for(d[f++]=45,h=0;4>h;h++)d[f++]=b[Math.floor(16*Math.random())];d[f++]=45;h=("0000000"+(new Date).getTime().toString(16).toUpperCase()).substr(-8);for(g=0;8>g;g++)d[f++]=h.charCodeAt(g);for(g=0;4>g;g++)d[f++]=b[Math.floor(16*Math.random())];return String.fromCharCode.apply(null,d)}});JSF.Fb.a("JSF.core",
{Yu:e});window.a("beevirtua.core.FrameworkObject",e)})();var R=R||{};
(function(e){e.Yw=function(c){return document.querySelector(c)};e.Zw=function(c){return document.querySelectorAll(c)};e.Ow=function(c){var b=new XMLHttpRequest;b.open("get",c,!1);b.send(null);return b.responseXML};e.Nw=function(c){var b=new XMLHttpRequest;b.open("get",c,!1);b.send(null);return b.responseText};e.rv=function(c,b,d,f){var g=new XMLHttpRequest;g.open("get",c,!0);g.setRequestHeader("Content-Type","text/xml; charset=utf-8");g.onreadystatechange=function(){3==g.readyState&&d&&d(g);4!=g.readyState||
200!=g.status&&0!=g.status?4==g.readyState&&(200>g.status||300<=g.status)&&f&&f(g):b&&b(g)};g.send(null)};e.Uw=function(c){var b=[];if(c.length)for(var d=c.length>>>0;d--;)b[d]=c[d];return b};e.zw=function(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};e.extend=function(c,b){for(var d in b)c[d]=b[d];return c};e.M=function(c){var b=new XMLHttpRequest,d={url:"",method:"get",async:!0,Mu:"",Us:"",responseType:"",body:"",headers:null,send:!0,timeout:0,
gb:null,Fh:null,withCredentials:!1},d=e.extend(d,c);!("timeout"in b)&&0<d.timeout&&(b.addEventListener("abort",function(d){if(b.D){d.stopImmediatePropagation();var f=document.createEvent("Event");f.initEvent("timeout",d.bubbles,d.cancelable);b.dispatchEvent(f)}},!1),setTimeout(function(){console.log("before internal abort");b.D=!0;b.abort();console.log("after internal abort")},d.timeout));c="progress load error abort timeout readystatechange loadstart loadend".split(" ");for(var f=0,g=c.length;f<
g;++f)(function(f){b.addEventListener(f,function(){if(d.gb&&d.gb[f])for(var b="function"==typeof d.gb[f]?[d.gb[f]]:d.gb[f],g=0,c=b.length;g<c;++g)b[g](this)},!1)})(c[f]);b.open(d.method,d.url,d.async,d.Mu,d.Us);if(d&&d.headers)for(f=0,g=d.headers.length;f<g;++f)b.setRequestHeader(d.headers[f].name,d.headers[f].value);b.timeout=d.timeout;d.Fh&&d.Fh.length&&b.overrideMimeType(d.Fh);d.send&&b.send(d.body);return b};e.Xw=function(c){var b=!1;if("string"==typeof c)if(c=c.toLowerCase(),"true"==c||"1"==
c)b=!0;else{if("false"==c||"0"==c)b=!1}else if(1==c||0==c)b=c;return b};e.gx=function(c,b){var d=null==b||isNaN(b)?2:parseInt(b);return Math.round(c*Math.pow(10,d))/Math.pow(10,d)};e.$v=function(c,b,d,f,g,h){function k(){m<e?m==l?(l+=q,setTimeout(function(){k()},p)):(r(m,{}),m++,k()):u&&u()}var m=c||0,e=b||100,q=d||10,l=q,p=f||17,r=g,u=h;k()};e.mw=function(c,b){void 0===b&&(b=!0);var d=c.substring(c.lastIndexOf("/")+1),d=/(.*)\.(\w*)/.exec(d);return b?d[0]:d[1]};e.zq=function(c){var b="",d=c.lastIndexOf(".");
-1!=d&&(b=c.substring(d));return b};e.Cw=function(c){return/[a-z]*:\/\//.test(c)};e.isArray=function(c){return Array.isArray(c)};e.Dw=function(c){return"boolean"===typeof c};e.isNull=function(c){return null==c};e.Hw=function(c){return null==c};e.isNumber=function(c){return"number"===typeof c};e.isString=function(c){return"string"===typeof c};e.Lw=function(c){return"symbol"===typeof c};e.isUndefined=function(c){return void 0===c};e.Jw=function(c){return e.isObject(c)&&"[object RegExp]"===e.Ih(c)};
e.isObject=function(c){return"object"===typeof c&&null!==c};e.isDate=function(c){return e.isObject(c)&&"[object Date]"===e.Ih(c)};e.Ew=function(c){return e.isObject(c)&&("[object Error]"===e.Ih(c)||c instanceof Error)};e.isFunction=function(c){return"function"===typeof c};e.Iw=function(c){return null===c||"boolean"===typeof c||"number"===typeof c||"string"===typeof c||"symbol"===typeof c||"undefined"===typeof c};e.Ih=function(c){return Object.prototype.toString.call(c)};e.Fv=function(c){return c.replace(/-+(.)?/g,
function(b,d){return d?0==arguments[arguments.length-2]?d.toLowerCase():d.toUpperCase():""})};e.Aw=function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};e.Hv=function(c){return c.replace(/\b[a-z]/g,function(b){return b.toUpperCase()})};e.tx=function(){var c=!1;try{c=!1!==(new Event("click",{bubbles:!1})).bubbles?!1:!0!==(new Event("click",{bubbles:!0})).bubbles?!1:!0}catch(b){c=!1}return c};e.sx=function(){var c=!1;try{new CustomEvent("oOps"),c=!0}catch(b){c=!1}return c};e.uw=function(c,
b){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?#&]"+c+"=([^&#]*)");b=b?b:window.location.href;d=d.exec(b);return null==d?"":d[1]};e.vw=function(c){c=c||window.location.href;var b={},d=c.slice(c.indexOf("#")+1),d=c.replace(/[\?]/g,"&"),d=d.split("&");for(c=0;c<d.length;c++){var f=d[c].split("=");b[f[0]]=1<f.length?f[1]:null}return b};e.Yt=function(){var c=!1;if(document.fullscreenEnabled||document.D||document.mozFullScreenEnabled||document.msFullscreenEnabled)c=!0;return c};
e.Fw=function(){var c=!1;e.Yt()&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(c=!0);return c};e.Tw=function(){};e.Kf={Ub:[{b:"&",c:"&amp;"},{b:"<",c:"&lt;"},{b:">",c:"&gt;"},{b:'"',c:"&quot;"},{b:"\u00c0",c:"&#192;"},{b:"\u00c1",c:"&#193;"},{b:"\u00c2",c:"&#194;"},{b:"\u00c3",c:"&#195;"},{b:"\u00c4",c:"&#196;"},{b:"\u00c5",c:"&#197;"},{b:"\u00c6",c:"&#198;"},{b:"\u00c7",c:"&#199;"},{b:"\u00c8",c:"&#200;"},{b:"\u00c9",
c:"&#201;"},{b:"\u00ca",c:"&#202;"},{b:"\u00cb",c:"&#203;"},{b:"\u00cc",c:"&#204;"},{b:"\u00cd",c:"&#205;"},{b:"\u00ce",c:"&#206;"},{b:"\u00cf",c:"&#207;"},{b:"\u00d0",c:"&#208;"},{b:"\u00d1",c:"&#209;"},{b:"\u00d2",c:"&#210;"},{b:"\u00d3",c:"&#211;"},{b:"\u00d4",c:"&#212;"},{b:"\u00d5",c:"&#213;"},{b:"\u00d6",c:"&#214;"},{b:"\u00d8",c:"&#216;"},{b:"\u00d9",c:"&#217;"},{b:"\u00da",c:"&#218;"},{b:"\u00db",c:"&#219;"},{b:"\u00dc",c:"&#220;"},{b:"\u00dd",c:"&#221;"},{b:"\u00e0",c:"&#224;"},{b:"\u00e1",
c:"&#225;"},{b:"\u00e2",c:"&#226;"},{b:"\u00e3",c:"&#227;"},{b:"\u00e4",c:"&#228;"},{b:"\u00e5",c:"&#229;"},{b:"\u00e6",c:"&#230;"},{b:"\u00e7",c:"&#231;"},{b:"\u00e8",c:"&#232;"},{b:"\u00e9",c:"&#233;"},{b:"\u00ea",c:"&#234;"},{b:"\u00eb",c:"&#235;"},{b:"\u00ec",c:"&#236;"},{b:"\u00ed",c:"&#237;"},{b:"\u00ee",c:"&#238;"},{b:"\u00ef",c:"&#239;"},{b:"\u00f0",c:"&#240;"},{b:"\u00f1",c:"&#241;"},{b:"\u00f2",c:"&#242;"},{b:"\u00f3",c:"&#243;"},{b:"\u00f4",c:"&#244;"},{b:"\u00f5",c:"&#245;"},{b:"\u00f6",
c:"&#246;"},{b:"\u00f9",c:"&#249;"},{b:"\u00fa",c:"&#250;"},{b:"\u00fb",c:"&#251;"},{b:"\u00fc",c:"&#252;"},{b:"\u00fd",c:"&#253;"},{b:"\u00ff",c:"&#255;"},{b:"\u20ac",c:"&#8364;"},{b:"\u00a5",c:"&#165;"},{b:"$",c:"&#36;"},{b:"\u00a3",c:"&#163;"}],replace:function(c){for(var b=0,d=e.Kf.Ub.length;b<d;++b)c=c.replace(new RegExp("["+e.Kf.Ub[b].b+"]","g"),e.Kf.Ub[b].c);return c}};e.Cg={Ub:[{b:"\u00c0",c:"A"},{b:"\u00c1",c:"A"},{b:"\u00c2",c:"A"},{b:"\u00c3",c:"A"},{b:"\u00c4",c:"A"},{b:"\u00c5",c:"A"},
{b:"\u00c7",c:"C"},{b:"\u00c8",c:"E"},{b:"\u00c9",c:"E"},{b:"\u00ca",c:"E"},{b:"\u00cb",c:"E"},{b:"\u00cc",c:"I"},{b:"\u00cd",c:"I"},{b:"\u00ce",c:"I"},{b:"\u00cf",c:"I"},{b:"\u00d0",c:"D"},{b:"\u00d1",c:"N"},{b:"\u00d2",c:"O"},{b:"\u00d3",c:"O"},{b:"\u00d4",c:"O"},{b:"\u00d5",c:"O"},{b:"\u00d6",c:"O"},{b:"\u00d8",c:"O"},{b:"\u00d9",c:"U"},{b:"\u00da",c:"U"},{b:"\u00db",c:"U"},{b:"\u00dc",c:"U"},{b:"\u00dd",c:"Y"},{b:"\u00e0",c:"a"},{b:"\u00e1",c:"a"},{b:"\u00e2",c:"a"},{b:"\u00e3",c:"a"},{b:"\u00e4",
c:"a"},{b:"\u00e5",c:"a"},{b:"\u00e7",c:"c"},{b:"\u00e8",c:"e"},{b:"\u00e9",c:"e"},{b:"\u00ea",c:"e"},{b:"\u00eb",c:"e"},{b:"\u00ec",c:"i"},{b:"\u00ed",c:"i"},{b:"\u00ee",c:"i"},{b:"\u00ef",c:"i"},{b:"\u00f0",c:"o"},{b:"\u00f1",c:"n"},{b:"\u00f2",c:"o"},{b:"\u00f3",c:"o"},{b:"\u00f4",c:"o"},{b:"\u00f5",c:"o"},{b:"\u00f6",c:"o"},{b:"\u00f9",c:"u"},{b:"\u00fa",c:"u"},{b:"\u00fb",c:"u"},{b:"\u00fc",c:"u"},{b:"\u00fd",c:"y"},{b:"\u00ff",c:"y"},{b:"*",c:"\\*"}],cx:function(c){for(var b=0,d=e.Cg.Ub.length;b<
d;++b)c=c.replace(new RegExp("["+e.Cg.Ub[b].b+"]","g"),e.Cg.Ub[b].c);return c}};(function(c,b){var d={Gf:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],xx:{},Qj:function(){var b=Array(36),g=0,c,k;for(c=0;8>c;c++)b[g++]=d.Gf[Math.floor(16*Math.random())];for(c=0;3>c;c++)for(b[g++]=45,k=0;4>k;k++)b[g++]=d.Gf[Math.floor(16*Math.random())];b[g++]=45;k=("0000000"+(new Date).getTime().toString(16).toUpperCase()).substr(-8);for(c=0;8>c;c++)b[g++]=k.charCodeAt(c);for(c=0;4>c;c++)b[g++]=d.Gf[Math.floor(16*
Math.random())];return String.fromCharCode.apply(null,b)},Or:function(){throw Error("not implemented exception !");},cw:function(){throw Error("not implemented exception !");},Or:function(){throw Error("not implemented exception !");},wx:function(){throw Error("not implemented exception !");},qw:function(){throw Error("not implemented exception !");},lw:function(){throw Error("not implemented exception !");}};b.iv=d})(window,e);(function(c){c.Iv=function(b,d,f){b<d?b=d:b>f&&(b=f);return b};c.Zv=function(b,
d){return b>=d?b:d};c.Yv=function(b,d){return b<=d?b:d};c.ax=function(b){var d;do d=Math.round(Math.random()*b);while(d>b);return d};c.$w=function(b,d){var f;do f=Math.round(Math.random()*d);while(f<b||f>d);return f};c.Kv=function(b){return b.slice(0)}})(e);window.a("micro.micro",e)})(R);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(d,f){b.i.constructor.call(this);this.url=d||"";this.Qb=f||"http://tempuri.org/";this.M=null;this.Hr=!1;this.async=!0;this.timeout=0},{request:function(b){this.params=null;this.Qb=this.Qb.lastIndexOf("/")==this.Qb.length-1?this.Qb:this.Qb+"/";for(var d in b)if("object"==typeof b[d]&&"params"==d){this[d]=b[d];for(var f in b[d])this[d][f]=b[d][f]}else this[d]=b[d];this.fq='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body>'+
this.zo(this.method,this.Qb,this.params)+"</soap:Body></soap:Envelope>";var g=this;this.M=new XMLHttpRequest;this.M.open("post",this.url,this.async);this.M.setRequestHeader("SOAPAction",this.Qb+this.method);this.M.setRequestHeader("Content-Type","text/xml; charset=utf-8");b.Tj&&0<b.Tj.length&&b.Tj.forEach(function(b){g.M.setRequestHeader(b.name,b.value)});this.M.timeout=this.timeout;this.Cs&&this.M.addEventListener("progress",function(){g.Cs(g.M)},!1);this.yl&&this.M.addEventListener("load",function(){var b=
null,d=null;if(400<=g.M.status)d="HTTP error status "+g.M.status;else{g.Hr=!0;var f=g.M.responseXML;if(!f||f.getElementsByTagName("parsererror")[0])d="Invalid XML response";else{var e=f.getElementsByTagName("soap:Body"),e=!e||1>e.length?f.getElementsByTagName("Body"):e;!e||1>e.length?d="XML response does'nt have a SOAP body":(f=e[0].childNodes,!f||1>f.length?d="SOAP response is empty":b=f[0])}}b?g.yl(b):g.lf&&g.lf(d)},!1);this.xl&&this.M.addEventListener("abort",function(){g.xl(g.M)},!1);this.zl&&
(this.M.ontimeout=function(){g.zl(g.M)});this.M.addEventListener("error",function(){g.lf&&g.lf("XHR error")},!1);this.M.send(this.fq)},zo:function(b,d,f){d="<"+b+' xmlns="'+d+'">';for(var g in f)d=f[g].nodeType&&1==f[g].nodeType?d+"<"+g+">"+("<"+f[g].tagName+">"+f[g].innerHTML+"</"+f[g].tagName+">")+"</"+g+">":d+"<"+g+">"+encodeURIComponent(f[g])+"</"+g+">";return d+"</"+b+">"},abort:function(){this.M.abort();this.M.qv=!0},wd:function(){return"SOAPCaller"}},{});window.a("beevirtua.data.utility.SOAPCaller",
e)})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(d,f){var g=null;d&&("string"===typeof d?g=document.querySelector(d):g=d);g||(g=document.createElement("div"));this.target=g;this.Qc=null;b.i.constructor.call(this,f)},{target:null,Qc:null,Ej:function(b){var d;b?"string"===typeof b?d=document.querySelector(b):d=b:d=null;d?d!=this.Qc&&(this.Qc=d):d||this.Qc||(this.Qc=document.body);this.Qc.appendChild(this.target)},remove:function(){var b=this.target;if(b){var d=b.parentNode;
d&&d.removeChild(b)}},Ye:{get:function(){for(var b=!1,d=this.target.parentNode;d&&!b;)"html"===d.localName.toLowerCase()?b=!0:d=d.parentNode;return b},set:function(b){b?this.Ej():this.remove()},enumerable:!0},setPosition:function(b,d){this.target&&(this.target.style.left=b+"px",this.target.style.top=d+"px")},ra:function(b,d){this.target&&(this.target.style.width=b+"px",this.target.style.height=d+"px")},scale:function(b){this.target&&(this.target.style.webkitTransform="scale("+b+")",this.target.style.Sw=
"scale("+b+")",this.target.style.transform="scale("+b+")")},addClass:function(b){var d=this.target.className.split(" "),f=Array.prototype.slice.call(arguments,0);this.target.className.length||(d=[]);this.target.className=[].concat(d,f).join(" ")},hasClass:function(b){return(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(this.target.className)},removeClass:function(b){b=b.split(/\s+/);for(var d=0,f=b.length;d<f;d++)this.target.className=this.target.className.replace(new RegExp("(^|\\s+)"+b[d]+"(\\s+|$)"),
" ")}},{version:"0.1.0",Qb:"jsf.ui",type:"UiObject",Sf:null,qk:function(){e.Sf||(e.Sf={click:device.desktop()||device.windows()?"click":"touchend",mouseover:"mouseover",mouseout:"mouseout",touchmove:"touchmove"});return e.Sf}});window.a("beevirtua.ui.core.UiObject",e)})();(function(e){function c(){}c.prototype.addClass=function(b){var d=_.slice(arguments,1);_.forEach(d,function(d){this.removeClass(b,d);""!==b.className&&(b.className+=" ");b.className+=d}.bind(this))};c.prototype.removeClass=function(b){var d=_.slice(arguments,1);_.forEach(d,function(d){b.className=b.className.replace(new RegExp("(^|\\s)"+d+"(\\s|$)"),"$1")})};e("beevirtua.ui.utility.DomUtilities",c)})(window.a);(function(){function e(b,f){b.style[c]=f+" translateZ(0)";b.style.xm=c}var c="transform"in document.createElement("div").style?"transform":"webkitTransform",b=JSF.o(window.require("beevirtua.core.FrameworkObject"),function f(){f.i.constructor.call(this)},{},{kb:function(b,g,c,k,m){e(b,"translate("+g+c+", "+k+m+")")},transform:function(b,g,c,k,m,n){g="translate("+g+"px, "+c+"px) rotate("+k+"rad) ";"undefined"!=typeof m&&(g+="translate("+m+"px, "+n+"px)");e(b,g)},Ff:function(b,c,h,k,m){e(b,"translate("+
c+"px, "+h+"px) scaleX("+k+") scaleY("+m+")")},rotate:function(b,c,h){e(b,"perspective("+c+"px) rotateY("+h+"deg)")},wf:function(b,c,h){e(b,"perspective("+c+"px) rotateX("+h+"deg)")},scale:function(b,c){e(b,"scale("+c+")")},D:function(b,c){for(var h={},k,m=0;m<c.length;m++)b.currentStyle&&b.currentStyle[c[m]]?h[c[m]]=b.currentStyle[c[m]]:document.defaultView&&document.defaultView.getComputedStyle?(k||(k=document.defaultView.getComputedStyle(b,"")),h[c[m]]=k[c[m]]):h[c[m]]=b.style[c[m]];return h},
fb:function(b){if(b&&b!=document.body){var c=this.fb(b.offsetParent);return{x:b.offsetLeft+c.x,y:b.offsetTop+c.y}}return{x:b?b.offsetLeft:0,y:b?b.offsetTop:0}},Ht:function(b,g,h,k){b.style[c+"Origin"]=g+"px "+h+"px "+k+"px"},Zb:function(b){b.style.xm=c},ou:c});window.a("beevirtua.ui.utility.CSS",b)})();window.a("beevirtua.context.BrowserDetector",{Lc:function(e){e=e||window.navigator.userAgent;e=e.toLowerCase();return-1<e.indexOf("mozilla/5.0")&&-1<e.indexOf("android ")&&-1<e.indexOf("applewebkit")&&-1<e.indexOf("version/4")&&0>e.indexOf("chrome")},qr:function(e,c){c=c||"auto";var b=document.createElement("x");b.style.cssText=e+":"+c;return b.style.pointerEvents===c},Cr:function(){var e=window.navigator.userAgent,c=e.indexOf("MSIE ");if(0<c)return parseInt(e.substring(c+5,e.indexOf(".",c)),10);
if(0<e.indexOf("Trident/"))return c=e.indexOf("rv:"),parseInt(e.substring(c+3,e.indexOf(".",c)),10);c=e.indexOf("Edge/");return 0<c?parseInt(e.substring(c+5,e.indexOf(".",c)),10):!1}});(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function(){e.i.constructor.call(this);this.rg={};this.setProperty(e.properties.Yp,!0);this.setProperty(e.properties.Wp,!0);this.setProperty(e.properties.od,!1);this.setProperty(e.properties.Zp,!0);this.setProperty(e.properties.Xp,!0);this.setProperty(e.properties.bk,!0);this.setProperty(e.properties.Me,!0);this.setProperty(e.properties.Wv,!0)},{dispatchEvent:function(c){if(e.f[c])this.ua(e.f[c],arguments);else if(e.rr(c))this.ua(c,
arguments);else{var b="Dispatch event called with wrong event : '"+c+"'.\n\nAvailable events are :",d;for(d in e.f)b+="\n\t"+e.f[d];throw b;}},rg:null,setProperty:function(c,b){this.rg[c]=b},dh:function(c){return this.rg[c]},reset:function(){this.J={}}},{rr:function(c){for(var b in e.f)if(e.f[b]==c)return!0},properties:{Yp:"enabledInteractivity",Wp:"enabledDragNavigation",od:"enabledHtmlDisplay",Zp:"enabledShadowDisplay",Xp:"enabledFullSizeCanvas",bk:"enabledFancyTransitions",Me:"enabledPaperTransitionMovementFreedom"},
f:{Gb:"PageChanged",Om:"NavigateEndEffect",Gi:"NavigateStartEffect",Uc:"AbortFlip",Qd:"EndFlip",Ji:"Prefliping",Vc:"StartFlip",If:"enterSinglePageMode",Jf:"leaveSinglePageMode",Ci:"allowTextSelection",Fi:"forbidTextSelection",Sd:"RequestNextPage",Td:"RequestPreviousPage",Li:"RequestFaceId",bv:"MoveToPreviousPage",$u:"MoveToNextPage",Zu:"HandleDelta",hv:"StartPageTransition",Mi:"ZoomAboutToStart",Hi:"PanAboutToStart",Ni:"ZoomChanged",uc:"ZoomAboutToChange",Ki:"Relayout"},s:null,h:function(){e.s||(e.s=
new e);return e.s}});window.a("beevirtua.event.BookManager",e)})();(function(e){e("beevirtua.data.raw.rest.Beevirtua",function(c){this.id=c.id;this.version=c.children.version;this.Va=c.children.motor})})(window.a,window.require);(function(e){e("beevirtua.data.raw.rest.beevirtua.Version",function(c){this.id=c.id;this.lang=c.children.lang})})(window.a,window.require);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.Lang",function(c){this.id=c.id;this.title=c.title;this.cb=c.displayMode;c.pod=c.pod||{active:!1};this.rf={active:c.pod.active,Jv:c.pod.clientConfig,Mw:c.pod.lastUploadFilename,status:c.pod.status,au:c.pod.templateGuid,Ru:c.pod.webService};this.face=c.children.face;this.media=c.children.media;c.pdf&&(this.pf={},this.pf.fileName=c.pdf.fileName,this.pf.path=c.pdf.path);c.epub&&(this.Ne={},this.Ne.fileName=c.epub.fileName,this.Ne.path=c.epub.path);
this.xf=_.map(c.section,function(b){return{label:b.label,required:b.required,face:b.face}});c.universe&&(this.Db={},this.Db.hs=c.universe.mandatoryFaces,this.Db.gc=c.universe.freeFaces,this.Db.items=_.map(c.universe.items,function(b){return{label:b.label,face:b.face,icon:b.icon}}))})})(window.a,window.require);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.Face",function(c){this.id=c.id;this.content={};this.content.pb={};this.content.pb.css=c.content.textLayer.css;this.content.pb.height=c.content.textLayer.height;this.content.pb.path=c.content.textLayer.path;this.content.pb.width=c.content.textLayer.width;this.B={};this.B.width=c.dimensions.width;this.B.height=c.dimensions.height;this.l={};this.l.full={};this.l.full.path=c.resolutions.full.path;this.l.vl={};c.resolutions.medium&&(this.l.vl.path=
c.resolutions.medium.path);this.l.nc={};this.l.nc.path=c.resolutions.thumb.path;this.l.U={};this.l.U.enable=c.resolutions.tiles.enable;this.l.U.ec=c.resolutions.tiles.extension;this.l.U.kc=c.resolutions.tiles.maximumZoomLevel;this.l.U.path=c.resolutions.tiles.path;this.l.U.qb=c.resolutions.tiles.tileSide;this.l.Wa={enable:!1};c.resolutions.tilesWithoutText&&(this.l.Wa.enable=c.resolutions.tilesWithoutText.enable,this.l.Wa.ec=c.resolutions.tilesWithoutText.extension,this.l.Wa.kc=c.resolutions.tilesWithoutText.maximumZoomLevel,
this.l.Wa.path=c.resolutions.tilesWithoutText.path,this.l.Wa.qb=c.resolutions.tilesWithoutText.tileSide);this.jq=c.forceHtmlLayerFallback;this.kh=c.children.internalLink;this.Sg=c.children.externalLink;this.xi=c.children.zoneZoomOver;this.hf=c.children.mediaContainer})})(window.a,window.require);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.Media",function(c){this.id=c.id;this.title=c.title;var b=this.type=c.type;"Video"==b?this.l=_.reduce(c.resolutions,function(b,f,c){b[c]={td:_.map(f.formats,function(b){return{path:b.path,type:b.type}}),B:{width:f.dimensions.width,height:f.dimensions.height}};return b},{}):"Animation"==b&&(this.fileName=c.fileName);this.B={};c.dimensions&&(this.B.height=c.dimensions.height,this.B.width=c.dimensions.width)})})(window.a,window.require);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.face.ExternalLink",function(c){this.id=c.id;this.x=c.x;this.y=c.y;this.width=c.width;this.height=c.height;this.url=c.url})})(window.a);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.face.InternalLink",function(c){this.id=c.id;this.x=c.x;this.y=c.y;this.width=c.width;this.height=c.height;this.action=c.action;this.Ph=c.param})})(window.a);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.face.MediaContainer",function(c){this.id=c.id;this.x=c.x;this.y=c.y;this.width=c.width;this.height=c.height;this.ul=c.mediaId})})(window.a);(function(e){e("beevirtua.data.raw.rest.beevirtua.Motor",function(c){this.id=c.id;this.mc=c.selectedTheme})})(window.a);(function(e){e("beevirtua.data.raw.rest.beevirtua.motor.Theme",function(c){this.id=c.id;this.xp=c.basePath;this.nc=c.thumb;this.css=c.css;this.gq=c.favicon})})(window.a);(function(e){e("beevirtua.data.raw.rest.beevirtua.version.lang.face.ZoneZoomOver",function(c){this.id=c.id;this.x=c.x;this.y=c.y;this.width=c.width;this.height=c.height;this.path=_.map(c.path,function(b){return{x:b[0],y:b[1]}});this.backgroundColor=c.backgroundColor})})(window.a);(function(e){function c(){}var b=angular.injector(["ng"]).get("$http");c.prototype.get=function(d){return b.get(d).then(function(b){return b.data})};e("beevirtua.data.utility.Http",c)})(window.a,window.require);(function(e,c){function b(b){this.prefix=b||""}var d=c("beevirtua.data.utility.Http"),f=c("beevirtua.data.raw.rest.Beevirtua"),g=c("beevirtua.data.raw.rest.beevirtua.Motor"),h=c("beevirtua.data.raw.rest.beevirtua.motor.Theme"),k=c("beevirtua.data.raw.rest.beevirtua.Version"),m=c("beevirtua.data.raw.rest.beevirtua.version.Lang"),n=c("beevirtua.data.raw.rest.beevirtua.version.lang.Media"),q=c("beevirtua.data.raw.rest.beevirtua.version.lang.Face"),l=c("beevirtua.data.raw.rest.beevirtua.version.lang.face.InternalLink"),
p=c("beevirtua.data.raw.rest.beevirtua.version.lang.face.ExternalLink"),r=c("beevirtua.data.raw.rest.beevirtua.version.lang.face.ZoneZoomOver"),u=c("beevirtua.data.raw.rest.beevirtua.version.lang.face.MediaContainer");b.D="content.json";_.assign(b.prototype,d.prototype);b.prototype.Ui=function(d,c,f){var g=this.get;return Promise.all(_.map(c,function(c){return g(d+c+"/"+b.D)})).then(function(b){return _.map(b,function(b){return new f(b)})})};b.prototype.pq=function(){function d(b){return q(e+"version/",
b,k).then(function(b){return Promise.all(b.map(function(b){return q(e+"version/"+b.id+"/lang/",b.lang,m).then(function(d){b.lang=d;return b})}))})}function c(b){return q(e+"motor/",b,g).then(function(b){return Promise.all(b.map(function(b){b.Nf=e+"motor/"+b.id+"/";return q(b.Nf+"theme/",[b.mc],h).then(function(d){b.mc=d[0];return b})}))})}var e=this.prefix,n=this.get,q=this.Ui.bind(this);return function(){return n(e+b.D).then(function(b){return new f(b)})}().then(function(b){return Promise.all([d(b.version),
c(b.Va)]).then(function(d){b.version=d[0];b.Va=d[1];return b})})};b.prototype.Eq=function(d,c){function f(b){var d=C+"face/";return e(d,b,q).then(function(b){return Promise.all(_.map(b,function(b){var c=d+b.id+"/";return Promise.all([e(c+"internalLink/",b.kh,l),e(c+"externalLink/",b.Sg,p),e(c+"zoneZoomOver/",b.xi,r),e(c+"mediaContainer/",b.hf,u)]).then(function(d){b.kh=d[0];b.Sg=d[1];b.xi=d[2];b.hf=d[3];b.P=c;return b})}))}).then(function(b){return b})}function g(b){return e(C+"media/",b,n).then(function(b){return _.map(b,
function(b){b.P=C+"media/"+b.id;return b})})}var h=this.get,k=this.prefix,e=this.Ui.bind(this),C=k+"version/"+d+"/lang/"+c+"/";return function(){return h(C+b.D).then(function(b){b=new m(b);b.P=C;return b})}().then(function(b){return Promise.all([f(b.face),g(b.media)]).then(function(d){b.face=d[0];b.media=d[1];return b})})};e("beevirtua.data.raw.DataFetcher",b)})(window.a,window.require);(function(e,c){function b(){}b.prototype.set=function(b,f){var g=!1,h=(c.location.hash.substr(1)||"").split("&").filter(function(b){return!_.isEmpty(b)}).map(function(b){b=b.split("=");return{key:b[0],value:b[1]}});_.isNull(f)?h=h.filter(function(c){return c.key!=b}):(h.forEach(function(c){c.key==b&&(c.value=f,g=!0)}),g||h.push({key:b,value:f}));c.location.hash=h.map(function(b){return b.key+"="+b.value}).join("&")};b.prototype.get=function(b){var f=c.location.hash.substr(1).split("&").map(function(b){b=
b.split("=");return{key:b[0],value:b[1]}}).filter(function(c){return c.key===b});return f[0]?f[0].value:void 0};b.prototype.Dd=function(b,c){this.uo();var g=this.Jh;(g[b]=g[b]||{gb:[],Sj:this.get(b)}).gb.push(c)};b.prototype.uo=function(){this.No||(this.Jh={},c.addEventListener("hashchange",this.Mo.bind(this),!1),this.No=!0)};b.prototype.Mo=function(){var b=this.get;_.forEach(this.Jh,function(c,g){var h=b(g);h!=c.Sj&&(c.Sj=h,_.forEach(c.gb,function(b){b(h)}))})};b.prototype.destroy=function(){console.log(this.Jh)};
b.keys={Oh:"p",xw:"g",version:"v",lang:"l",Te:"h",Xh:"s",yf:"u",debug:"debug"};e("beevirtua.context.Hash",b)})(window.a,window);(function(e,c){function b(b){this.prefix=b||"";this.ci={};this.locale=""}var d=c("beevirtua.data.utility.Http");_.assign(b.prototype,d.prototype);b.prototype.load=function(b){b=b.substr(0,2);return this.get(this.prefix+"i18n/"+b+".json").then(function(d){this.locale=b;this.ci=d}.bind(this)).catch(function(d){if("en"!=b)return console.warn("Error at I18n.load : ",d),console.warn("Loading english version"),this.load("en")}.bind(this))};b.prototype.getString=b.prototype.T=function(b){this.ci[b]||console.warn("i18n",
b,"hasn't been set");return this.ci[b]||""};e("beevirtua.context.I18n",b)})(window.a,window.require);(function(e,c){function b(b){this.prefix=b||""}var d=c("beevirtua.data.utility.Http");_.assign(b.prototype,d.prototype);b.prototype.Wg=function(){return this.get(this.prefix+"version.json").then(function(b){return b.version}).catch(function(){return"not available"})};e("beevirtua.context.BuildVersionReader",b)})(window.a,window.require);(function(e,c){function b(){this.hash=new d;this.hb=new f(window.engineUrl);this.Fp=new g(window.engineUrl)}var d=c("beevirtua.context.Hash"),f=c("beevirtua.context.I18n"),g=c("beevirtua.context.BuildVersionReader");b.prototype.Ik=function(){var b=this.hash,c=b.get(d.keys.version),b=b.get(d.keys.lang);return c&&b?{version:c,lang:b}:null};b.prototype.Zh=function(b,c){var f=this.hash;f.set(d.keys.version,b);f.set(d.keys.lang,c);return{version:b,lang:c}};b.prototype.ds=function(b){return this.hb.load(b)};
b.prototype.yk=function(){return this.hash.get(d.keys.Oh)};b.prototype.Ct=function(b){this.hash.set(d.keys.Oh,b,!0)};b.prototype.As=function(b){var c=this;this.hash.Dd(d.keys.Oh,function(){b(c.yk())})};b.prototype.Wg=function(){return this.Fp.Wg()};b.prototype.Fs=function(b){var c=this.hash,f=this,g=_.debounce(function(){var d=f.Ik();b(d.version,d.lang)},100);c.Dd(d.keys.version,g);c.Dd(d.keys.lang,g)};b.prototype.Ck=function(){var b=this.hash.get(d.keys.Xh);return b?b.split(""):null};b.prototype.Ft=
function(b){this.hash.set(d.keys.Xh,b.join(""))};b.prototype.Ds=function(b){var c=this;this.hash.Dd(d.keys.Xh,function(){b(c.Ck())})};b.prototype.Yl=function(b){this.yf=b;this.hash.set(d.keys.yf,b.join(""))};b.prototype.at=function(){try{window.localStorage.removeItem("universes")}catch(b){}};b.prototype.Ll=function(b){var d=null;try{d=window.localStorage.getItem(b)}catch(c){console.warn("readStringFromLocalStorage: "+c.message)}return d};b.prototype.Kl=function(b){var d=null;b=this.Ll(b);try{d=window.JSON.parse(b)}catch(c){console.warn("readObjectFromLocalStorage: "+
c.message)}return d};b.prototype.Am=function(b,d){try{window.localStorage.setItem(b,d)}catch(c){console.warn("writeStringToLocalStorage: "+c.message)}};b.prototype.zm=function(b,d){try{var c=window.JSON.stringify(d);this.Am(b,c)}catch(f){console.warn("writeObjectToLocalStorage: "+f.message)}};b.prototype.Sq=function(){var b=null,d=this.Dk()||this.Ll("universes");d&&"null"!==d&&(b=d.split(""));return b};b.prototype.Dk=function(){var b=this.hash.get(d.keys.yf);return b?b:null};b.prototype.Es=function(b){var c=
this;this.hash.Dd(d.keys.yf,function(){b(c.Dk())})};e("beevirtua.context.ContextFacade",b)})(window.a,window.require);(function(e){function c(){}var b=require("beevirtua.data.utility.Http");_.assign(c.prototype,b.prototype);c.prototype.Ua=function(b,c){var g=this,h="c"+(1E7*Math.random()).toFixed(),k=this.yd=this.get(window.engineUrl+c).then(function(k){k=k.replace(/\$controller\$/g,h);return new Promise(function(e,q){return g.Qo(h,b,k,["$scope","$rootScope","$timeout","$interval",function(b,d,k,m){console.log("Set new controller for : ",c," -> ",h);try{g.I=b,g.Dm=d,g.$timeout=k,g.Bi=m,b.engineUrl=window.engineUrl,
_.forEach(g.Ia,function(d,c){b[c]=d.bind(g)}),g.Ea()}catch(e){q(e)}}]).then(function(b){e(b)}).catch(function(b){q(b)})})}).catch(function(b){console.error("ERROR","Failed to set new controller for : ",c);console.error(b);throw b;});g.ud&&_.forEach(Object.getPrototypeOf(this),function(b,d){-1<g.ud.indexOf(b)&&(g[d]=function(){var d=arguments;return k.then(function(){b.apply(g,d);g.I.$digest()})})});return k};c.prototype.Qo=function(b,c,g,h){var k=this;return window.Pe.then(function(){var e=window.Zb,
n=angular.module("bee")._invokeQueue.length;angular.module("bee").controller(b,h);var q=angular.element(g);c.appendChild(q[0]);k.Hj=q;k.target=q[0];for(var l=angular.module("bee")._invokeQueue;n<l.length;n++){var p=l[n],r=e[p[0]];r&&r[p[1]].apply(r,p[2])}return new Promise(function(b){angular.element(c).injector().invoke(["$compile","$rootScope",function(d,c){d(q)(c);c.$apply();b()}])})})};c.prototype.destroy=function(){console.log("AngularUiElement destroy");this.Hj&&this.Hj.detach()};e("beevirtua.ui.utility.angular.AngularUiElement",
c)})(window.a);(function(){function e(c){this.queue=[];this.Pp=c}e.prototype.isEmpty=function(){return 0===this.queue.length};e.prototype.Lr=function(){return 1===this.queue.length};e.prototype.push=function(c){var b=this.queue,d=1.2*this.Pp,f=this;b.push(c);return Promise.all(b.map(function(b){return b.catch(function(){})})).then(function(){var g=new Date,h=0;f.Gh&&g<f.Gh&&(h=f.Gh-g);f.Gh=new Date(g.getTime()+h+d);return new Promise(function(d){setTimeout(function(){b.shift();d(c)},h)})})};window.a("beevirtua.ui.book.navigation.PromiseQueue",
e)})(JSF);(function(){function e(c,b,d,f,g,h){this.bb=d;this.dt=function(){};this.Mh=f||function(){};this.Um=g;this.K=h;c=this.uj(c,0,b);this.ib=0;this.vg(c||0);this.Cd=0;this.Oc=b}e.prototype.Ze=function(){return this.ea+this.ib===this.Cd};e.prototype.$e=function(){return this.ea+this.ib===this.Oc};e.prototype.ah=function(){return Math.abs(this.ib)/2};e.prototype.update=function(c){this.Oc=c;this.Kc()};e.prototype.Kc=function(){var c=this,b=this.ea;return this.bb.Xj(b-1,b).then(function(){c.vj(b)})};e.prototype.uj=
function(c,b,d){c=c||0;try{c=parseInt(c)}catch(f){c=0}c=Math.min(d,0!=c%2?c+1:c);return c=Math.max(b,c)};e.prototype.ob=function(c){c=this.uj(c,this.Cd,this.Oc);var b=this.ea,d=this.bb,f=this.Mh;f(c);var g=[],h=c>b,k=Math.abs(b-c)/2;if(0<k){var b=h?c-3:c+1,f=h?c-2:c+2,e=k-1;this.vg(h?c-2:c+2);return d.Xj(b,f).then(function(){for(;e<k;)g.push(h?this.next():this.Jl()),e++;return Promise.all(g)}.bind(this))}return Promise.resolve()};e.prototype.next=function(){return this.pe("next",2,!0)};e.prototype.js=
function(c){this.pe("manual-next",2,!1,c)};e.prototype.Jl=function(){return this.pe("previous",-2,!0)};e.prototype.ls=function(c){this.pe("manual-previous",-2,!1,c)};e.prototype.Gu=function(c){this.bb.Md(c)};e.prototype.bq=function(c){this.bb.pd(c)};e.prototype.pe=function(c,b,d,f){if(!this.mp(c))return Promise.reject(Error("Operation Not Possible"));var g=this.bb,h=this.Mh,k=this;if(g.Kt(b))return Promise.resolve();var e=this.ea+this.ib;c=e+(0<b?0:-1);var n=e+(0<b?-1:0),q=e+(0<b?1:-2),e=e+(0<b?2:
-3);this.ib+=b;g.Rc();this.K.V("pageAboutToTurn");return g.Vt(b,d,f,c,n,q,e).then(function(d){k.ib=k.ib-b;var c=k.ea+b;k.vg(c);h(c);d&&k.vj(c)}).catch(function(d){d.vh?console.log("The transition was cancelled by the user"):console.error("Transition failed due to error",d);k.ib=k.ib-b;g.zb(k.ea,!1);k.Um.pc()})};e.prototype.vj=function(c){var b=this.K;this.bb.zb(c,!1);b.V("lastNavigation",c)};e.prototype.vg=function(c){this.Mh(c);this.ea=c;this.cp()};e.prototype.mp=function(c){var b=this.ib,d=this.Cd,
f=this.Oc,g=this.ea+b;switch(c){case "next":case "manual-next":return 0<=b&&g<f;case "previous":case "manual-previous":return 0>=b&&g>d;default:return!1}};e.prototype.cp=function(){var c=this.dt,b=this.bb;c&&(clearTimeout(this.ft),this.ft=setTimeout(function(){c();b&&b.ct&&b.ct()},500))};e.prototype.destroy=function(){};window.a("beevirtua.ui.book.navigation.Navigation",e)})(JSF);(function(){function e(c,b){this.Rm=c;this.Tb=b;this.ld=b.h()}e.prototype.enable=function(c,b,d){var f=function(f){if(c){if(b)return 1;if(!d&&f)return f}else return-1;return 0}(this.current),g=this.enabled!==c;this.enabled=c;this.ue(f);g&&(f=c?this.Tb.f.If:this.Tb.f.Jf,g=c?{Pb:this.Pb()}:void 0,console.log(f,g),this.ld.dispatchEvent(f,g))};e.prototype.isEnabled=function(){return this.enabled};e.prototype.Pb=function(){return this.enabled&&0===this.current};e.prototype.ue=function(c,b){var d=this.Rm,
f=this.current,g=this.enabled,h=this.Jc?this.Jc(2):0;clearTimeout(this.Jt);if(g&&3<h&&b)return this.Jt=setTimeout(function(){this.ue(c)}.bind(this),1E3),!1;g||(c=-1);-1!=c&&(this.current=c);d.xt(c);return g&&f!==c};e.prototype.Af=function(c){return this.ue(0,c)};e.prototype.Bf=function(c){return this.ue(1,c)};window.a("beevirtua.ui.book.navigation.SinglePageMode",e)})(JSF);(function(){function e(b,c){this.Pg=b;this.ri=c}function c(b,c,g,h){return{Hl:function(k,e,n,q){return Promise.all([b.kt(k,e,n,g,h,c.hc),c.bc(q)])},Zl:function(b){return c.ac(b)},cancel:function(b,d,g){return Promise.all([c.ac(d),c.bc(b)]).then(function(b){g();b.forEach(function(b){b&&b()})})}}}function b(b,c,g,h){return{Hl:function(k,e,n,q){return Promise.all([b.Zr(k,n,e,g,h,c.hc),c.ac(q)])},Zl:function(b){return c.bc(b)},cancel:function(b,d,g){return Promise.all([g(),c.ac(b),c.bc(d)]).then(function(b){b.forEach(function(b){b&&
b()})})}}}e.prototype.Tq=function(d,f,g){var h=this.ri,k=this.Pg;if(0<d)return c(h,k,f,g);if(0>d)return b(h,k,f,g)};e.prototype.Md=function(b){return this.ri.Md(b)};e.prototype.pd=function(b){return this.ri.pd(b)};e.prototype.ac=function(b){return this.Pg.ac(b)};e.prototype.bc=function(b){return this.Pg.bc(b)};window.a("beevirtua.ui.book.navigation.TransitionStrategyProvider",e)})(JSF);(function(){function e(b,c,g,h,k){this.bf=g;this.Df=h;this.jb=k;this.wu=new b(c);this.vu=new b}function c(b){b.forEach(function(b){b.qh=!0})}function b(b,c,g,h){var k=b[0];return c.then(function(b){return g()?h(function(){return Promise.all([b(),k()]).then(function(){return!0})}):h(function(){k();return!1})})}e.prototype.Xj=function(b,f){var g=this.Df,h=this.bf,k=h.yb(b),e=h.yb(f);return Promise.all([g.ac(k),g.bc(e)]).then(function(b){k.then&&k.then(c);e.then&&e.then(c);return Promise.all(b.map(function(b){return b()}))}).catch(function(b){console.error(b)})};
e.prototype.Rc=function(){var b=this.bf;b.Rc();var c=this.jb;c.Jc||(c.Jc=function(c){return b.Gc.Jc(c)})};e.prototype.Vt=function(d,f,g,h,k,e,n){var q=this.bf,l=this.Df.Tq(d,f,g),p=q.yb(h),r=q.yb(k),u=q.yb(e),t=q.yb(n),w=this.wu,x=this.vu,A=this;A.Ur=h;return function(){return w.push(l.Hl(h,p,u,t)).then(function(b){return b})}().then(function(b){return x.push(Promise.all(b.map(function(b){return b()})))}).then(function(d){p.then&&p.then(c);r.then&&r.then(c);u.then&&u.then(c);t.then&&t.then(c);return b(d,
l.Zl(u),function(){return A.Ur===h},function(b){return x.push(Promise.resolve()).then(b)})}).catch(function(b){if(b instanceof Error)throw b;"function"!==typeof b&&(console.error("!! Got error but failed to identify as such ->",b),b=function(){});return l.cancel(p,r,b).then(function(){var b=Error("Transition cancelled");b.vh=!0;throw b;})})};e.prototype.Md=function(b){return this.Df.Md(b)};e.prototype.pd=function(b){return this.Df.pd(b)};e.prototype.zb=function(b,c){this.bf.zb(b,c)};e.prototype.Kt=
function(b){var c=this.jb;(b=0<b?c.Bf():c.Af())&&this.Rc();return b};window.a("beevirtua.ui.book.navigation.DisplayCoordinator",e)})(JSF);(function(){function e(c){this.Ba=c}e.prototype.Yi=function(c,b){var d=this.Ba.Kq(c);d.Gt(b);return d};e.prototype.Kc=function(c){this.ll=this.Yi("back-face",c.Gq());this.Sl=this.Yi("front-face",void 0)};e.prototype.ac=function(c){return this.Zi(this.ll,c)};e.prototype.bc=function(c){return this.Zi(this.Sl,c)};e.prototype.Zi=function(c,b){var d=this.Ba;return b.then(function(b){return function(){c.zf(b);d.Nl(c)}})};e.prototype.resize=function(c,b,d){var f=this.Ba;this.hc=c.top;f.Sh({width:c.viewport.width,
height:c.viewport.height,top:c.top},[b,d])};e.prototype.destroy=function(){var c=this.Sl;this.ll.destroy();c.destroy()};window.a("beevirtua.ui.book.display.Displayer",e)})(JSF);(function(){function e(c){this.vb=c}e.prototype.nk=function(c){var b=this.vb;if(b.zd())return{rs:0,Eh:c};if(b.Ab())return{rs:0,Eh:c-2}};e.prototype.Gq=function(){if(this.vb.Ab())return{display:"none"}};e.prototype.It=function(c,b){var d=this.vb;d.zd()?c.Gg="left":d.Ab()&&(c.Gg="top",b.fl&&(c.jt=b.fl,c.B=b.gk,c.ek="R"));return c};e.prototype.wq=function(){var c=this.vb;if(c.zd())return 2;if(c.Ab())return 1};e.prototype.Ut=function(c,b,d){function f(b,d,c,f){return{left:b,top:d,width:c,height:f}}var g=
this.vb;if(g.zd())return{left:f(c.Ga/2-b,c.top,b,c.X),right:f(c.Ga/2,c.top,d,c.X)};if(g.Ab())return{left:f(c.Ga/2-d/2,c.top-c.X,d,c.X),right:f(c.Ga/2-d/2,c.top,d,c.X)}};e.prototype.Ab=function(){return this.vb.Ab()};e.prototype.Fq=function(c,b){var d=this.vb;if(d.zd())return{left:c.left.left,top:c.left.top+b,height:c.left.height,width:c.left.width+c.right.width};if(d.Ab())return{left:c.right.left,top:c.right.top+b,height:c.right.height,width:c.right.width}};window.a("beevirtua.ui.book.display.DisplayMode",
e)})(JSF);(function(){function e(c){this.uu=c}e.prototype.Zr=function(c,b,d,f,g,h){return this.cj(c,b,d,"L",f,g,h)};e.prototype.kt=function(c,b,d,f,g,h){return this.cj(c,b,d,"R",f,g,h)};e.prototype.cj=function(c,b,d,f,g,h,k){var e=this.Sn(c,b,d,f,k);try{this.Yn()?g=!0:this.Vo(e,g)}catch(n){return Promise.reject(n)}return Promise.resolve(function(){return e.V().then(function(){return new Promise(function(b,d){e.start(h,g);e.on("end",function(c){function f(){e.Mj()}c||e.Na&&!c?b(f):d(f)})})})})};e.prototype.Sn=
function(c,b,d,f,g){var h=this.uu.Zq(c);h.R.className=h.R.className+" page_"+c;"LayeredTransition"==h.type?(b=new h.constructor(h.R,h.ek?h.ek:f,h.Gg,h.B,b,d,h.jt,g),b.Qw=c):b=new h.constructor(f,h.Gg,h.B);return b};e.prototype.Yn=function(){var c=this.Ge;if("undefined"==typeof c)return!1;if(this.al)return!0;if(c.vh())throw Error("Current Transition is cancelled.");return!0};e.prototype.Vo=function(c,b){this.Ge=c;this.al=b;var d=this;c.on("end",function(){setTimeout(function(){d.Ge=void 0},500)})};
e.prototype.bj=function(c){var b=this.Ge,d=this.al;b&&!d&&b.Do&&!b.ag&&c(b)};e.prototype.Md=function(c){this.bj(function(b){b.move(c)})};e.prototype.pd=function(c){this.bj(function(b){b.end(c)})};window.a("beevirtua.ui.book.transition.control.Transitionner",e)})(JSF);(function(){function e(c,b,d){this.Gd=c;this.cb=b;this.Ba=d}e.prototype.Zq=function(c){var b=this.cb;c=this.Gd.$g(c);var d=this.Ba.fh(c),f=window.require("beevirtua.ui.book.transition.component."+c.dr()),d={constructor:f.constructor,type:f.type,B:d.u,R:d.element};return d=b.It(d,c)};window.a("beevirtua.ui.book.transition.control.TransitionProvider",e)})(JSF);(function(){function e(c,b,d,f){this.Ra=c;this.Al=b;this.Fc=d;this.pu=f}e.prototype.Ab=function(){return this.Ra.orientation==this.Al.wi};e.prototype.zd=function(){return this.Ra.orientation==this.Al.jh};e.prototype.fh=function(){var c=this.pu,b=c.cloneNode();b.innerHTML=c.innerHTML;b.style.zIndex="";return b};window.a("beevirtua.ui.book.display.BookLayout",e)})(JSF);(function(){function e(c){this.Gc=c}e.prototype.yb=function(c){return this.Gc.xq(c).then(function(b){return[b]}.bind(this)).catch(function(b){if(b.Ir)return[];throw b;})};e.prototype.Rc=function(){return this.Gc.Rc()};e.prototype.zb=function(c,b){this.Gc.zb(c,b)};window.a("beevirtua.ui.book.layer.LayerProvider",e)})(JSF);(function(){function e(){this.Jd={}}e.prototype.In=function(c){return this.Jd[c]};e.prototype.Yg=function(c){c=this.In(c);var b=Error("FaceData is undefined");b.Ir=!c;return c?Promise.resolve(c):Promise.reject(b)};e.prototype.Xl=function(c,b){this.Jd[c]=b};e.prototype.yq=function(c){var b=this.Jd,d;for(d in b)if(this.Jd[d].face.id===c)return Number(d)};e.prototype.destroy=function(){this.Jd={}};window.a("beevirtua.data.cooked.FaceRegistry",e)})(JSF);(function(e){function c(b){this.className=b}c.prototype.Gt=function(b){this.style=b};c.prototype.zf=function(b){var d=this.className,c=this.style,g=this.R;_.forEach(b,function(b){b.hasClass(d)||b.addClass(d);_.forEach(c,function(d,c){b.target.style[c]=d})});_.forEach(this.Nc,function(b){g&&!_.isNull(b.target)&&b.target.parentElement==g&&g.removeChild(b.target)});this.Nc=b};c.prototype.eb=function(b,d,c,g){var h=this.Nc||[];this.R=b;h.forEach(function(h){h.target&&h.target.parentElement!=b&&b.appendChild(h.target);
d&&.5>d.left&&-.5<d.left&&(d.left=0);var e=Math.max(-d.left,0),n=Math.max(d.width-b.clientWidth-e,0),q=Math.max(-d.top,0),l=Math.max(d.height-b.clientHeight-q,0);h.setPosition(d.left,d.top);h.Eu(e,q,d.width-e-n,d.height-q-l);h.uf({X:d.height},0,0);h.target.style.width="";h.target.style.height="";h.target.style.opacity="";h.Rb&&h.Rb(c,g)})};c.prototype.Bb=function(){this.Nc.forEach(function(b){b.Bb&&b.Bb()})};c.prototype.Sp=function(b,d){this.Nc.forEach(function(c){c.Rb&&c.Rb(b,d)})};c.prototype.destroy=
function(){};e("beevirtua.ui.book.display.NativeContext",c)})(window.a);(function(){function e(c,b,d,f,g,h){this.rl=c=0;this.Nm=b;this.Lp=d;this.Ou=f;this.qf=g;this.vb=h;b=document.createElement("div");b.style.position="relative";f=document.createElement("div");f.style.position="absolute";f.className="scaled-native-container";f.style.top=c+"px";f.style.left=c+"px";f.style.display="none";var k=document.createElement("div");k.style.position="absolute";k.className="native-container";k.style.top=-c+"px";k.style.left=-c+"px";k.style.paddingTop=c+"px";k.style.paddingLeft=c+
"px";k.appendChild(b);k.appendChild(f);this.target=b;this.Uh=f;this.Tc=k;this.jf=[];this.cf=[];this.Ij=this.He=1;this.hc=this.Kj=this.Jj=0;this.Sh=_.throttle(this.Sh.bind(this),100,{leading:!1});this.Tp=_.debounce(function(){var b=d.ou;k.style[b]=k.style[b].replace(/translateZ\(.*\)/,"");k.style.willChange=""}.bind(this),750);setInterval(function(){this.Zn()}.bind(this),1500)}e.prototype.vt=function(c){c.appendChild(this.Tc)};e.prototype.Kq=function(c){var b=this.jf;c=new this.Nm(c);b.push(c);return c};
e.prototype.Ff=function(c,b,d){var f=this.Lp,g=this.Tc,h=this.rl,k=this.Jj,e=this.Kj,n=d/this.Ij;f.Ht(g,h+k,h+0+e,0);f.Ff(g,c-k,b-e,n,n);this.He=d;this.Tp();this.Xs()};e.prototype.Sh=function(c,b){var d=this.target,f=this.Tc,g=this.Uh,h=this.rl;f.style.width=c.width+2*h+"px";f.style.height=c.height+2*h+"px";d.style.width=c.width+"px";d.style.height=c.height+"px";g.style.width=c.width+"px";g.style.height=c.height+"px";this.hc=c.top;this.cf=b;this.jf.forEach(this.Nl.bind(this))};e.prototype.Nl=function(c){var b=
this.cf,d=this.jf,f=this.Ij,g=this.Jj,h=this.Kj,k=this.hc,e=this.target;b&&(b=b[d.indexOf(c)])&&c.eb(e,{width:b.width*f,height:b.height*f,left:b.left*f+g,top:b.top*f+k*f+h},f,this.Jk({width:b.width,height:b.height,left:b.left,top:b.top+k}))};e.prototype.Xs=function(){var c=this.He,b=this.cf,d=this.hc;if(b){var f=this;this.jf.forEach(function(g,h){var k=b[h];k&&(g.Bb(),g.Sp(c,f.Jk({width:k.width,height:k.height,left:k.left,top:k.top+d})))})}};e.prototype.fh=function(c){var b=this.Uh,d=this.cf,f=this.hc,
g=this.vb.fh();g.style.position="absolute";g.style.top=f+"px";b.appendChild(g);b.style.display="";return{element:g,u:c&&c.uh?d[1]:d[0]}};e.prototype.Yb=function(){var c=this.Tc;/with-transition.*/.test(c.className)||(c.className+=" with-transition")};e.prototype.mb=function(){this.Tc.className=this.Tc.className.replace(/ *with-transition/g,"")};e.prototype.Zn=function(){var c=this.Uh;0===c.children.length?c.style.display="none":_.every(c.children,function(b){return 0===b.children.length})&&(console.log("CLLLLLEAN ;)"),
c.style.display="none",c.innerHTML="")};e.prototype.Jk=function(c){return this.Ou.xu(c)};window.a("beevirtua.ui.book.display.NativeContainer",e)})(JSF);(function(){function e(c,b){if(!c)throw new TypeError("src required");this.src=c;this.queue=b}e.prototype.abort=function(){};e.prototype.Oq=function(){var c=this.src,b=this.queue,d=this;return new Promise(function(f,g){b.push({url:c,load:function(b){var d=new Image;d.src=c;d.onload=function(){f(d);b()};d.onerror=function(){g();b()}},cancel:function(){g()}});d.abort=function(){b.kill();g()}})};window.a("beevirtua.ui.utility.ImageLoaderPromise",e)})();window.a("beevirtua.ui.book.layer.utility.DrawContexts",{Ta:function(e,c){var b=_.times(c+1,function(){var b=document.createElement("div"),d=b.style;d.position="absolute";d.transformOrigin="0 0";d.webkitTransformOrigin="0 0";d.left=0;d.top=0;d.width=0;d.height=0;b.className="tile-container";e.appendChild(b);return b});this.eb=function(d,c,f,e,n,q){var l=b[q];d.style.position="absolute";d.style.left=c+"px";d.style.top=f+"px";d.style.width=e+"px";d.style.height=n+"px";d.style.zIndex=q;d.parentElement||
(l.appendChild(d),d.className="hide",setTimeout(function(){d.className="fade-in"},10));return new Promise(function(b){setTimeout(b,1E3)})};this.Y=function(b){b&&b.parentElement&&b.parentElement.removeChild(b)};var d,f;this.sf=function(c,h){function k(d){(d=b[d])&&!d.parentElement&&e.appendChild(d)}d=c;f=h;b.forEach(function(b,d){var c=this.zk(d);0===d&&(c=.99*c);b.setAttribute("data-zoom-level",d);b.style.transform="scale("+c+")";b.style.webkitTransform="scale("+c+")";b.style.zIndex=1E3}.bind(this));
k(c);k(h);b[f]&&(b[f].style.zIndex=1001)};this.El=function(){b.filter(function(b,c){return c!==d&&c!==f}).forEach(function(b){b.parentElement&&b.parentElement.removeChild(b)})};this.destroy=function(){}},canvas:function(e,c){var b=_.times(c+1,function(b){b=Math.pow(2,b);var c=document.createElement("canvas");c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.width=256*b;c.height=256*b;c.style.transform="scale("+1/b+")";c.style.transformOrigin="0px 0px";c.style.webkitTransform="scale("+
1/b+")";c.style.webkitTransformOrigin="0px 0px";e.appendChild(c);return c});this.sf=function(d,c){b.forEach(function(b,g){g!==c&&g!=d&&b.parentElement&&b.parentElement.removeChild(b)});var g=function(d){var c=b[d];c.parentElement||e.appendChild(c);d=this.zk(d);c.style.transform="scale("+d+")";c.style.webkitTransform="scale("+d+")"}.bind(this);g(d);g(c)};this.eb=function(d,c,g,h,k,e){b[e].getContext("2d").drawImage(d,c,g,h,k)};this.Y=function(){};this.destroy=function(){}}});(function(){function e(c,b,d,f,g){this.x=c;this.y=b;this.rc=d;this.Qt=f;this.Ue=g;this.Ng=this.ai.Ad}e.prototype.ai={Ad:"isNew",lh:"isAboutToBeDrawn",Xe:"isDrawn",sh:"isHidden"};e.prototype.eb=function(c){return this.gm(!0,c)};e.prototype.Y=function(c){this.gm(!1,c)};e.prototype.gm=function(c,b){var d=this.Ip(this.Ng,c);if(d)return this.Lj(d,b)};e.prototype.Ip=function(c,b){var d=this.ai,f=c==d.lh,g=c==d.Xe,h=c==d.sh,k;c==d.Ad&&b?k=d.lh:f&&!b?k=d.Ad:g&&!b?k=d.sh:h&&b&&(k=d.Xe);return k};e.prototype.Lj=
function(c,b){var d=this,f=this.ai,g=this.x,h=this.y,k=this.rc,e=this.Qt,n=this.Ue,q=this.Ta,l;this.Ng=c;if(c==f.Ad)n.abort();else{if(c==f.lh)return n.Oq().then(function(c){d.Ta=c;return d.Lj(f.Xe,b)}).catch(function(){d.Ng=f.Ad});if(c==f.Xe)return n=q.width,l=q.height,b.eb(q,g*e,h*e,n,l,k);c==f.sh&&(n=q.width,l=q.height,b.Y(q,g*e,h*e,n,l,k))}};window.a("beevirtua.ui.book.layer.utility.TileDrawerUnit",e)})();(function(){function e(b,c,g,e){this.dc=b;this.qb=c;this.P=g;this.Dr=e;this.Tm=d;this.Km=f;this.bu={};this.Ie=[];this.Ef=[];var q=this.queue=async.queue(function(b,d){b.load(d)},4),l=q.kill;q.kill=function(){q.tasks.forEach(function(b){b.data.cancel()});l.call(q)}}function c(b){return b.z+"-"+b.x+"-"+b.y}function b(b,d,c){g[b+"."+d+"."+c]||(g[b+"."+d+"."+c]={x:b,y:d,z:c});return g[b+"."+d+"."+c]}var d=window.require("beevirtua.ui.book.layer.utility.TileDrawerUnit"),f=window.require("beevirtua.ui.utility.ImageLoaderPromise");
e.prototype.Bb=function(){clearTimeout(this.Tk)};e.prototype.sf=function(b){this.dc.sf(b)};e.prototype.eb=function(b,d,c){var f=this.Xq(b,d,c),f=this.St(f);b=this.Yq(f);this.Ef=this.Ef.concat(b);this.Ie=f;clearTimeout(this.Tk);return this.Zj(f).then(function(){if(f===this.Ie){var b=this.dc,d=this.zr.bind(this);this.Tk=setTimeout(function(){b.El();d()},5E3)}}.bind(this))};e.prototype.St=function(b){function d(c){return Math.sqrt(Math.pow(b.center.x-c.x,2)+Math.pow(b.center.y-c.y,2))}b.U=b.U.sort(function(b,
c){var f=d(b),g=d(c);return f<g?-1:f>g?1:0});b.U.map(function(){});return b.U};e.prototype.Kr=function(b,d,c,f){var g=Math.pow(2,f);if(d>=g||c>=g||0>f||0>d||0>c)return!1;f=b.width;var e=b.height,p=Math.min(f,e);b=p==f;g*=p/Math.max(f,e);return!(b&&d>=g||!b&&c>=g)};var g={};e.prototype.Yq=function(b){var d=this.Ie,f=b.reduce(function(b,d){b[c(d)]=!0;return b},{});return d.filter(function(b){return!f[c(b)]})};e.prototype.Xq=function(d,c,f){function g(b,d,c){c=Math.min(c,1);return{start:Math.floor(b*
l*c),end:Math.ceil(d*l*c)}}var e=this.Kr,l=Math.pow(2,d),p=this.dc.fc,r=g(c.left,c.right,f.width/f.height);c=g(c.top,c.bottom,f.height/f.width);f=[];for(var u=r.start;u<r.end;u++)for(var t=c.start;t<c.end;t++)e(p,u,t,d)&&f.push(b(u,t,d));return{U:f,center:{x:r.start+(r.end-r.start)/2,y:c.start+(c.end-c.start)/2}}};e.prototype.Zj=function(b){var d=this.dc,c=this;return Promise.all(b.map(function(b){return c.Gk(b).eb(d)}))};e.prototype.zr=function(){var b=this.Ef,d=this.Ie;if(0!==b.length){var c=this.dc,
f=this,g=b.filter(function(b){return!_.includes(d,b)});g.forEach(function(b){f.Gk(b).Y(c)});console.log("hide tiles ! :) hid",g.length,"from",b.length);this.Ef=[]}};e.prototype.Gk=function(b){var d=this.bu,f=this.Tm,g=this.qb,e=c(b),l=d[e];l||(l=this.Dq(b.x,b.y,b.z),l=d[e]=new f(b.x,b.y,b.z,g,l));return l};e.prototype.Dq=function(b,d,c){return new this.Km(this.P+c+"/"+b+"/"+d+this.Dr,this.queue)};e.prototype.destroy=function(){};window.a("beevirtua.ui.book.layer.utility.TileDrawer",e)})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this);this.ready=this.jo()},{fx:100,yu:5,destroy:function(){if(this.S&&this.S.parentElement){for(var b=this.S.contentWindow.document.querySelectorAll("img"),d=0,f=b.length;d<f;d++)b[d].onload=null,b[d].Bu=null,b[d].onerror=null,b[d].setAttribute("src",""),this.S.contentWindow.document.body.removeChild(b[d]);this.S.contentWindow.document.body.innerHTML="";this.S.setAttribute("src","about:blank");
this.S.innerHTML="";this.S.parentElement.removeChild(this.S);delete this.S}this.ed=!0},qx:function(){if(!this.ed){var b=this.S.contentWindow;b.stop?b.stop():b.document.execCommand&&b.document.execCommand("Stop")}},ol:function(b,d,f,g){var h=this,k=h.S.contentDocument,e=b;f||(f=k.createElement("img"),f.setAttribute("src",""));if("undefined"==typeof g)g=h.yu;else if(0>g)return console.log("Definitely failed to load image : ",b),f;k=location.href.replace(/#.+/,"");k=k.substr(0,k.lastIndexOf("/")+1);
f.setAttribute("src",k+b);f.onload=d;f.onerror=function(){setTimeout(function(){h.ol(e,d,f,g-1)},1E3*Math.random()+100)};this.ed||(k=h.S.contentDocument||h.S.contentWindow,(b=k.querySelector("body"))&&b.appendChild(f));return f},jo:function(){var b=this;return new Promise(function(d,f){if(b.S)return b.ready;var g=null;b.S=document.createElement("iframe");b.S.setAttribute("src",window.engineUrl+"empty.html");b.S.style.display="none";b.S.onload=function(){g&&(clearInterval(g),g=null);d()};b.S.onerror=
function(){g&&(clearInterval(g),g=null);f()};document.body.appendChild(b.S);var h=b.S.contentDocument||b.S.contentWindow;h.document&&(h=h.document);g=setInterval(function(){"complete"==h.readyState&&(clearInterval(g),g=null,d())},500)})}},{Nv:0});window.a("beevirtua.ui.utility.ImageLoader",e)})();(function(e,c){function b(b){this.yd=this.Ua(b||document.body,"beevirtua/ui/loader/Loader.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){};b.prototype.close=function(b){var d=this.destroy.bind(this);setTimeout(d,b)};b.prototype.Ia={};e("beevirtua.ui.loader.Loader",b)})(window.a,window.require);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function g(){g.i.constructor.call(this)},{},{requestAnimationFrame:function(){for(var b=0,d=["webkit","moz"],c=0;c<d.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[d[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[c]+"CancelAnimationFrame"]||window[d[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var c=(new Date).getTime(),
h=Math.max(0,16-(c-b)),e=window.setTimeout(function(){d(c+h)},h);b=c+h;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})},mq:function(){Function.prototype.bind||(Function.prototype.bind=function(b){function d(){return n.apply(this instanceof c&&b?this:b,e.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,
1),n=this;c.prototype=this.prototype;d.prototype=new c;return d})},promise:function(){!window.Promise&&window.ES6Promise&&(window.Promise=window.ES6Promise.Promise)},Eg:function(b,d){function c(d,h,k,u){d[n](e+h,"wheel"==q?k:function(d){!d&&(d=b.event);var c={Fd:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){d.preventDefault?d.preventDefault():d.returnValue=!1}};"mousewheel"==q?(c.deltaY=-.025*d.wheelDelta,d.wheelDeltaX&&
(c.deltaX=-.025*d.wheelDeltaX)):c.deltaY=d.detail;return k(c)},u||!1)}var e="",n,q;b.addEventListener?n="addEventListener":(n="attachEvent",e="on");q="onwheel"in d.createElement("div")?"wheel":void 0!==d.onmousewheel?"mousewheel":"DOMMouseScroll";b.Eg=function(b,d,g){c(b,q,d,g);"DOMMouseScroll"==q&&c(b,"MozMousePixelScroll",d,g)}}});e.requestAnimationFrame();e.mq();e.promise();e.Eg(window,document);Array.prototype.find=Array.prototype.find||function(b){return _.find(this,b)};window.a("beevirtua.core.Polyfills",
e);if(window.device){var c=window.device.desktop,b=window.device.tablet,d=window.device.windowsTablet();d&&(window.device.windowsTablet=function(){return!1},window.document.documentElement.className=window.document.documentElement.className.replace("tablet",""));window.device.smartTV=function(){return/SmartTV/.test(navigator.userAgent)};window.device.desktop=function(){return window.device.smartTV()?!1:d||c()};window.device.tablet=function(){return d?!1:b()};window.device.Jr=function(){var b=-1,d=
navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName){var c=/MSIE ([0-9]{1,}[\.0-9]{0,})/;null!=c.exec(d)&&(b=parseFloat(c.$1))}else c=/Trident\/([0-9]{1,}[\.0-9]{0,})/,null!=c.exec(d)&&(b=parseFloat(c.$1)),7===b&&(b=11);return-1!==b}}})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this)},{Ae:null,le:null,setVersion:function(b){this.Ae=b},jx:function(b){this.le=b},hx:function(b){this.np=b},dw:function(){return this.np},iw:function(){return this.Ae},fw:function(){return this.le},setVersionLang:function(b,d){e.wg(b,d)},Zh:function(b,d){e.wg(b,d)},get:function(b){if("undefined"==typeof this.Ae||"undefined"==typeof this.le)throw"Version and Lang not set";b=b.replace(e.nm.version,
this.Ae);return b=b.replace(e.nm.lang,this.le)}},{nm:{version:"@version",lang:"@lang"},s:null,h:function(){e.s||(e.s=new e);return e.s},wg:void 0,lx:function(b){e.wg=b}});window.a("beevirtua.context.VersionManager",e)})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.apply(this,arguments);this.zg=[];this.wc={};this.$d=[];this.$n=this.Zc=-1;if(!window.requestAnimationFrame){for(var d=0,f=["ms","moz","webkit","o"],g=0;g<f.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[f[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[g]+"CancelAnimationFrame"]||window[f[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||
(window.requestAnimationFrame=function(b){var f=(new Date).getTime(),g=Math.max(0,16-(f-d)),e=window.setTimeout(function(){b(f+g)},g);d=f+g;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})}},{$n:null,px:function(){this.Aj=new Date},Xv:function(){this.$i=new Date},nw:function(){return this.Aj&&this.$i?this.$i-this.Aj:0},fm:function(b,d){function f(){g.$d++;g.wc||requestAnimationFrame(f)}var g=this,e=d||5;this.zg=new Date;this.wc=!1;this.$d=0;this.Rd=
[];f();this.Ep=setInterval(function(){g.Rd.push(g.Xg());g.Rd.length>e&&g.Rd.shift()},b||1E3)},aq:function(){this.wc=new Date;clearInterval(this.Ep)},Xg:function(){return Math.round(this.$d/(((this.wc?this.wc:new Date)-this.zg)/1E3)*1E3)/1E3},nq:function(b){var d=0;if(b instanceof Array)for(var f=0;f<b.length;f++)d+=b[f];return d},oq:function(){var b=this.Rd;return 0===b.length?0:this.nq(b)/b.length},Xt:function(b){function d(){if(0==f.length)n.Zc=-1;else if(g.length==f.length){for(var b=0,d=0;d<g.length;d++)b+=
g[d];n.Zc=Math.round(b/g.length)}}var f=b,g=[],e,k,m,n=this;for(b=0;b<f.length;b++)e=f[b],k=document.createElement("IMG"),m=new Date,k.src=e.src+"?noCache="+m.getTime(),k.id=e.id,k.addEventListener("error",function(){console.log("Error 404 : ",this.src);for(var b=[],g=0;g<f.length;g++)this.id!=f[g].id&&b.push(f[g]);f=b;d();document.body.removeChild(this)}),k.addEventListener("load",function(){for(var b=((new Date).getTime()-m.getTime())/1E3,e=!1,h=0;h<f.length&&!e;h++)f[h].id==this.id&&(e=f[h]);g.push(e.size/
b);document.body.removeChild(this);d()}),k.style.visibility="hidden",document.body.appendChild(k)},pw:function(){return this.Zc},tq:function(b){if(!b)return 0;var d=1;b=b.children;for(var f=0;f<b.length;f++)d+=this.tq(b[f]);return d},zg:null,wc:null,$d:null,Zc:null},{s:null,Uq:function(){var b="Unknown device";device.desktop()?b="Desktop":device.mobile()&&device.windows()?b="Mobile":device.ios()&&(device.iphone()||device.ipod())?b=device.iphone()?"iPhone":"iPod":device.mobile()?b="Mobile":device.tablet()&&
(b="Tablet");var d="Unknown currentOS";-1!=navigator.appVersion.indexOf("Windows Phone")?d="Windows Phone":-1!=navigator.appVersion.indexOf("Win")?d="Windows":-1!=navigator.appVersion.indexOf("iPad")?d="Ios":-1!=navigator.appVersion.indexOf("iPhone")?d="Ios":-1!=navigator.appVersion.indexOf("Mac")?d="Mac":-1!=navigator.appVersion.indexOf("Android")?d="Android":-1!=navigator.appVersion.indexOf("Linux")&&(d="Linux");var f,g=navigator.userAgent.match(/(opera|crios|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||
[];/trident/i.test(g[1])?(f=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],g[1]="IE",g[2]=f[1]||""):"Chrome"==g[1]?(f=navigator.userAgent.match(/\bOPR\/(\d+)/),null!=f&&(g[1]="Opera",g[2]=f[1])):-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Mozilla/5.0")&&-1<navigator.userAgent.indexOf("AppleWebKit")&&-1==navigator.userAgent.indexOf("CriOS")&&(g[1]="Android browser");g=g[2]?[g[1],g[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(f=navigator.userAgent.match(/version\/(\d+)/i))&&
g.splice(1,1,f[1]);f=!1;document.cookie='testCookie="test"; path=/';if(""!=document.cookie){f=!0;var e=new Date;e.setTime(e.getTime()+-864E5);document.cookie="testCookie=; expires="+e.toGMTString()+"; path=/"}return{device:b,Ww:d,Dv:g[0],Ev:g[1],language:navigator.language?navigator.language.substring(0,2):null,Lv:f,mobile:device.mobile(),tablet:device.tablet(),desktop:device.desktop(),colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,width:screen.width,height:screen.height}},Qq:function(){return{zv:screen.availWidth,
yv:screen.availHeight,Bx:window.innerWidth,Ax:window.innerHeight,Dx:window.outerWidth,Cx:window.outerHeight,portrait:device.portrait(),landscape:device.landscape()}},h:function(){e.s||(e.s=new e);return e.s}});window.a("beevirtua.context.Benchmark",e)})();(function(e){function c(){}c.prototype.jn=function(b){var d=document.createElement("LINK");b.href=this.Ml(b.href);d=_.assign(d,b);_.forEach(b,function(b,c){d.setAttribute(c,b)});return d};c.prototype.Dg=function(b){b.rel=b.rel||"stylesheet";var d=this.jn(b);0==_.filter(document.getElementsByTagName("LINK"),function(b){return b.href===d.href}).length&&document.head.appendChild(d)};c.prototype.Ml=function(b){var d=0;return _.reduceRight(b.split("/"),function(b,c){".."===c?d++:0===d?b.unshift(c):d--;
return b},[]).join("/")};e("beevirtua.ui.utility.HtmlLinker",c)})(window.a);(function(e,c){function b(){this.Xc={}}b.prototype.load=function(b){b=this.Ml(b);if(this.Xc[b])return this.Xc[b].Kp;var d=new XMLHttpRequest,c=new Promise(function(c,e){d.onerror=function(){e(Error("CssLoader Error"))};d.onreadystatechange=function(){4===d.readyState&&200!==d.status?e(Error("CssLoader status : "+d.status+" for "+b)):4===d.readyState&&200===d.status&&c(b)}});this.Xc[b]={Kp:c,M:d,Pw:null};d.open("get",b,!0);d.send(null);return c};b.prototype.Cu=function(){return Promise.resolve()};
b.prototype.abort=function(b){this.Xc[b]&&this.Xc[b].M.abort()};var d=c("beevirtua.ui.utility.HtmlLinker");_.assign(b.prototype,d.prototype);b.h=function(){b.s||(b.s=new b);return b.s};e("beevirtua.ui.utility.CssLoader",b)})(window.a,window.require);(function(e){function c(b){this.Ms=b||""}c.prototype.load=function(b,c){return this.Eo(b,c).then(function(g){_.forEach(g,function(b){c.Dg({href:b})});this.Fo(b);return Promise.resolve()}.bind(this))};c.prototype.Eo=function(b,c){var g=this.Ms+b.Fk(),e=_.reduce(b.Va.mc.css,function(b,d){d=g+d;b.push(this.Go(d,c));return b}.bind(this),[]);return Promise.all(e)};c.prototype.Go=function(b,c){return c.load(b)};c.prototype.Fo=function(b){_.forEach(b.Va.mc.gq,function(c){c.href=b.Fk()+c.href;this.Dg(c)}.bind(this))};
var b=require("beevirtua.ui.utility.HtmlLinker");_.assign(c.prototype,b.prototype);e("beevirtua.ui.utility.ThemeLoader",c)})(window.a);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function(){e.i.constructor.call(this)},{vc:null,rt:function(c){this.vc=c},ew:function(){return this.vc},Uv:function(){var c=this.vc;c&&(c.className=c.className.replace(/ with-transition/g,""))},Vv:function(){var c=this.vc;c&&(c.className=c.className+" with-transition")}},{s:null,h:function(){e.s||(e.s=new e);return e.s}});window.a("beevirtua.ui.book.BookContainer",e)})();(function(){var e=window.require("beevirtua.event.BookManager"),c=e.h(),b=window.require("beevirtua.context.Benchmark"),d=window.require("beevirtua.context.BrowserDetector"),f=JSF.o(window.require("beevirtua.core.FrameworkObject"),function h(){h.i.constructor.call(this);this.profiles={up:{tm:2,qm:1,gf:500,gh:2500,Re:2500,Ls:!0,Rk:!0,Cl:"PaperLayeredTransition",Gj:!1,Te:!d.Lc()&&!device.windowsPhone()},pr:{tm:5,qm:1,gf:0,gh:800,Re:2500,Ls:!1,Rk:!1,Cl:"PaperLayeredTransition",Gj:!0,Te:!d.Lc()&&!device.windowsPhone()}}},
{Pf:null,Yf:!1,Zf:!1,jj:!1,mj:!1,Lo:null,ap:null,mv:null,Wt:function(){var c=window.navigator.userAgent;c&&(c=c.toLowerCase(),-1<c.indexOf("android")&&(this.lj=this.Bo(c))&&console.log("isKitKatOnFaultyDevice",this.lj),-1<c.indexOf("nokia")&&(this.mj=!0));this.jj=d.Lc();this.Yf=device.mobile();this.Zf=device.tablet();console.log("mobile=",this.Yf,"tablet=",this.Zf);this.Yf&&!device.iphone()&&this.gp();(this.Zf||device.iphone())&&this.ip();this.jj&&this.fp();this.mj&&this.hp();this.Pf=new b;this.Pf.fm()},
Ic:function(){var b=this.profiles,d=this.Pf;return 30<=(d?d.oq():30)?b.pr:b.up},$p:function(){console.error("Performances lowered.\nGood-bye.");c.$(e.f.Gi,this.Lo);c.$(e.f.Vc,this.ap)},ip:function(){console.log("Tablet mode : Disabling html display...");c.setProperty(e.properties.od,!1)},gp:function(){console.log("Mobile mode : Disabling html display");c.setProperty(e.properties.od,!1)},fp:function(){console.log("Android Webkit Browser mode : disabling movement freedom in paper transition...");c.setProperty(e.properties.Me,
!1)},hp:function(){console.log("Nokia Browser mode : disabling movement freedom in paper transition...");c.setProperty(e.properties.Me,!1)},Xn:function(b){b<this.Io?(this.dg++,this.dg>this.Jo&&this.fs()):this.dg--},dg:0,Jo:3,Io:12,fs:function(){c.setProperty(e.properties.bk,!1);this.ua(f.f.Ii);this.$p()},Bo:function(b){var d={"Galaxy Note II N7100":"GT-N7100 GT-N7102 GT-N7105 GT-N7108 SCH-i605 SCH-R950 SGH-i317 SGH-i317M SGH-T889 SGH-T889V SPH-L900 SCH-N719 SGH-N025 SHV-E250 SHV-E250L SHV-E250S".split(" "),
"Galaxy S5 mini":["SM-G800F","SM-G800H","SM-G800H/DS","SM-G800M","SM-G800Y"],"Galaxy Mega 2":[" SM-G750F","  SM-G7508","SM-G7508Q"],"Galaxy S4 zoom":["SM-C1010"," SM-C101"],"I9305 Galaxy S III":"GT-I9300; GT-I9305; SHV-E210; SGH-N035; GT-I9308; SCH-I939".split(";"),"Galaxy J1":["SM-J100F"],"Galaxy Note 8.0":["GT-N5100","GT-N5110","GT-N5120"],"Galaxy Note 10.1 N8000":["GT-N8000","GT-N8005","GT-N8010","GT-N8013","GT-N8020"],"Galaxy Tab 4 7.0 LTE":["SM-T530","SM-T531","SM-T535"]},c;for(c in d)for(var f=
d[c],e=0;e<f.length;e++)if(0<b.indexOf(f[e].toLowerCase())&&0<b.indexOf("android 4.4"))return console.log("Faulty device identified :",c),!0;return!1}},{f:{Ii:"PerformanceChanged"},s:null,h:function(){f.s||(f.s=new f);return f.s}});JSF.Fb.a("JSF.managers",{fv:f});window.a("beevirtua.context.PerformanceManager",f)})();(function(e){var c=window.require("beevirtua.event.BookManager"),b=JSON.parse(JSON.stringify({top:0,bottom:1,left:0,right:1})),d={};(function(){function b(){window.requestAnimationFrame(function(){f.move();window.requestAnimationFrame(b)})}b()})();var f=e.o(window.require("beevirtua.core.FrameworkObject"),!1,!1,{jl:{},wb:{top:0,bottom:1,left:0,right:1},Hg:{width:-1,height:-1},aw:!1,pc:function(){c.h().dispatchEvent(c.f.uc,d.Tl,d.Ul,d.im,d.jm);c.h().dispatchEvent(c.f.Ni,d.Tl,d.Ul,d.im,d.jm)},move:function(){var b=
f.Hg,c=f.jl,e=f.wb,m=f.Ba,n;a:{for(n in c)if(c[n]!==e[n]){n=!1;break a}n=!0}if(!n){c.top=e.top;c.bottom=e.bottom;c.right=e.right;c.left=e.left;n=b.width;var q=b.height,b=n/((e.right-e.left)*n),c=q/((e.bottom-e.top)*q);n=-b*n*e.left;e=-c*q*e.top;f.He=b;m&&m.Ff(n,e,b);d={Tl:b,Ul:c,im:n,jm:e}}},ut:function(){f.Hg={width:document.body.clientWidth,height:document.body.clientHeight}},Kd:function(b){var d=f.wb;d.top=b.top;d.bottom=b.bottom;d.right=b.right;d.left=b.left},hm:function(){window.cancelAnimationFrame(f.Qr);
f.Rr=new Date},zt:function(b,d){function c(b,d){var g=new Date-f.Rr,h=-b*Math.exp(-g/325),g=-d*Math.exp(-g/325);.5<Math.abs(h)+Math.abs(g)?f.Qr=window.requestAnimationFrame(c.bind(void 0,b,d)):f.pc();h=h*(e.right-e.left)/n.width;g=g*(e.bottom-e.top)/n.height;e.top+=g;e.bottom+=g;e.left+=h;e.right+=h;e=f.De(e)}var e=f.wb,n=f.Hg;f.hm();c(b,d)},Hc:function(){return{top:f.wb.top,bottom:f.wb.bottom,left:f.wb.left,right:f.wb.right}},Wl:function(d){b=d},ex:function(){f.wb=f.qq()},qq:function(){return JSON.parse(JSON.stringify(b))},
De:function(d){var c=d.right-d.left,f=d.bottom-d.top;if(1<=f||1<=c)c=f=1;d.left<b.left?(d.left=b.left,d.right=d.left+c):d.right>b.right&&(d.right=b.right,d.left=d.right-c);d.top<b.top?(d.top=b.top,d.bottom=d.top+f):d.bottom>b.bottom&&(d.bottom=b.bottom,d.top=d.bottom-f);return d},Pq:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},xu:function(b){function d(b,c,f){if(0===c-b)return 0;c=1/(c-b);return c*f+-c*b}function c(b,f,g,e,k){b=b/g;f=f/g;return{ql:Math.min(Math.max(0,
d(b,f,e)),1),Vk:Math.max(Math.min(1,d(b,f,k)),0)}}var e=f.wb,n=f.Pq(),q=c(b.left,b.left+b.width,n.width,e.left,e.right);b=c(b.top,b.top+b.height,n.height,e.top,e.bottom);return{left:q.ql,right:q.Vk,top:b.ql,bottom:b.Vk}},tv:function(b,d){return{width:(d.right-d.left)*b.width,height:(d.bottom-d.top)*b.height,left:d.left*b.width,top:d.top*b.height}},Yb:function(b){f.Ba.Yb(b)},mb:function(){f.Ba.mb()}});window.a("beevirtua.ui.book.display.ViewportLayout",f)})(JSF);(function(e){function c(b,d){var c=this.Kg=document.createElement("div");c.id="zoomZoneContainer";var g=document.createElement("div");g.id="zoomZoneInnerContainer";this.K=d;c.appendChild(g);b.appendChild(c);(new Hammer(c)).on("tap",this.Y.bind(this));this.Y();this.Ai=[];d.on("bookResize",this.Y.bind(this));d.on("pageAboutToTurn",this.Y.bind(this))}c.prototype.qp=function(b){var d=this.K;this.Ai.push(b);this.Kg.appendChild(b.R);d.V("zzoOpen")};c.prototype.Y=function(){var b=this.Kg,d=this.Ai,c=this.K;
b.style.display="none";_.forEach(d,function(d){b.removeChild(d.R);d.destroy()});this.Ai=[];c.V("zzoClosed")};c.prototype.show=function(){this.Kg.style.display=""};e("beevirtua.ui.book.display.ZzoContainer",c)})(window.a);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this);this.bd={}},{bd:null,Zs:function(b,d,f,g,h){var k=this.bd[b];k||(k=this.Pj(b));var m=k[f];m||(m={},m.ws=e.Lq(f,d),m.lm=0,k[f]=m);d=g+"/"+h;m[d]||(m[d]=!0,m.lm++,m.lm==m.ws&&(k.Dh=Math.max(k.Dh,f),k.zi.Kw()||k.zi.resolve({qd:b,rc:f})))},Vw:function(b){var d=this.bd[b];d||(d=this.Pj(b));return d.zi},ow:function(b){var d=null;if(b=this.bd[b])d=b.Dh,d=0<=d?d:null;return d},Pj:function(b){faceNode=
{Dh:-1};faceNode.zi=Promise.resolve();return this.bd[b]=faceNode}},{s:null,Lq:function(b,d){var f=Math.pow(2,b);return f*Math.ceil(Math.min(d.width,d.height)/Math.max(d.width,d.height)*f)},h:function(){e.s||(e.s=new e);return e.s}});window.a("beevirtua.ui.book.layer.utility.TiledImageRegistry",e)})();(function(){var e=JSF.o(window.require("beevirtua.ui.core.UiObject"),function b(d){b.i.constructor.call(this,d)},{play:function(){throw"not implemented yet";},pause:function(){throw"not implemented yet";},stop:function(){throw"not implemented yet";},xk:function(){return""}},{Qm:"play",Pm:"pause",Sm:"stop",Gm:"end"});window.a("beevirtua.ui.core.PlayableUiObject",e)})();(function(e){function c(b){var c={};Object.keys(b).forEach(function(f){var e=b[f];null!==e&&d[f].f.forEach(function(b){c.hasOwnProperty(b)||(c[b]=[]);var g=d[f];g.priority=e;c[b].push(g)})});Object.keys(c).forEach(function(b){_.sortByOrder(c[b],["priority"],["desc"])});return c}var b=window.require("beevirtua.event.BookManager").h(),d={},f=e.o(window.require("beevirtua.core.FrameworkObject"),function(d,c){this.xc={};this.Zd={};this.Ti=d;var f=this.aj.bind(this),e=new Hammer(d);e.get("pinch").set({enable:!0});
e.get("pan").set({direction:Hammer.DIRECTION_ALL});e.on("pan",f);e.on("panstart",f);e.on("panmove",f);e.on("panend",f);e.on("pandown",f);e.on("swipe",f);e.on("pinch",f);e.on("doubletap",f);e.on("pinchstart",f);e.on("pinchmove",f);e.on("pinchend",f);e.on("tap",f);window.Eg(d,f);window.addEventListener("resize",f);d.addEventListener("mousedown",function(b){f(b)}.bind(this));d.addEventListener("mousemove",function(b){f(b)}.bind(this));d.addEventListener("touchstart",function(b){f({type:"touchdown",clientX:b.clientX,
clientY:b.clientY,pageX:b.pageX,pageY:b.pageX})}.bind(this));b.on(window.require("beevirtua.event.BookManager").f.Gb,f);b.on(window.require("beevirtua.event.BookManager").f.Ki,f);if(device.desktop()){var e=new Hammer(document.body,{cssProps:{userSelect:!0}}),n=function(){};e.on("panstart",n);e.on("panmove",n);e.on("panend",n)}c.on("textSelectionInProgress",this.Il.bind(this));c.on("textSelectionStopped",this.Fj.bind(this));c.on("zzoOpen",this.Il.bind(this));c.on("zzoClosed",this.Fj.bind(this))},{xc:void 0,
Zd:void 0,Ti:void 0,Lf:!1,Il:function(){this.Lf=!0},Fj:function(){this.Lf=!1},aj:function(b){window.require("beevirtua.context.Benchmark");var d=b.type;"doubletap"===d&&console.log(d);"number"!==typeof b.length||"PageChanged"!==b[0]&&"Relayout"!==b[0]||(d="relayout");if(!device.desktop()||!this.Lf)if(!b.srcEvent||!b.srcEvent.target||-1==b.srcEvent.target.className.indexOf("avoid-hammer")){var c=this.Zd[d],f=0;if(c)for(var e=window.require("beevirtua.ui.book.BookContext").h();c[f].Nb.Mb(d,b,e,this.xc[c[f].name])&&
f<c.length-1;)f++}},Up:function(b){if("undefined"===typeof b)return this.xc;this.xc=b;this.Zd=c(this.xc);return this},Bv:function(){return this.Ti}},{lc:function(b,c,f){if(d[b])throw Error("EventHandler already exists for the given name : "+b);d[b]=new function(b,d,c){this.name=b;this.f=d;this.Nb=c}(b,c,f)},D:function(){return"pan panstart panmove panend pandown panup swipe pinch resize relayout doubletap tap mousedown touchstart".split(" ")}});e.Fb.a("beevirtua.ui.book.layer.component.book",{Wu:f});
window.a("beevirtua.event.BookEventAggregator",f)})(JSF);(function(){var e=JSF.o(window.require("beevirtua.ui.core.PlayableUiObject"),function b(d){b.i.constructor.call(this,d);this.addClass("jsf-ui","LayerObject");this.g=[];this.ad=[]},{type:{value:"Layer",enumerable:!0,writable:!1},g:null,Ja:null,update:function(){console.error("Update method of LayerObject should be overriden")},fb:function(){return{x:0,y:0}},ad:null,qg:null,setPosition:function(){0<arguments.length?(this.qg=arguments,e&&e.i.setPosition.apply(this,arguments)):this.qg&&e&&e.i.setPosition.apply(this,
this.qg)},re:null,Za:null,scale:function(b){0<arguments.length?(this.re=arguments,this.Za=b,e&&e.i.scale.apply(this,arguments)):this.re&&(b=this.re[0],e&&e.i.scale.apply(this,this.re));return b},Ca:function(b,d,f){b&&b.on&&f&&(b.on(d,f),this.ad.push({target:b,event:d,Nb:f}))},rk:function(){var b=window.require("beevirtua.ui.book.BookContext").h().Z,d;b[0]&&b[0].Sa==this.Ja?d=b[0]:b[0]&&b[0].ub==this.Ja?d=b[0]:b[1]&&b[1].Sa==this.Ja?d=b[1]:b[1]&&b[1].ub==this.Ja&&(d=b[1]);return d},destroy:function(){if(this.ad)for(var b=
0,d,f=this.ad.length;b<f;b++)d=this.ad[b],d.target&&d.target.$&&d.target.$(d.event,d.Nb);this.target&&this.target.parentNode&&this.target.parentNode.removeChild(this.target);this.target&&delete this.target;this.$t&&delete this.$t},Mc:function(){var b=window.require("beevirtua.ui.book.BookContext").h().Z;return b[0]&&b[0].ub===this.Ja||b[1]&&b[1].Sa===this.Ja},eh:function(){var b=window.require("beevirtua.ui.book.BookContext").h().Z[(this.Ja+1)%2],b=b&&b.Th;if(!b)throw Error("scaledDimension is not defined");
return b},ww:function(){var b=window.require("beevirtua.ui.book.BookContext").h();return{width:b.Eb,height:b.qc,padding:{top:b.Qu,bottom:b.Pu}}},show:function(){this.target&&(this.target.style.display="",this.target.style.opacity=1)},Y:function(){this.target.style.display="none"}},{type:{value:"Layer",writable:!1}});window.a("beevirtua.ui.book.layer.component.LayerObject",e)})();(function(){var e=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function b(d,f,g,e,k,m,n,q,l){b.i.constructor.call(this);this.Ja=d;this.u=f;this.xr=g;this.$r=e;this.Au=k;this.K=m;this.context=n;this.Fc=q;this.tc=l;this.df=["heavyLayers","lightLayers","ultraLightLayers"];d=document.createElement("div");d.style.position="absolute";d.style.zIndex=9002;d.className="glassNode";this.target.appendChild(d);this.lr=d},{qh:!1,Ka:function(){return this.u},Mt:function(){this.xg("heavyLayers",
this.xr,!0,!0)},cm:function(){this.xg("lightLayers",this.$r)},Pt:function(){this.xg("ultraLightLayers",this.Au)},xg:function(b,d,f){var g=this.target,e=this.Mg||[];b=this.Kn(b,d);if(e!=b&&g){this.ic||(this.ic=[]);clearTimeout(this.Ql);this.ic.forEach(clearTimeout);var k=[];this.ic=k;d=new Promise(function(b){this.Ql=setTimeout(function(){e.forEach(function(b){b.target.style.transition="0.25s opacity";b.target.style.opacity=0});e.forEach(function(b){k.push(setTimeout(function(){b.target.parentElement===
g&&b.remove()},250))});b()},f?1E3:0)}.bind(this));b.forEach(function(b){e[0]&&e[0].target&&e[0].target.parentElement===g?g.insertBefore(b.target,e[0].target):g.appendChild(b.target);b.show()});this.Mg=b;return d}},Kn:function(b,d){this[b]||(this[b]=this.Ao(d));return this[b]},Ao:function(b){var d=this.Ja,f=this.K,g=this.context,e=this.Fc,k=this.tc;return b.map(function(b){try{var n=new (window.require("beevirtua.ui.book.layer.component."+b.type))(void 0,f,g,e,k);n.g=b.data;n.Ja=d;n.update();return n}catch(q){console.error("err",
q)}})},eh:function(b){var d=b/this.Ka().height;return{height:b,width:b*d,ratio:d}},uf:function(b,d,f){function g(b){m[b]&&m[b].forEach(e)}function e(b){var g=b.fb();b.setPosition(-d+g.x*n,-f+g.y*n);b.scale(n)}b&&(this.Vr=b,this.Wr=d,this.Xr=f);b=b||this.Vr;d=d||this.Wr;f=f||this.Xr;this.Se&&this.wm&&this.Rb(this.Se,this.wm);if(b){var k=this.df,m=this,n=this.eh(b.X).ratio;k.forEach(g)}},Eu:function(b,d,f,g){var e=this.lr;e.style.transform="translate("+b+"px, "+d+"px)";e.style.width=Math.max(f,0)+"px";
e.style.height=Math.max(g,0)+"px"},Bb:function(){function b(b){b.Bb&&b.Bb()}var d=this;this.df.forEach(function(f){d[f]&&d[f].forEach(b)})},Rb:function(b,d){function f(f){f.Rb&&f.Rb(b,d)}var g=this.df,e=this;this.Se=b;this.wm=d;g.forEach(function(b){e[b]&&e[b].forEach(f)})},setPosition:function(b,d){this.target&&(this.target.style.transform="translateX("+b+"px) translateY("+d+"px)",this.target.style.webkitTransform="translateX("+b+"px) translateY("+d+"px)")},eb:function(){},destroy:function(){e.i.destroy.apply(this,
arguments);var b=this.df,d=this,f=this.Ql;this.ic&&0<this.ic.length&&(this.ic.forEach(clearTimeout),this.ic=null);f&&clearTimeout(f);b.forEach(function(b){d[b]&&d[b].forEach(function(b){b.destroy()})})}});window.a("beevirtua.ui.book.layer.component.FaceLayer",e)})();(function(){window.require("beevirtua.ui.core.PlayableUiObject");window.require("beevirtua.event.BookManager");var e=window.require("beevirtua.context.BrowserDetector"),c=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function d(c,g,e){d.i.constructor.call(this,c);this.context=e;this.addClass("jsf-ui","videoplayer")},{v:null,x:0,y:0,width:0,height:0,zn:"",$o:[],Lu:!0,Dc:null,update:function(){var d=this.g.md;if(this.g.md){var c=this.g.Od;c.l=d.l;var g={title:"",x:c.x,y:c.y,
width:c.width,height:c.height,poster:"",controls:"controls",Sb:[]},d=this.uq(Object.keys(c.l));_.forEach(c.l[d].td,function(d){var c=this.g.P+"/"+d.path;d.type&&0<=d.type.indexOf("video")?g.Sb.push({type:d.type,src:c}):d.type&&0<=d.type.indexOf("image")&&(this.Ps=c)}.bind(this));this.setPosition();this.scale();this.G=g;this._createVideo();this.Lu?this.vn(self.Ps):this.em()}},setPosition:function(d,f){c.i.setPosition.call(this,d,f)},ra:function(d,f){c.i.ra.call(this,d,f);this.v&&(this.v.width=d,this.v.height=
f)},scale:function(d){this.Za=d=d||this.Za;this.G&&this.ra(this.G.width*d,this.G.height*d)},vn:function(d){if(!this.Dc){var c=document.createElement("div");d&&(c.style.backgroundImage="url('"+d+"')");c.style.cssText="display: blockposition: absolutewidth: 100% height: calc(100% - 30px)top: 0px left: 0px cursor: pointerbackgroundSize: 100% backgroundRepeat: no-repeat";d=document.createElement("div");d.style.cssText="margin-top: -35px";d.setAttribute("class","video-play-button");c.appendChild(d);this.target.appendChild(c);
d.addEventListener(device.ios()?"touchstart":"click",function(){this.em();this.play()}.bind(this));this.Dc=c}},_createVideo:function(){this.v||("video"===this.target.localName.toLowerCase()?this.v=this.target:(this.v=document.createElement("video"),this.target.appendChild(this.v)));this.v.innerHTML="";for(var d;this.v.attributes.length;)d=this.v.attributes[0].name,this.v.removeAttribute(d);this.v.setAttribute("width",this.G.width||480);this.v.setAttribute("height",this.G.height||320);this.G.poster&&
this.v.setAttribute("poster",this.G.poster);this.G.controls&&this.v.setAttribute("controls",this.G.controls);this.G.Qh&&this.v.setAttribute("preload",this.G.Qh);_.forEach(this.G.Sb,function(d){var c=document.createElement("source");c.setAttribute("type",d.type);c.setAttribute("src",d.src);this.v.appendChild(c)}.bind(this));this.fn();this.v.style.display="none";this.scale();this.target.appendChild(this.v);window.v=this.v},fn:function(){var d=this.Lb;d||(d=document.createElement("div"),d.style.position=
"absolute",d.className="video-close-button",d.addEventListener(device.ios()?"touchstart":"click",this.showPlaceHolder.bind(this)),this.Lb=d);this.Lb.style.display="none";this.target.appendChild(d)},em:function(){this.Dc&&(this.Dc.style.display="none");this.v.style.display="inline-block";this.Dc&&(this.Lb.style.display="")},showPlaceHolder:function(){this.Dc.style.display="";this.v.style.display="none";this.Lb.style.display="none";this.stop()},play:function(){if(this.v)try{e.Lc()?setTimeout(function(){this.v.play()}.bind(this),
500):this.v.play()}catch(d){new (require("beevirtua.ui.alert.Alert"))(this.context.hb.T("videoError"),this.context.hb.T("backToBeevirtua"),function(){this.showPlaceHolder()}.bind(this))}else console.error("Cannot play this media, player is not ready.",this)},pause:function(){this.v&&this.v.pause()},stop:function(){this.v&&(this.v.pause(),this.v.currentTime=0)},uq:function(d){var c=0,c=device.mobile()?480:device.tablet()?720:2160,g=0;_.forEach(d,function(d){d=parseInt(d);d>g&&d<=c&&(g=d)});return g},
fb:function(){if(this.g.Od)return{x:this.g.Od.x,y:this.g.Od.y}},xk:function(){return this.g.Od.id},destroy:function(){this.Hp();this.Ye&&this.remove();c.i.destroy.apply()},Hp:function(){this.Lb&&this.Lb.parentElement&&this.Lb.parentElement.removeChild(this.Lb);this.v&&(device.mobile()||!0!==document.webkitIsFullScreen||document.webkitExitFullscreen(),this.v.media&&(this.v.media.src=""),this.target.innerHTML="",this.v=null);return Promise.resolve()}},{type:{value:"VideoPlayer",writable:!1,enumerable:!0}});
window.a("beevirtua.ui.book.layer.component.VideoPlayer",c)})();(function(){var e=window.require("beevirtua.ui.core.PlayableUiObject"),c=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function d(c,g,e){d.i.constructor.call(this,c,g);"audio"===this.target.localName.toLowerCase()?this.ya=this.target:(this.ya=document.createElement("audio"),this.target.appendChild(this.ya));this.addClass("jsf-ui","audioplayer");this.me=!1;e&&"object"===typeof e&&e.Sb&&this.setData(e)},{Fa:null,ya:null,x:0,y:0,width:0,height:0,zn:"",$o:[],me:null,play:function(){this.Fa&&
this.Fa.play()},pause:function(){this.Fa&&this.Fa.pause()},stop:function(){this.Fa&&(this.Fa.pause(),this.Fa.media.duration&&this.Fa.setCurrentTime(0))},update:function(){var d=this;this.g.md.then(function(c){var g=d.g.kd;g.l=c.l;c={title:"",x:g.x,y:g.y,width:g.width,height:g.height,poster:"",Sb:[]};for(var e=0,k=g.l.Quality100.td.length;e<k;++e)c.Sb.push({type:g.l.Quality100.td[e].type,src:[d.g.P,g.l.Quality100.td[e].path,".",g.l.Quality100.td[e].ec].join("")});d.setPosition();d.scale();d.setData(c)})},
setData:function(d){this.G=d;for(this.ya.innerHTML="";this.ya.attributes.length;)d=this.ya.attributes[0].name,this.ya.removeAttribute(d);void 0!==this.G.width&&this.ya.setAttribute("width",this.G.width);void 0!==this.G.height&&this.ya.setAttribute("height",this.G.height);this.G.poster&&this.ya.setAttribute("poster",this.G.poster);this.G.controls&&this.ya.setAttribute("controls",this.G.controls);this.G.Qh&&this.ya.setAttribute("preload",this.G.Qh);d=0;for(var c=this.G.Sb.length,g=null;d<c;++d)g=document.createElement("source"),
g.setAttribute("type",this.G.Sb[d].type),g.setAttribute("src",this.G.Sb[d].src),this.ya.appendChild(g);this.Fa=new MediaElementPlayer(this.ya,{pauseOtherPlayers:!1,xv:this.G.width,wv:this.G.height,Sv:this.G.width,Rv:this.G.height,features:["playpause"]});!1===this.me&&(this.Fa.media.addEventListener("play",this,!1),this.Fa.media.addEventListener("pause",this,!1),this.Fa.media.addEventListener("ended",this,!1),this.me=!0)},handleEvent:function(d){var c="NO_EVENT";switch(d.type){case "play":c=e.Qm;
break;case "pause":c=e.Pm;break;case "stop":c=e.Sm;break;case "ended":c=e.Gm}"NO_EVENT"!==c&&this.ua(c,{type:c,sender:this,Fd:d})},setPosition:function(d,f){c.i.setPosition.call(this,d,f)},fb:function(){if(this.g.kd)return{x:this.g.kd.x,y:this.g.kd.y}},xk:function(){return this.g.kd.id},ra:function(d,f){c.i.ra.call(this,d,f);this.ya.width=d;this.ya.height=f;this.Fa.kx(d,f);this.Fa.ix()},destroy:function(){this.Ye&&this.remove()}},{type:{value:"AudioPlayer",writable:!1,enumerable:!0}});window.a("beevirtua.ui.book.layer.component.AudioPlayer",
c)})();(function(){window.require("beevirtua.ui.core.PlayableUiObject");var e=window.require("beevirtua.event.BookManager"),c=window.require("beevirtua.ui.loader.Loader"),b=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function f(b){f.i.constructor.call(this,b);this.addClass("jsf-ui","AnimationLayer");this.target.style.position="absolute";this.target.style.zIndex=51E3;this.me=!1;var c=this;b=e.h();this.Ca(b,e.f.Gb,this.Kh.bind(this));this.Ca(b,e.f.Ji,this.Bs.bind(this));this.Ca(b,
e.f.Uc,this.zs.bind(this));var k=window.require("beevirtua.data.cooked.PageRegistry");k.h().Aq().then(function(){c.lk(c)();c.Ca(k.h(),k.f.Pd,c.lk(c))})},{Fg:!1,vk:function(){return this.Mc()},Kh:function(){this.Mc()?this.Dj():this.Je()},Bs:function(){this.F&&this.F.pause()},zs:function(){this.F&&this.Mc()&&this.F.play()},play:function(){this.F&&this.F.play()},pause:function(){this.F&&this.F.pause()},stop:function(){this.F&&this.F.stop()},Je:function(){this.Fg=this.il=!1;if(this.F){try{this.Qa&&this.Qa.removeChild(this.Qa.lastChild)}catch(b){console.log("AnimationLayer this.deactivateAnimation\n"+
b)}this.Qa.parentElement&&this.Qa.parentElement.removeChild(this.Qa);this.F.$("ready");this.F.$("error");this.F.$("play");this.F.$("stop");this.F.destroy();this.F=null}},Dj:function(){var b=this;if(!this.Fg&&(this.Fg=!0,this.g&&this.g.Ce)){var g=this.g.Ce;if(!b.ed){var e=g.fileName.replace(".js","");b.Ce=g;if(null!==b.F||b.il)b.F.gt();else{b.Qa=document.createElement("div");b.target.appendChild(b.Qa);var k=new c(b.Qa);k.yd.then(function(){b.F=window.require("bee.ui.animation.CreateJSAnimation").Jm(b.g.P+
"/"+e+".js",e,b.g.P+"/");b.F.on("ready",function(c){console.log("destroy loader",k);k.destroy();b.ed||(console.log("animation onReady : :"+c.sender.hd),b.F&&(b.F.canvas.height=g.height,b.F.canvas.width=g.width),b.vk()&&b.F.play())});b.F.on("stop",function(c){console.log("AnimationLayer listener animationCreateJs stop :  "+c.sender.hd);b.F.stop()});b.F.canvas.style.height="100%";b.F.canvas.style.width="100%";b.Qa.appendChild(b.F.canvas)})}b.ra(g.width,g.height);b.setPosition();b.scale();b.il=!0}}},
F:null,update:function(){},lk:function(b){return function(){if(b.vk()){var c=window.require("beevirtua.ui.book.BookContext").h(),e=b.rk();e?-1==c.cc||1==c.cc&&b.Ja==e.Sa||0==c.cc&&b.Ja==e.ub?b.Dj():b.Je():b.Je()}else b.Je()}},setPosition:function(c,g){b.i.setPosition.call(this,c,g)},ra:function(c,g){b.i.ra.call(this,c,g);this.Qa.style.width=c+"px";this.Qa.style.height=g+"px"},scale:function(c){b.i.scale.call(this,c);var g=this.Ce,e=this.g.Be;g&&e&&(c=e.width/g.width,g=e.height/g.height,e=this.Qa,
e.style.transformOrigin="0px 0px",e.style.webkitTransformOrigin="0px 0px",e.style.transform="scaleX("+c+") scaleY("+g+")",e.style.webkitTransform="scaleX("+c+") scaleY("+g+")")},fb:function(){if(this.g.Be)return{x:this.g.Be.x,y:this.g.Be.y}},destroy:function(){this.ed=!0;this.Ye&&this.remove();b.i.destroy.apply(this,arguments)}},{type:{value:"AnimationLayer",writable:!1,enumerable:!0}});window.a("beevirtua.ui.book.layer.component.AnimationLayer",b)})();(function(e){function c(){}c.prototype.Mq=function(b,d,c){c=c||{width:document.body.clientWidth,height:document.body.clientHeight};var g=b,e=c.width-0;c=c.height-0;for(var k=d.width*g,m=d.height*g;k>e||m>c;)g--,k=d.width*g,m=d.height*g;return Math.max(1,Math.min(g,b))};c.prototype.jr=function(b,d,c){c=c||{width:document.body.clientWidth,height:document.body.clientHeight};b=this.Mq(b,d,c);d.x=d.x||0;d.y=d.y||0;var g=d.width,e=d.height,k=g*b,m=e*b;return{x:Math.min(Math.max(0,c.width-k),Math.max(d.x-
(k-g)/2,0)),y:Math.min(Math.max(0,c.height-m),Math.max(d.y-(m-e)/2,0)),width:k,height:m,rc:b}};c.prototype.ys=function(b,c){c=c||{width:document.body.clientWidth,height:document.body.clientHeight};if(c.width<b.width){var f=c.width/b.width;b.height=b.height*f;b.width=c.width}c.height<b.height&&(f=c.height/b.height,b.width=b.width*f,b.height=c.height);b.x=Math.min(Math.max(0,b.x),c.width-b.width);b.y=Math.min(Math.max(0,b.y),c.height-b.height);return b};e("beevirtua.ui.book.layer.component.ZoomedZone",
c)})(window.a,window.require);(function(e){function c(){}c.prototype.vq=function(b,c,f){return{x:c.left,y:c.top,width:b.width*f,height:b.height*f}};e("beevirtua.ui.book.layer.component.ZoomableZone",c)})(window.a);(function(e){function c(b){this.md=b;this.Ss=c.kb(b)}c.prototype.Rs=function(b,c){return this.Qs(this.Ss,b,c)};c.prototype.Qs=function(b,c,f){for(var g=!1,e=0,k=b.length-1;e<b.length;k=e++){var m=b[e].x,n=b[e].y,q=b[k].x,k=b[k].y;n>f!=k>f&&c<(q-m)*(f-n)/(k-n)+m&&(g=!g)}return g};c.kb=function(b){return b.path&&0<b.path.length?_.map(b.path,function(b){return{x:b.x,y:b.y}}):c.Zb(b)};c.Zb=function(b){return[{x:0,y:0},{x:b.width,y:0},{x:b.width,y:b.height},{x:0,y:b.height}]};e("beevirtua.ui.book.layer.component.PolygonalZone",
c)})(window.a);(function(e){function c(b,c,f,g,e){this.R=b;var k=this.canvas=document.createElement("canvas");k.style.position="absolute";k.style.left="0px";k.style.top="0px";k.width=c.width*Math.max(e,1/e);k.height=c.height*Math.max(e,1/e);k.style.transform="scale("+e+")";k.style.webkitTransform="scale("+e+")";k.style.transformOrigin="0 0";k.style.webkitTransformOrigin="0 0";this.offset=f;var m=this.context=this.canvas.getContext("2d");m.beginPath();m.lineJoin="round";m.lineWidth=42;c=g[0];m.moveTo(c.x,c.y);_.forEach(g,
function(b){m.lineTo(b.x,b.y)});m.lineTo(c.x,c.y);m.clip();b.appendChild(k)}c.prototype.eb=function(b,c,f){function g(b,c,d,f){d=e.getImageData(b,c,d,f);f=0;for(var g=d.data.length;f<g;f+=4)0<d.data[f+3]&&(d.data[f+3]=255);e.putImageData(d,b,c)}var e=this.context,k=this.offset;c+=k.left;f+=k.top;e.drawImage(b,c,f);g(c,f,1,256);g(c,f,256,1)};c.prototype.El=function(){};c.prototype.destroy=function(){this.R.removeChild(this.canvas)};e("beevirtua.ui.book.layer.utility.ZZODrawContext",c)})(window.a);(function(e){function c(b,c,d,f,g){this.Tu=b;this.tc=d;this.U=f;this.fc=g;this.scale=c;this.$f=!1}var b=window.require("beevirtua.ui.book.layer.component.ZoomableZone"),d=window.require("beevirtua.ui.book.layer.component.ZoomedZone"),f=window.require("beevirtua.ui.book.layer.utility.TileDrawer"),g=window.require("beevirtua.ui.book.layer.utility.ZZODrawContext");window.require("beevirtua.ui.book.display.ViewportLayout");c.prototype.open=function(c,e){var m=this.tc,n=this.U,q=this.fc,l=this.Tu,p=this.scale,
r=n.kc||4,p=p||1,u=(new b).vq(l,c,p),p=new d,t=p.jr(r,l,e),t=p.ys(t,e),w=this.R=document.createElement("DIV");w.className="zoomedZone";w.style.width=t.width+"px";w.style.height=t.height+"px";w.style.left=u.x+"px";w.style.top=u.y+"px";r="transparent";l.backgroundColor&&""!=l.backgroundColor&&(r=l.backgroundColor);w.style.backgroundColor=r;m.qp(this);this.sp(t,u,w);this.pp();setTimeout(function(){this.tp(t,u,w)}.bind(this),10);this.$f=!0;m.show();m=Math.pow(2,t.rc)*n.qb;r=q.width<q.height?m/q.height:
m/q.width;c={left:-r*l.x,top:-r*l.y};m=t.height/l.height/r;q={left:l.x/q.width,top:l.y/q.height,right:(l.x+l.width)/q.width,bottom:(l.y+l.height)/q.height};l=this.Nq(l,r);l=new g(w,t,c,l,m);l.fc=this.fc;(new f(l,n.qb,n.P,"."+n.ec)).eb(t.rc,q,this.fc).then(function(){}.bind(this))};c.prototype.Nr=function(){return this.$f};c.prototype.Nq=function(b,c){return b.path&&0!==b.path.length?_.map(b.path,function(b){return{x:b.x*c,y:b.y*c}}):[{x:0,y:0},{x:b.width*c,y:0},{x:b.width*c,y:b.height*c},{x:0,y:b.height*
c}]};c.prototype.sp=function(b,c,d){b=c.width/b.width;d.style.webkitTransform="scale("+b+")";d.style.msTransform="scale("+b+")";d.style.transform="scale("+b+")";d.style.webkitTransformOrigin="0 0 0px";d.style.transformOrigin="0 0 0px"};c.prototype.tp=function(b,c,d){b=this.er(c,b);b="translate("+b.x+"px,"+b.y+"px) scale(1)";d.style.webkitTransform=b;d.style.msTransform=b;d.style.transform=b};c.prototype.er=function(b,c){var d;d={width:document.body.clientWidth,height:document.body.clientHeight};var f=
b.x-(c.width-b.width)/2,g=b.y-(c.height-b.height)/2,f=Math.max(0,Math.min(f,d.width-c.width)),g=Math.max(0,Math.min(g,d.height-c.height));return{x:-1*(b.x-f),y:-1*(b.y-g)}};c.prototype.pp=function(){var b=this.R;b.style.transition="transform 0.5s ease-out"};c.prototype.destroy=function(){this.$f=!1;this.R=null};e("beevirtua.ui.book.layer.component.ZzoFacade",c)})(window.a);(function(){window.require("beevirtua.ui.core.UiObject");window.require("beevirtua.ui.utility.CSS");var e=window.require("beevirtua.event.BookManager"),c=window.require("beevirtua.ui.book.layer.component.ZzoFacade");window.require("beevirtua.ui.book.layer.component.ZoomedZone");var b=window.require("beevirtua.ui.book.layer.component.PolygonalZone");window.require("beevirtua.ui.book.layer.utility.TiledImageRegistry");var d=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function g(b,
c,d,e,q){g.i.constructor.call(this,b);this.addClass("jsf-ui","HotZoneLayer","hotZone","surVolEffect");this.Fc=e;this.tc=q;this.K=c;g.Ys(this)},{Ob:!1,Bw:!0,Ex:null,Qv:null,Cv:null,update:function(){if(!this.Ob){var d=this.g.Bm;this.Su=new b(d);var h=this.tc;this.ra(d.width,d.height);this.setPosition(d.x,d.y);this.scale();e.h().on(e.f.uc,this.Sk.bind(this));this.Cm=new c(d,this.Za,h,this.g.U,this.g.u);this.Ob=!0}},show:function(){this.target&&(this.target.style.display="",this.target.style.opacity=
"")},Y:function(){this.target&&(this.target.style.display="none")},Sk:function(b){1<b[1]?this.Y():this.show()},Ks:function(){if(!this.Cm.Nr()){var b=this.target.getBoundingClientRect();this.Cm.open({left:b.left,top:b.top})}},setPosition:function(){d.i.setPosition.apply(this,arguments)},fb:function(){return this.g?this.g.Bm:{x:0,y:0}},destroy:function(){d.Du(this);d.i.destroy.apply(this,arguments);e.h().$(e.f.uc,this.Sk.bind(this))}},{Bd:null,$j:null,Lh:null,Nc:function(){return d.Bd},Ys:function(b){null===
d.Bd&&(d.Bd=[]);d.Bd.push(b)},Du:function(b){_.remove(d.Bd,function(c){return c===b})},Mr:function(b){var c=b.target.getBoundingClientRect();return b.Su.Rs((this.x-c.left)/b.Za,(this.y-c.top)/b.Za)},Mb:function(b,c){if("doubletap"===b)return clearTimeout(d.Lh),!0;var e=c.pointers&&c.pointers[0]||c.srcEvent||c,m=d.Nc(),n=d.$j;if((e=_.find(m,d.Mr.bind({x:e.clientX||e.pageX,y:e.clientY||e.pageY})))||n)switch(b){case "mousemove":n&&n!=e&&n.removeClass("hover");e&&n!=e&&e.addClass("hover");d.$j=e;break;
case "tap":e&&(c.srcEvent&&c.srcEvent.preventDefault(),clearTimeout(d.Lh),d.Lh=setTimeout(e.Ks.bind(e),300))}return!e}});window.a("beevirtua.ui.book.layer.component.HotZoneLayer",d);require("beevirtua.event.BookEventAggregator").lc("hotZone",device.desktop()?["tap","mousemove","doubletap"]:["tap","doubletap"],d)})();(function(e,c){c("beevirtua.ui.core.UiObject");var b=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function f(b){f.i.constructor.call(this,b);this.addClass("jsf-ui","ExternalLinkLayer");this.target.style.position="absolute"},{jd:{x:0,y:0},Ob:!1,update:function(){if(!this.Ob){this.Ob=!0;var b=this.g.Ah;this.target.setAttribute("data-url",b.url);this.jd={x:b.x,y:b.y};this.ra(b.width,b.height);this.setPosition(b.x*this.Za,b.y*this.Za)}},fb:function(){return this.jd},show:function(){this.target&&
(this.target.style.display="",this.target.style.opacity="")}},{Mb:function(b,c){var e=c.target.getAttribute("data-url");e&&window.open(e);return!0}});e("beevirtua.ui.book.layer.component.ExternalLinkLayer",b);c("beevirtua.event.BookEventAggregator").lc("externalLink",["tap"],b)})(window.a,window.require);(function(e,c){c("beevirtua.ui.core.UiObject");var b=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function f(b){f.i.constructor.call(this,b);this.addClass("jsf-ui","InternalLinkLayer");this.target.style.position="absolute"},{jd:{x:0,y:0},Ob:!1,update:function(){if(!this.Ob){this.Ob=!0;var b=this.target,c=this.g.Ah;b.setAttribute("data-action",c.action);b.setAttribute("data-param",c.Ph);this.jd={x:c.x,y:c.y};this.ra(c.width,c.height);this.setPosition(c.x*this.Za,c.y*this.Za)}},
fb:function(){return this.jd},show:function(){this.target&&(this.target.style.display="",this.target.style.opacity="")}},{GoToPage:function(b){var e=c("beevirtua.ui.book.BookContext").h();window.isNaN(b)?e.navigation.ob(e.xb.yq(b)):e.navigation.ob(b-1)},Mb:function(c,e){var h={action:e.target.getAttribute("data-action"),Ph:e.target.getAttribute("data-param")};if(h&&b[h.action])b[h.action](h.Ph);return!0}});e("beevirtua.ui.book.layer.component.InternalLinkLayer",b);c("beevirtua.event.BookEventAggregator").lc("internalLink",
["tap"],b)})(window.a,window.require);(function(e,c,b){c=b.o(c("beevirtua.ui.book.layer.component.LayerObject"),function f(){f.i.constructor.call(this);this.addClass("jsf-ui","FaceLoading","layer-background");this.target.style.background="white";this.target.style.position="absolute";this.setPosition(0,0)},{update:function(){this.ra(this.g.u.width,this.g.u.height)}});e("beevirtua.ui.book.layer.component.FaceLoading",c)})(window.a,window.require,JSF);(function(){var e=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function b(d){b.i.constructor.call(this,d);this.addClass("jsf-ui","FaceBackground","layer-background");this.Ta=document.createElement("img");this.Ta.style.width="100%";this.Ta.style.height="100%";this.target.appendChild(this.Ta)},{type:{value:"FaceBackground",enumerable:!0,writable:!1},Ta:null,update:function(){this.g.Hd&&window.device&&(device.tablet()||device.mobile())?this.Ta.src=this.g.Hd:this.Ta.src=this.g.url;
this.ra(this.g.u.width,this.g.u.height);this.setPosition();this.scale()}},{type:{value:"Layer",writable:!1}});window.a("beevirtua.ui.book.layer.component.FaceBackground",e)})();(function(){var e=window.require("beevirtua.ui.book.layer.utility.TiledImageRegistry"),c=JSF.o(window.require("beevirtua.core.FrameworkObject"),function d(c,e,h,k){d.i.constructor.call();this.Ue=c;this.Bc=e;"DIV"==h.tagName?this.Rf=h:(this.Wd=h,this.Ha=h.getContext("2d"));if(this.Ud=k)this.Pi=k.getContext("2d")},{Bc:null,Rf:null,Wd:null,Ha:null,Ud:null,Pi:null,Yc:null,Xf:null,je:0,$c:0,Zj:function(c,f,e,h){var k=this;this.Ue.ready.then(function(){k.Yc=(new Date).getTime();k.Xf=c;k.$c=e;k.je=0;c.map(function(c){var d=
c.id,e=c.url,g=c.left,p=c.top;c=c.vx;k.Bc[d]&&k.Bc[d].bl?k.pk(d,g,p,f.left,f.top,k.Yc,h,c)():k.Bc[d]={bl:!1,Ta:k.Ue.ol(e,k.pk(d,g,p,f.left,f.top,k.Yc,h,c))}})}).catch(function(){console.log(" TiledImageDrawer : ImageLoader : failed!!! ")})},pk:function(d,f,g,h,k,m,n,q){var l=this;return function(){l.Bc[d].bl=!0;e.h().Zs(q.qd,q.fc,q.rc,q.x,q.y);var p=l.Bc[d].Ta,r=p.naturalWidth,u=p.naturalHeight,t=r/u;if(1<r&&1<u&&l.Yc===m){var w=f-h,x=g-k;r<u?(r=l.$c*t,t=l.$c):(r=l.$c,t=l.$c/t);l.Rf?(p.style.position=
"absolute",p.style.left=Math.floor(w)+"px",p.style.top=Math.floor(x)+"px",p.style.width=Math.ceil(r)+"px",p.style.height=Math.ceil(t)+"px",l.Rf.appendChild(p)):l.Ha&&l.Ha.drawImage(p,w,x,r,t);c.debug&&(l.Ha.lineWidth=1,l.Ha.strokeStyle="red",l.Ha.beginPath(),l.Ha.moveTo(w,x),l.Ha.lineTo(w+r,x),l.Ha.lineTo(w+r,x+t),l.Ha.lineTo(w,x+t),l.Ha.lineTo(w,x),l.Ha.stroke())}l.je++;l.Yc===m&&l.je===l.Xf.length&&(n&&l.Ud&&l.Wd&&(l.Ud.width=l.Wd.width,l.Ud.height=l.Wd.height,l.Pi.drawImage(l.Ha.canvas,0,0)),c.debug&&
console.log("Drawn : ",l.je,"/",l.Xf))}}},{debug:!1});window.a("beevirtua.ui.book.layer.utility.TiledImageDrawer",c)})();(function(){window.require("beevirtua.event.BookManager");var e=window.require("beevirtua.ui.book.layer.utility.TileDrawer"),c=window.require("beevirtua.ui.book.layer.utility.DrawContexts"),b=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function f(b){f.i.constructor.call(this,b);this.addClass("jsf-ui","FaceTiledBackground","layer-background");this.Op=_.debounce(this.Qi.bind(this),500)},{update:function(){var b=this,g=this.g,h=g.qb,k=g.P,m=g.ec,n=this.dc=new c.Ta(this.target,
g.kc);n.zk=function(c){return Math.max(b.Mp,b.Np)/(h*Math.pow(2,c))};n.fc={width:g.u.width,height:g.u.height};this.ji=new e(n,h,k,m)},scale:function(b){var c=this.g,e=c.u.height*b;this.Np=c.u.width*b;this.Mp=e;this.ra(0,0);this.Mc()&&this.Qi(this.Se,this.Yr)},Bb:function(){this.ji.Bb()},Rb:function(b,c){this.Se=b;this.Yr=c;this.Mc()&&this.Op(b,c)},Qi:function(b,c){var e=this.ji,k=this.g,m=k.qb,n=k.kc,k=this.eh(),q={},l;for(l in k)q[l]=b*k[l];m=this.Tn(this.On(q),n,m);e.sf(m);e.eb(m,c,k)},On:function(b){return Math.max(b.width,
b.height)},Tn:function(b,c,e){b=Math.log(b/e)/Math.log(2);e=b-~~b;return Math.min(Math.round(b-e)+(.25>e?0:1),c)},destroy:function(){b.i.destroy.apply(this);this.ji.destroy();this.dc.destroy()}},{debug:!1});window.a("beevirtua.ui.book.layer.component.FaceTiledBackground",b)})();(function(){var e=window.require("beevirtua.event.BookManager"),c=e.h(),b=window.require("beevirtua.context.PerformanceManager"),d=b.h(),f=document.createElement("div");f.style.display="none";f.className="css-loader";document.body.appendChild(f);var g=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function k(f){function g(){c.dh(e.properties.od)||q.Qp()}k.i.constructor.call(this,f);this.addClass("jsf-ui","HtmlLayer");var q=this;this.Ca(d,b.f.Ii,g);g()},{Ib:null,lp:function(b){this.Ib||
(this.Ib=document.createElement("div"),f.appendChild(this.Ib));b&&(this.Ib.innerHTML=b)},An:function(){this.Ib&&this.Ib.parentNode&&this.Ib.parentNode.removeChild(this.Ib)},type:{value:"HtmlLayer",enumerable:!0,writable:!1},update:function(){c.dh(e.properties.od)&&(this.lp(this.g.yw),this.g.Br&&(this.target.innerHTML=this.g.Br));this.setPosition();this.scale()},Qp:function(){this.target.innerHTML=""},destroy:function(){g.i.destroy.apply(this,arguments);this.An()}},{type:{value:"Layer",writable:!1}});
window.a("beevirtua.ui.book.layer.component.HtmlLayer",g)})();(function(e,c){function b(){this.Ua(document.body,"beevirtua/ui/tooltip/Tooltip.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){};b.prototype.show=function(b,c,d){var e=this.I,m=this.target;this.$timeout.cancel(this.Uk);e.toolTipMessageClick=c;e.toolTipMessage=d;e.isWindows=device.windows();e.visible=!0;m.style.left=b.x+"px";m.style.top=b.y-m.offsetHeight-20+"px"};b.prototype.Y=function(b){var c=this.I,d=this.$timeout;c.visible&&
(d.cancel(this.Uk),this.Uk=d(function(){c.visible=!1},b))};b.prototype.ud=[b.prototype.show,b.prototype.Y];e("beevirtua.ui.tooltip.Tooltip",b)})(window.a,window.require);(function(e,c){var b=c("beevirtua.event.BookManager"),d=c("beevirtua.context.BrowserDetector"),f=b.h(),g=JSF.o(c("beevirtua.ui.book.layer.component.LayerObject"),function k(b,c,e){k.i.constructor.call(this,b);this.K=c;this.context=e;d.Lc()?this.addClass("jsf-ui","TextLayer"):this.addClass("jsf-ui","TextLayer","avoid-prevent-default");k.di.push(this);this.Ke=_.debounce(this.Ke.bind(this),500)},{type:{value:"TextLayer",enumerable:!0,writable:!1},Gr:function(){this.Ca(f,b.f.Ci,this.rp.bind(this));this.Ca(f,
b.f.Fi,this.iq.bind(this));if(this.g.Pk){var c=function(){var b="";window.getSelection?""!=window.getSelection().toString()&&(b=window.getSelection().toString()):document.selection&&(b=document.selection);return""===b},d=function(){g.Nh=!1};this.Ca(f,b.f.Gb,d.bind(this));this.Ca(f,b.f.Qd,d.bind(this));this.Ca(f,b.f.Uc,d.bind(this));this.Ca(f,b.f.Ni,this.Ke.bind(this));this.Ca(f,b.f.Vc,function(){if(c()||device.ios())g.Nh=!0,this.Y()}.bind(this));this.Ca(f,b.f.Mi,function(){(c()||device.ios())&&this.Y()}.bind(this));
this.Ca(f,b.f.Hi,function(){if(c()||device.ios())this.Y(),this.Ke()}.bind(this))}},rp:function(b){b=b[1];var c=this.rk();c&&(b.left&&c.oh||b.right&&c.We?!this.hasClass("selectableText")&&this.addClass("selectableText"):this.removeClass("selectableText"))},iq:function(){this.removeClass("selectableText")},Ke:function(){this.show()},update:function(){if(!this.Co&&this.g&&this.g.height&&this.g.path){var b=this.g.height,e=this.g.path.replace("{{faceIndex}}",this.Ja),f=this.g.u.width/this.g.u.height*b;
this.g.Pk&&(this.target.className+=" hiddenHtml");this.ra(f,b);var g=this,l=[this.g.Cq(e)];if(g.g.Lg&&0<g.g.Lg.length){var p=c("beevirtua.ui.utility.CssLoader").h();p.Cu().then(_.forEach(g.g.Lg,function(b){b=p.load(b).then(function(b){p.Dg({href:b})});l.push(b)}))}Promise.all(l).then(function(b){g.target.innerHTML=b;d.Lc()&&_.forEach(g.target.getElementsByClassName("t"),function(b){b.className+=" avoid-prevent-default"})});b=this.g.width;e=this.g.height;g.Bj=Math.max(g.g.u.width,g.g.u.height)/Math.max(b,
e);g.scale(g.Za);g.ra(b,e);this.Gr();this.Co=!0}},scale:function(b){g.i.scale.apply(this,arguments);this.g&&this.g.u&&this.g.height&&(this.Bj&&(b=b*this.Bj),g.i.scale.call(this,b))},destroy:function(){var b=this.uid;g.di=_.filter(g.di,function(c){return c.uid!=b});g.i.destroy.apply(this,arguments)},show:function(){g.Nh||g.i.show.apply(this,arguments)}},{Nh:!1,di:[]});e("beevirtua.ui.book.layer.component.TextLayer",g)})(window.a,window.require);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this);this.J.ready=[];this.J.Av=[];this.J.play=[];this.J.pause=[];this.J.stop=[];this.J.ux=[]},{play:function(){throw"you should redifine this instance method";},pause:function(){throw"you should redifine this instance method";},stop:function(){throw"you should redifine this instance method";},load:function(){throw"not implemented yet";},Bu:function(){throw"not implemented yet";},destroy:function(){throw"you should redifine this instance method";
},ke:function(){throw"you should redifine this instance method";}},{});JSF.Fb.a("bee.ui.animation",{Uu:e});window.a("bee.ui.animation.Animation",e)})();(function(){var e=window.require("micro.micro"),c=JSF.o(window.require("bee.ui.animation.Animation"),function d(c){d.i.constructor.call(this);this.J.vv=[];this.J.uv=[];this.J.mx=[];this.J.dx=[];this.Uf=this.Bg=this.hd="";this.yg=this.cg=this.Tf=this.qa=null;this.Qf=document.createElement("canvas");this.W=null;this.Vd=[];this.Ma=[];c&&(this.Da=c)},{qa:null,Da:{get:function(){return this.qa},set:function(c){var e=this;this.qa=c;this.qa.on("tick",function(c){e.Xm(c)})},enumerable:!0},hd:"",name:{get:function(){return this.hd},
set:function(c){this.hd=c},enumerable:!0},Bg:"",url:{get:function(){return this.Bg},set:function(c){this.Bg=c},enumerable:!0},Uf:"",dk:{get:function(){return this.Uf},set:function(c){this.Uf=c},enumerable:!0},yg:null,Cb:{get:function(){return this.yg},set:function(c){this.yg=c},enumerable:!0},Tf:null,Rg:{get:function(){return this.Tf},set:function(c){this.Tf=c},enumerable:!0},Qf:null,canvas:{get:function(){return this.Qf},set:function(c){this.Qf=c},enumerable:!0},cg:null,jc:{get:function(){return this.cg},
set:function(c){this.cg=c},enumerable:!0},ej:null,play:function(){this.ua("beforePlay",{type:"beforePlay",sender:this,Da:this.qa});this.qa&&this.qa.play();if(this.Ma&&this.SoundManager)for(var c=0;c<this.Ma.length;c++){var e=this.SoundManager.ge(this.Ma[c]);e&&e.play()}var e=[],g=this.qa,h=0;do{++h;g&&g.play&&g.play();if(g&&g.Hh)for(var c=0,k=g.Hh;c<k;++c)e.push(g.rq(c));g=e.length?e.pop():null}while(e.length);this.ua("play",{type:"play",sender:this})},pause:function(){this.qa&&this.qa.stop();if(this.Ma&&
this.SoundManager)for(var c=0;c<this.Ma.length;c++){var e=this.SoundManager.ge(this.Ma[c]);e&&e.pause()}var e=[],g=this.qa;do{g&&g.stop&&g.stop();if(g&&g.Hh)for(var c=0,h=g.Hh;c<h;++c)e.push(g.rq(c));g=e.length?e.pop():null}while(e.length);this.ua("pause",{type:"pause",sender:this,Da:this.qa})},stop:function(){this.qa&&this.qa.gotoAndStop(c.Hm);this.ua("stop",{type:"stop",sender:this})},gt:function(){this.qa&&this.qa.gotoAndPlay(0)},Xm:function(c){c=c.params&&c.params.length?c.params[0]:{Vj:void 0,
paused:void 0};this.ua("tick",{type:"tick",sender:this,Da:this.qa,currentFrame:this.qa.currentFrame,Vj:c.Vj,paused:c.paused})},destroy:function(){this.ye&&createjs.Ticker.removeEventListener("tick",this.ye);this.Cb?(this.Cb.clear(),this.Cb.enableDOMEvents(!1),this.Cb.removeAllEventListeners(),this.Cb.removeAllChildren()):console.warn("CreateJSAnimation#destroy -> this.stage is null O_o.");this.Da?(this.Da.removeAllEventListeners(),this.Da.removeAllChildren()):console.warn("CreateJSAnimation#destroy -> this.anim is null O_o.");
this.ej&&this.ej.destroy();this.Ma.length&&createjs.Sound&&this.Ma.forEach(function(c){createjs.Sound.removeSound(c)});this.Vd=[];this.Ma=[];this.W=null},W:null,Vd:null,Ma:null,Cf:null,tf:null,ye:null,Mf:null,_animScriptLoaded:function(c,e){var g=c.responseText;this.SoundManager=function(){var c={xe:[],ge:function(d){for(var e=null,f=0,g=c.xe.length;f<g;++f)if(c.xe[f].name===d){e=c.xe[f].Ve;break}return e},playSound:function(d){var e=c.ge(d);e?e.play():c.xe.push({name:d,Ve:createjs.Sound.play(d)})},
rx:function(d){(d=c.ge(d))&&d.stop()}};return c}();var h={createjs:createjs,lib:{},images:{},SoundManager:this.SoundManager};(function(c){return eval(c)}).call(h,"(function (lib, images, createjs, SoundManager) { "+g+"})(this.lib, this.images, this.createjs, this.SoundManager );");createjs.MotionGuidePlugin.install();this.Vd=h.images||{};this.W=h.lib;for(var g=0,h=this.W.properties.manifest.length,k;g<h;++g)k=e+this.W.properties.manifest[g].src,this.W.properties.manifest[g].src=k;this.jc=new createjs.LoadQueue(!0);
this.jc.installPlugin(createjs.Sound);this.jc.addEventListener("fileload",this.Ho.bind(this));this.jc.addEventListener("complete",this.qj.bind(this));this.W.properties.manifest&&0<this.W.properties.manifest.length?(this.Ro(this.W.properties.manifest),this.jc.loadManifest(this.W.properties.manifest)):this.qj(this)},Ho:function(c){"image"==c.item.type&&(this.Vd[c.item.id]=c.result);this.ua("assetsLoading",{type:"assetsLoading",sender:this,Fd:c})},qj:function(d){this.ua("assetsLoaded",{type:"assetsLoaded",
sender:this,Fd:d});if(this.W[this.name]&&"function"==typeof this.W[this.name]){this.Rg=new this.W[this.name];this.Cb=new createjs.Stage(this.canvas);createjs.Touch.enable(this.Cb);this.Cb.addChild(this.Rg);var e=this;this.ye=function(c){15<createjs.Ticker.getMeasuredFPS(2)&&e.Cb.update(c)};createjs.Ticker.addEventListener("tick",this.ye);createjs.Ticker.setFPS(this.W.properties.fps);this.Da=this.Rg.mc_animPrincipale;e=this;this.Cf=this.Da.Ve&&this.W.Dp&&this.Da.Ve instanceof this.W.Dp?this.Da.Ve:
null;this.tf=this.Da.Zk&&this.W.Cp&&this.Da.Zk instanceof this.W.Cp?this.Da.Zk:null;window.require("beevirtua.ui.core.UiObject");this.Cf&&this.Cf.ih&&this.Cf.ih.addEventListener("click",this.Zo.bind(this));this.tf&&this.tf.ih&&this.tf.ih.addEventListener("click",this.So.bind(this));c.Vm&&(this.Da.nx=!0,this.canvas.cssText="image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:optimize-contrast;image-rendering:crisp-edges;image-rendering:pixelated",
this.canvas.style.zx=!0,this.canvas.width=this.W.properties.width,this.canvas.height=this.W.properties.height,this.canvas.style.width="100%",this.canvas.style.height="100%");this.ua("ready",{type:"ready",sender:this})}else this.ua("error",{type:"error",sender:this,message:this.W[name]?"CreateJSAnimation.FromManifest.intrernalEvent.handleComplete: \r\n\r\n"+c.Em:"CreateJSAnimation.FromManifest.intrernalEvent.handleComplete: \r\n\r\n"+c.Fm+" (searched animation: "+name+")"})},Ro:function(c){this.Ma=
[];for(var f=0,g=c.length;f<g;++f)".mp3"===e.zq(c[f].src)&&this.Ma.push(c[f].id)},Zo:function(){this.ua("skipButtonClicked",{type:"skipButtonClicked",sender:this})},So:function(){this.ua("replayButtonClicked",{type:"replayButtonClicked",sender:this})},fk:function(c,f,g){if(c&&f){this.name=f;var h=this;this.Mf=e.M({url:c,gb:{load:function(c){h._animScriptLoaded(c,g)}},responseType:"text"})}},ox:function(){this.fk(this.url,this.name,this.dk)},Gv:function(){this.Mf&&this.Mf.abort();this.jc?this.jc.close():
console.log("pas encore pret")}},{Jm:function(d,e,g){var h=new c;h.fk(d,e,g);return h},D:function(d,e,g){var h=new c;h.url=d;h.name=e;h.dk=g;return h},Hm:"endAnim",Fm:"animation non trouv\u00c3\u00a9e.",Em:"l'animation n'est pas une fonction.",Vm:!1});JSF.Fb.a("bee.ui.animation",{Xu:c});window.a("bee.ui.animation.CreateJSAnimation",c)})();(function(){var e=JSF.o(window.require("beevirtua.ui.book.layer.component.LayerObject"),function b(){b.i.constructor.call(this,document.createElement("div"));this.addClass("jsf-ui","FaceDecorator");var d=window.require("beevirtua.event.BookManager"),e=d.h(),g=window.require("beevirtua.context.PerformanceManager").h(),h=this;this.Ca(e,d.f.uc,function(b){var d=g.Ic(),e=h.target;e&&d.Rk&&(1<b[1]?h.Y():e&&h.show())})},{type:{value:"FaceDecorator",enumerable:!0,writable:!1},update:function(){this.ra(this.g.u.width,
this.g.u.height);this.target.style.position="absolute";this.setPosition(0,0)}},{type:{value:"Layer",writable:!1}});window.a("beevirtua.ui.book.layer.component.FaceDecorator",e)})();(function(){function e(c,b,d,e,g,h,k){this.xb=c;this.Im=b;this.qf=d;this.K=e;this.context=g;this.Fc=h;this.tc=k;this.rd={};this.of=[]}e.prototype.Rc=function(){this.of.push({Uj:new Date});this.Fe()};e.prototype.Jc=function(c){var b=new Date((new Date).getTime()-1E3*c);return this.of.filter(function(c){return c.Uj>b}).length/c};e.prototype.xq=function(c){var b=this.xb,d=this.rd,e=this.qf.Ic(),g=this.Jc(e.qm),h=this;this.Fe();return function(c){return b.Yg(c).then(function(b){d[c]||(b=h.Jn(c,b),g>e.tm?
b.Pt():b.cm(),d[c]=b);d[c].qh=!1;return d[c]})}(c)};e.prototype.Jn=function(c,b){var d=this.Im,e=this.K,g=this.context,h=this.Fc,k=this.tc,m=b.yb(this.qf.Ic());return new d(c,b.Ka(),m,b.wk(),b.Hk(),e,g,h,k)};e.prototype.hq=function(c){var b=this.rd,d;for(d in b){var e=b[d];c(e,e.Ka(),d)}};e.prototype.Fe=function(){clearTimeout(this.gf);clearTimeout(this.Re)};e.prototype.zb=function(c,b){this.ea=c;var d=this.qf.Ic();this.Fe();b||(this.gf=setTimeout(this.Xo(),d.gf),this.gh=setTimeout(this.Wo(),d.gh),
this.Re=setTimeout(this.$m(),d.Re),this.Bn())};e.prototype.gj=function(){var c=this.rd,b=this.ea,d=[];c[b-1]&&d.push(c[b-1]);c[b]&&d.push(c[b]);return d};e.prototype.Xo=function(){var c=this.gj();return function(){var b=window.require("beevirtua.ui.book.layer.component.FaceDecorator");c.forEach(function(c){_.forEach(_.filter(c.Mg,function(c){return c.constructor==b}),function(b){b.Y()});c.cm();c.uf()})}};e.prototype.Wo=function(){var c=this.gj();return function(){var b=window.require("beevirtua.ui.book.layer.component.FaceDecorator");
c.forEach(function(c){_.forEach(_.filter(c.Mg,function(c){return c.constructor==b}),function(b){b.target&&b.Y()});c.Mt();c.uf()})}};e.prototype.$m=function(){function c(b,c){var d=[],e;for(e in b)d.push({index:e,Tg:b[e]});var d=d.sort(function(b,d){return Math.abs(b.index-c)>Math.abs(d.index-c)?1:-1}),m=0,n="";d.forEach(function(c){c.Tg.qh&&!c.Tg.Ye?(setTimeout(function(){c.Tg.destroy()},0),delete b[c.index],m++):n+=c.index+"-"});console.log("GarbageCollector - Left in cache : ",d.length-m,"layers (deleted",
m,", kept",n,")")}var b=this.rd,d=this.ea;return function(){c(b,d)}};e.prototype.destroy=function(){this.Fe();this.hq(function(c){c.destroy()});this.rd={}};e.prototype.Bn=function(){var c=this.of,b=new Date((new Date).getTime()-3E4);this.of=c=c.filter(function(c){return c.Uj>b})};window.a("beevirtua.ui.book.layer.control.FaceLayerStrategy",e)})(JSF);(function(e,c){function b(b,c){this.face=b;this.ns=c}var d=c("beevirtua.data.utility.Http"),f=c("beevirtua.context.Hash"),g=new d;new f;var h=window.device||{desktop:function(){return!0}};b.prototype.Wq=function(){var b=this.face;return[b.P,b.l.nc.path].join("/")};b.prototype.Ka=function(){return this.face.B};b.prototype.yb=function(b){var c=this.face,d=this.ns,e=c.P,f=[],p={type:"FaceBackground",data:{url:[e,c.l.full.path].join("/"),Hd:[e,c.l.full.path].join("/"),Ld:[e,c.l.nc.path].join("/"),u:c.B}},
r=!1;if(c.l.U||c.l.Wa){var u;!c.jq&&h.desktop()&&b.Te?c.l.Wa?(u=c.l.Wa,p=c.l.U,r=!0):p=c.l.U:p=c.l.U;c.l.U.P=[e,p.path,""].join("/");c.l.U.qd=c.id;u&&(c.l.Wa.P=[e,u.path,""].join("/"),c.l.Wa.qd=c.id);f.push({type:"FaceTiledBackground",data:{qd:c.id,u:{width:~~c.B.width,height:~~c.B.height},P:[e,u?u.path:p.path,""].join("/"),kc:u?u.kc:p.kc,qb:u?u.qb:p.qb,ec:"."+(u?u.ec:p.ec)}})}else f.push(p);if(b.Te&&c.content&&c.content.pb){var t=[];_.forEach(c.content.pb.css,function(b){t.push([e,"..",b].join("/"))});
f.push({type:"TextLayer",data:{u:c.B,height:c.content.pb.height,width:c.content.pb.width,path:[e,c.content.pb.html||c.content.pb.path].join("/"),Lg:t,Pk:!r,Cq:function(b){return g.get(b)}}})}var w={Animation:function(b,c,d){return{type:"AnimationLayer",data:{Be:b,Ce:{width:c.B.width,height:c.B.height,fileName:c.fileName},P:d}}},Video:function(b,c,d){return{type:"VideoPlayer",data:{Od:b,md:c,P:d}}},Sound:function(b,c,d){return{type:"AudioPlayer",data:{kd:b,md:c,P:d}}}};c.hf.forEach(function(b){var c=
d.find(function(c){return c.id===b.ul}),e=c.P;(c=w[c.type]&&w[c.type](b,c,e))&&f.push(c)});c.xi.forEach(function(b){b=c.l.U?{type:"HotZoneLayer",data:{Bm:b,u:{width:~~c.B.width,height:~~c.B.height},U:c.l.U,Wa:c.l.Wa,qd:c.id}}:void 0;b&&f.push(b)});c.Sg.forEach(function(b){f.push({type:"ExternalLinkLayer",data:{Ah:b,u:{width:~~c.B.width,height:~~c.B.height}}})});c.kh.forEach(function(b){f.push({type:"InternalLinkLayer",data:{Ah:b,u:{width:~~c.B.width,height:~~c.B.height}}})});f.push({type:"FaceDecorator",
data:{$l:!0,u:c.B}});b=[e,c.l.nc.path].join("/");return[{type:"FaceBackground",data:{url:b,Hd:b,Ld:b,u:c.B}}].concat(f)};b.prototype.Hk=function(){var b=this.face,c=[b.P,b.l.nc.path].join("/");return[{type:"FaceLoading",data:{u:b.B}},{type:"FaceBackground",data:{url:c,Hd:c,Ld:c,u:b.B}}]};b.prototype.wk=function(){var b=this.face,c=b.P;return[{type:"FaceLoading",data:{u:b.B}},{type:"FaceBackground",data:{url:[c,b.l.full.path].join("/"),Hd:[c,b.l.vl.path].join("/"),Ld:[c,b.l.nc.path].join("/"),u:b.B}},
{type:"FaceDecorator",data:{$l:!0,u:b.B}}]};e("beevirtua.data.cooked.Face",b)})(window.a,window.require);(function(e){function c(b){this.face=b}c.prototype.Ka=function(){return this.face.B};c.prototype.Hk=function(){return this.Vf()};c.prototype.wk=function(){return this.Vf()};c.prototype.yb=function(){return this.Vf()};c.prototype.Vf=function(){var b=this.face;return[{type:"FaceLoading",data:{u:b.B}},{type:"FaceDecorator",data:{$l:!0,u:b.B}}]};e("beevirtua.data.cooked.EmptyFace",c)})(window.a);(function(e){function c(){}c.prototype.Ws=function(b,c){return _.isEmpty(c)?b.map(function(b){return{face:b,isEmpty:!1}}):this.ep(this.Oo(this.Uo(b,c)))};c.prototype.Uo=function(b,c){return c.map(function(c){return b.reduce(function(b,d,e){_.includes(c.face,d.id)&&(b[e]=d);return b},{})})};c.prototype.Oo=function(b){return _.flatten(b.map(function(b){return _.reduce(_.reduce(b,function(c,e,h){h=parseInt(h);var k;k=0===h%2?h+1:h-1;c[h]={face:e,isEmpty:!1};c[k]={face:b[k]||e,isEmpty:b[k]?!1:!0};return c},
{}),function(b,c){b.push(c);return b},[])}))};c.prototype.ep=function(b){return b.reduce(function(c,e,g){var h=e.isEmpty;e.hl||(h?(g=b[g+1])&&g.isEmpty?(e.hl=!0,g.hl=!0):c.push(e):c.push(e));return c},[])};e("beevirtua.data.cooked.LangRecomposer",c)})(window.a);(function(e,c){function b(b,c,d,e,f){this.lang=b;this.yp=c;this.K=d;this.Wh=e;this.Vl=f;this.Id=new g}var d=c("beevirtua.data.cooked.Face"),f=c("beevirtua.data.cooked.EmptyFace"),g=c("beevirtua.data.cooked.LangRecomposer");b.prototype.Iu=function(b){this.Wh=b};b.prototype.Ju=function(b){this.Vl=b};b.prototype.Zg=function(){var b=this.lang,c=this.Id,e=b.face,g=b.media,q=b.xf,l=b.Db,p;q&&0<q.length?p=this.Rq(q):l&&l.items&&0<l.items.length&&(p=this.Bk(l));c=c.Ws(e,p);l&&l.gc&&0<l.gc.length&&(this.gc=
_.map(l.gc,function(b){return _.find(this.lang.face,function(c){if(c.id===b)return c})}.bind(this)));var r="monoplan"===b.cb,e=_.reduce(c,function(b,c){c.isEmpty&&!r?this.gc&&0<this.gc.length?b.push(new d(_.sample(this.gc))):b.push(new f(c.face)):c.isEmpty||(b.push(new d(c.face,g)),r&&b.push(new f(c.face)));return b}.bind(this),[]);1!=e.length%2||r||e.push(new f(_.last(c).face));return e};b.prototype.Rq=function(b){var c=this.Wh;return _.reduce(b,function(b,d,e){(!c||d.required||c&&"1"===c[e])&&b.push(d);
return b},[])};b.prototype.Bk=function(b){var c=[],d=this.lang.face,e=this.Vl;if((this.ui=b)&&e){var f=b.items.map(function(b,c){b.priority=e[c];return b});f.sort(function(b,c){return parseInt(c.priority,10)-parseInt(b.priority,10)});e&&(c=[{label:"firstFace",required:!0,face:[d[0].id]}].concat(f).concat([{label:"mandatoryFaces",required:!0,face:b.hs}]).concat([{label:"lastFace",required:!0,face:[d[d.length-1].id]}]))}return c};b.prototype.Jq=function(b){var c=this.lang,d=this.yp,e=this.K,f=c.pf?
c.P+c.pf.path:"",g={enabled:!0,id:"pdf",classes:["icon-download"],label:b.T("downloadPdf")};f?g.action={click:function(){window.open(this.Os,"pdfDownload");e.V("closeMenu")}.bind({Os:f})}:g.enabled=!1;f=c.Ne?c.P+c.Ne.path:"";c={enabled:!0,id:"epub",classes:["icon-download"],label:b.T("downloadEpub")};f?c.action={href:f}:c.enabled=!1;d=_.reduce(d.version,function(b,c){var d=c.id,f="";return b.concat(_.map(c.lang,function(b){f=b.id.toLowerCase();f=f.substr(0,2);return{enabled:!0,id:f,label:locales[f][1],
bulletTxt:f,classes:["menu-level__with-bullet"],action:{click:function(){e.V("closeMenu");e.V("selectLang",this.Nu,this.Tr)}.bind({Nu:d,Tr:f})}}}))},[]);d={enabled:1<d.length,label:b.T("languages"),id:"lang",classes:["icon-earth"],children:d};return{enabled:!0,label:b.T("menu"),classes:["icon-menu"],root:!0,children:[g,c,d,{enabled:!0,label:b.T("contact"),classes:["icon-phone"],children:[{enabled:!0,label:b.T("contactEmail"),classes:["icon-mail"],action:{href:"mailto:"+b.T("contactEmail")+"?Subject="+
encodeURIComponent(b.T("contactSubject")),target:"_top"}},{enabled:!0,label:b.T("beeBuzzinessPhoneNumber"),classes:["icon-phone"],action:{href:"tel:"+b.T("beeBuzzinessPhoneNumberLink")}}]},{enabled:!0,label:b.T("displayHideHeader"),classes:["icon-fullScreen"],action:{click:function(){e.V("closeMenu");e.V("toggleFullPage")}}},{enabled:this.wr(),label:b.T("chooseUnivers"),classes:["icon-earth"],action:{click:function(){e.V("closeMenu");e.V("openUniverse")}}}]}};b.prototype.Ak=function(){var b=this.lang,
c=this.Wh,e=b.face,f=b.media;return b.xf.map(function(b,g){var h=b.face[0],r,u=!1,t=!1;_.forEach(e,function(b){b.id==h&&(u=b,r=_.map(b.hf,function(b){return _.find(f,function(c){return c.id==b.ul})}),u=new d(u,r))});u&&(t=u.Wq());return{label:b.label,required:b.required,Xk:!b.required&&c?"1"===c[g]:!0,face:b.face,vs:b.face.length,Ld:t}})};b.prototype.vr=function(){var b=this.lang;return b.xf&&0<b.xf.length};b.prototype.gr=function(){var b=this.ui,c=this.lang;b||(b=this.ui=this.Bk(c.ui));return b.items};
b.prototype.wr=function(){var b=this.lang;return b.Db&&0<b.Db.items.length};e("beevirtua.data.cooked.Lang",b)})(window.a,window.require);(function(){function e(c,b,d,e,g,h,k){this.Ra=c;this.jk=b;this.Fc=d;this.cb=e;this.Wj=g;this.mf=h;this.K=k}e.prototype.Yk=function(){var c,b,d;c=this.Wj;b=c.mobile()?c=5:c.tablet()?c=15:c=20;this.xd=d=(d=document.querySelector(".header"))?d.clientHeight:40;this.paddingTop=c;this.paddingBottom=b;this.po=c;this.oo=b;this.ao=d};e.prototype.du=function(){this.paddingBottom=this.paddingTop=10;this.xd=0;this.mf()};e.prototype.yh=function(){this.paddingTop=this.po;this.paddingBottom=this.oo;this.xd=this.ao;
this.mf()};e.prototype.resize=function(c,b){var d=this.cb,e=this.Wj,g=this.xd+this.paddingTop,h=this.paddingBottom,k=this.K,m=this.Fn(g+h,b);this.jp(m.Ga,m.X,g,h);d=e.portrait()?this.Wn(m,c.Ka()):this.Vn(d,m,c.Ka());k.V("bookResize");return d};e.prototype.Fn=function(c,b){var d=this.jk,d={Ga:d.clientWidth,X:d.clientHeight},d={X:d.X-c,Ga:d.Ga};d.X=d.X<b?b:d.X;return d};e.prototype.zj=function(c,b,d){return c.X/b.height*b.width*d};e.prototype.yj=function(c,b,d,e){c>b.Ga?(c=d.height/(d.width*e/b.Ga),
b={X:c,Ga:b.Ga,top:(b.X-c)/2}):b.top=0;this.kp(b.top);return b};e.prototype.Wn=function(c,b){var d=this.zj(c,b,1),e=this.cb;return{Sc:this.yj(d,c,b,1),Le:e.Ab()?!1:2*d>=c.Ga}};e.prototype.Vn=function(c,b,d){c=c.wq();return{Sc:this.yj(this.zj(b,d,c),b,d,c),Le:!1}};e.prototype.jp=function(c,b,d,e){this.Ra.Eb=c;this.Ra.qc=b;this.Ra.Qu=d;this.Ra.Pu=e};e.prototype.kp=function(c){this.Ra.yx=c};e.prototype.Tt=function(c,b,d){return this.cb.Ut(c,c.X/b.height*b.width,c.X/d.height*d.width)};e.prototype.ir=
function(){var c=this.jk;return{width:c.clientWidth,height:c.clientHeight}};window.a("beevirtua.ui.book.display.BookResize",e)})(JSF);(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this);this.Kb={}},{Wb:-1,Xb:-1,ij:!1,vm:function(b,d){d.oh?this.Wb=b:this.Wb===b&&(this.Wb=-1);d.We?this.Xb=b:this.Xb===b&&(this.Xb=-1);this.Kb[b]=d;this.Wb!=b&&this.Xb!=b||2!==this.Xb-this.Wb&&-1!=this.Wb&&-1!=this.Xb||(this.ij=!0,this.ua(e.f.Pd))},Aq:function(){var b=this;return new Promise(function(d){if(b.ij)d();else{var f=function(){b.$(e.f.Pd,f);d()};b.on(e.f.Pd,f)}})},$g:function(b){return this.Kb[0===
b%2?b:b-1]},bx:function(b){delete this.Kb[b]},gw:function(){return this.Kb[this.Wb]},hw:function(){return this.Kb[this.Xb]},um:function(b,d){this.Kb[b]&&this.Kb[b].Et(d)},destroy:function(){this.Kb={}}},{f:{Pd:"CurrentPageUpdated"},s:null,h:function(){e.s||(e.s=new e);return e.s}});window.a("beevirtua.data.cooked.PageRegistry",e)})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this);this.Wc=[]},{Wc:null,Ol:function(b,d,e){b={node:b,position:d,$k:e,u:this.Hn(b)};this.Wc.push(b)},Hn:function(b){var d=b.style.display,e,g;b.style.display="block";e=b.clientWidth;g=b.clientHeight;b.style.display=d;return{width:e,height:g}},$s:function(b){for(var d=this.Wc,e=0;e<d.length;e++){var g=d[e],h=g.node,k=g.u.width,m=g.u.height,n=g.position,g=g.$k,q=n.padding?n.padding:0,l=n.oi?
n.oi:0,p=0,r=0;"right"==n.Ug?r=b.left+b.width+q:"left"==n.Ug&&(r=b.left-k-q);p=b.top+l*b.height-m/2;g()?h.className=-1==h.className.indexOf("active")?h.className+" active":h.className:h.className=h.className.replace(/active/g,"");h.style.left=r+"px";h.style.top=p+"px"}},Ot:function(){for(var b=this.Wc,d=0;d<b.length;d++){var e=b[d],g=e.node,e=e.$k;e()?g.className=-1==g.className.indexOf("active")?g.className+" active":g.className:g.className=g.className.replace(/active/g,"")}},destroy:function(){this.Wc=
[]}},{s:null,h:function(){e.s||(e.s=new e);return e.s}});window.a("beevirtua.ui.book.display.LayoutManager",e)})();(function(){var e=JSF.o(window.require("beevirtua.core.FrameworkObject"),function b(){b.i.constructor.call(this)},{Bt:function(b){this.navigation=this.navigation?this.navigation:b},Dt:function(b){this.Gd=this.Gd?this.Gd:b},yt:function(b){this.xb=this.xb?this.xb:b},Z:{get:function(){var b=this.Gd,d=this.navigation.ea;return[b.$g(d-2),b.$g(d)]}},$b:-1,cc:-1,orientation:null,Rl:null,Eb:0,qc:0,rc:1,update:function(b){this.cn=b},get:function(){return this.cn},Mc:function(b){var d=this.$b;return b===d||
b===d-1},jw:function(){var b=[];if(this.Rl==e.Mm)for(var d=0;d<this.Z.length;d++)this.Z[d]&&this.Z[d].We&&b.push(this.Z[d].Sa);else if(this.Rl==e.Lm)for(d=0;d<this.Z.length;d++)this.Z[d]&&(this.Z[d]&&this.Z[d].oh&&b.push(Math.max(this.Z[d].ub,this.Z[d].Sa)),this.Z[d]&&this.Z[d].We&&b.push(Math.min(this.Z[d].ub,this.Z[d].Sa)));return b}},{Ed:{wi:"vertical",jh:"horizontal"},Mm:"monoplan",Lm:"biplan",s:null,h:function(){e.s||(e.s=new e);return e.s}});JSF.Fb.a("JSF.managers",{Vu:e});window.a("beevirtua.ui.book.BookContext",
e)})();(function(){window.require("beevirtua.event.BookManager");var e=window.require("beevirtua.context.PerformanceManager").h(),c=JSF.o(window.require("beevirtua.core.FrameworkObject"),function d(c,e,h,k,m){d.i.constructor.call(this);this.navigation=c;this.Sa=e;this.ub=h;m&&(this.lq=k.Ka());m&&(this.vp=m.Ka())},{Sa:-1,ub:-1,lq:null,vp:null,oh:{get:function(){return this.ub===this.navigation.ea-1}},We:{get:function(){return this.Sa===this.navigation.ea}},Lr:{get:function(){return this.ub===this.navigation.Oc-
1}},isFirst:{get:function(){return this.Sa===this.navigation.Cd}},uh:{get:function(){return this.Sa>=this.navigation.ea}},fl:{get:function(){return this.Sa<this.navigation.ea}},Th:{get:function(){return this.uh?this.gk:this.wp}},tj:function(c,e){return c&&c.height===e.height&&c.left===e.left?c:e},gk:{get:function(){return this.tj(this.Cn,c.Ei)}},wp:{get:function(){return this.tj(this.Ym,c.Di)}},Et:function(c){this.uh?this.Cn=c:this.Ym=c},dr:function(){return e.Ic().Cl}},{ev:null,Ei:null,Di:null});
window.a("beevirtua.data.cooked.PageInfo",c)})();(function(e){function c(b){this.Va=b}c.prototype.Fk=function(){return this.Va.Nf+"theme/"+this.Va.mc.id+"/"};c.prototype.Vq=function(){var b=this.Va.mc;return this.Va.Nf+"theme/"+b.id+"/"+b.xp};e("beevirtua.data.cooked.Motor",c)})(window.a);(function(e){function c(){this.Oe={}}c.prototype.on=function(b,c,e){var g=this.Oe[b]||[];e&&(g=[]);g.push(c);this.Oe[b]=g};c.prototype.kf=function(b){this.Oe[b]=void 0};c.prototype.V=function(b){var c=_.slice(arguments,1);(this.Oe[b]||[]).forEach(function(b){b.apply(b,c)})};e("beevirtua.event.EventHub",c)})(window.a);(function(e){function c(){this.Nb={};this.data={}}c.prototype.watch=function(b,c,e){e=e?[]:this.Nb[b]||[];e.push(c);this.Nb[b]=e;c(this.data[b])};c.prototype.set=function(b,c){this.data[b]=c;(this.Nb[b]||[]).forEach(function(b){b(c)})};e("beevirtua.event.ValueWatcher",c)})(window.a);(function(e){function c(b,c){var d=p.Rj;if(0===d){if(b.direction==Hammer.DIRECTION_LEFT)return!0;if(b.direction!=Hammer.DIRECTION_RIGHT)return b.center.x>c.Eb/2}else if(1===d){if(b.direction==Hammer.DIRECTION_RIGHT)return!0;if(b.direction!=Hammer.DIRECTION_LEFT)return b.center.x<c.Eb/2}return!1}var b=window.require("beevirtua.ui.book.BookContainer").h(),d=window.require("beevirtua.ui.book.display.ViewportLayout"),f=require("beevirtua.event.BookManager"),g=f.h(),h=!1,k,m,n;n="transition"in document.createElement("div").style?
"transition":"webkitTransition";var q=window.require("beevirtua.ui.book.BookContext").h(),l=_.debounce(function(){d.mb();d.pc()},1E3),p=e.o(window.require("beevirtua.core.FrameworkObject"),!1,!1,{hk:!1,Vg:!1,xt:function(b){q.cc=b;p.Rj=b;p.Le(q,b)},Le:function(b,c){l();var e=b.Z[c]||b.Z[1]||b.Z[0],g=(b.Eb-e.Th.width)/b.Eb/2,f=0,k=1;e&&e.Th&&(0===c?(f=-.5+g,k=.5+g):1===c&&(f=.5-g,k=1.5-g));d.Yb();d.Wl({top:0,bottom:1,left:f,right:k});d.Kd({top:0,bottom:1,left:f,right:k})},Mb:function(e,l,t){var w=b.vc,
x=d.Hc(),x=x.bottom-x.top;if(window.D)return!0;if(window.device.mobile()){p.hk||(document.addEventListener("webkitfullscreenchange",function(){var b=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.body.className=document.body.className.replace(/(^|\s)fullscreen(\s|$)/,"$1");b?document.body.className+=" fullscreen":p.Vg=!1}),p.hk=!0);if(!p.Vg&&"pandown"===l.type&&100<l.deltaY&&150>l.deltaY)return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||
(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(l)),p.Vg=!0,!1;if("pandown"===l.type||"panup"===l.type)return!1}var A=p.Rj;if(1<t.navigation.ah())t.navigation.Ze()?q.navigation.bb.jb.Bf():t.navigation.$e()&&q.navigation.bb.jb.Af();else if(!t.navigation.Ze()&&!t.navigation.$e()&&
1===x&&0<=A){if("panstart"===e&&c(l,t))return d.mb(),h=!0,k=d.Hc(),m||(m=w.style[n]),!1;if("panmove"===e&&h)return e=l.deltaX/screen.width*2,d.Kd({top:k.top,bottom:k.bottom,left:k.left-e,right:k.right-e}),!1;if("panend"===e&&h)return h=!1,0===A&&0>l.deltaX?(g.dispatchEvent(f.f.Gb,q.$b,{$h:!0,Pb:!1}),q.navigation.bb.jb.Bf()):1===A&&0<l.deltaX&&(g.dispatchEvent(f.f.Gb,q.$b,{$h:!0,Pb:!0}),q.navigation.bb.jb.Af()),!1}return!0}});window.a("beevirtua.ui.book.behavior.PageMode",p);window.require("beevirtua.event.BookEventAggregator").lc("pageMode",
"panstart panmove panend resize relayout pandown panup".split(" "),p)})(JSF);(function(e){function c(b,c){g.dispatchEvent(f.f.Mi);var d;d=Math.min(.5,.05/1.8);var e=h.Hc(),k=b.x/document.body.clientWidth,m=b.y/document.body.clientHeight,l=Math.min(1.15,Math.max(d,(e.right-e.left)*c));d=Math.min(1.15,Math.max(d,(e.bottom-e.top)*c));d=1.15==d?1:d;m*=e.bottom-e.top-d;e.left+=(e.bottom-e.top-d)*k;e.top+=m;e.bottom=e.top+d;e.right=e.left+(1.15==l?1:l);h.Kd(h.De(e))}function b(b,c,d){g.dispatchEvent(f.f.Hi);var e=h.Hc();b=b/(d.Eb/(e.right-e.left));c=c/(d.qc/(e.bottom-e.top));e.top=
n.top-c;e.bottom=n.bottom-c;e.left=n.left-b;e.right=n.right-b;h.Kd(h.De(e))}function d(){window.D=!0;clearTimeout(p);p=setTimeout(function(){window.D=!1},500)}var f=window.require("beevirtua.event.BookManager"),g=f.h();window.require("beevirtua.ui.book.BookContext");var h=window.require("beevirtua.ui.book.display.ViewportLayout"),k,m,n,q,l;_.debounce(function(){h.pc()},550);var p;e=e.o(window.require("beevirtua.core.FrameworkObject"),!1,!1,{Mb:function(e,f,p){var w=document.querySelector(".book-container"),
x=h.Hc();if(0!=p.navigation.ah())return!0;if("relayout"===e&&null===k&&1===x.bottom-x.top)w.getBoundingClientRect(),k=w.getBoundingClientRect().top;else{if("wheel"===e||"pinchstart"===e||"pinchend"===e||"pinchmove"===e||"doubletap"===e)return d(),"pinchstart"===e?m=1/(x.right-x.left):"pinchend"!==e&&("pinchmove"===e?c(f.center,1/(f.scale*(x.right-x.left)*m)):"doubletap"===e?(h.Ba.Yb(),1===x.bottom-x.top?c(f.center,.5):(-1===p.cc&&h.Wl({top:0,bottom:1,left:0,right:1}),c(f.center,h.Ba.He)),clearTimeout(l),
l=setTimeout(function(){h.Ba.mb();h.pc();h.Ba.Yb()},650)):(window.device.Jr()?h.mb():h.Yb(),clearTimeout(l),c({x:f.clientX?f.clientX:f.Fd.clientX,y:f.clientY?f.clientY:f.Fd.clientY},(p.qc+(0===f.deltaMode?f.deltaY:40*f.deltaY))/p.qc),l=setTimeout(function(){h.mb();h.pc()},600),clearTimeout(q),q=setTimeout(function(){h.Yb()},650))),x=h.Hc(),1===x.bottom-x.top&&(0===p.cc&&.3<x.left?g.dispatchEvent("RequestNextPage"):1===p.cc&&.7>x.right?g.dispatchEvent("RequestPreviousPage"):g.dispatchEvent("Relayout")),
!1;if(.75>x.bottom-x.top)return"panstart"===e?(h.Ba.mb(),h.hm(),n=JSON.parse(JSON.stringify(x))):"panmove"===e?(h.Ba.mb(),b(f.deltaX,f.deltaY,p)):"panend"===e&&(h.zt(10*-f.velocityX,10*-f.velocityY),clearTimeout(l),l=setTimeout(function(){h.Ba.mb();h.pc()},650)),!1;1>x.bottom-x.top&&h.Kd(h.De({left:0,top:0,right:1,bottom:1}))}return!0}});window.a("beevirtua.ui.book.behavior.BookZoom",e);window.require("beevirtua.event.BookEventAggregator").lc("bookZoom","wheel panstart panmove panend pinchstart pinchmove pinchend doubletap mousedown touchstart relayout".split(" "),
e)})(JSF);(function(e){var c=window.require("beevirtua.ui.book.BookContext"),b=e.o(window.require("beevirtua.core.FrameworkObject"),function f(){f.i.constructor.call(this,null)},{Ge:null,Gn:function(b,e){if(e.orientation==c.Ed.jh){switch(b.direction){case Hammer.DIRECTION_RIGHT:return"L";case Hammer.DIRECTION_LEFT:return"R"}return b.center.x<e.Eb/2?"L":"R"}if(e.orientation==c.Ed.wi){switch(b.direction){case Hammer.DIRECTION_DOWN:return"L";case Hammer.DIRECTION_UP:return"R"}return b.center.y<e.qc/2?"L":"R"}},
Mb:function(b,c,e){if(window.D)return!0;var k=e.navigation;if("panstart"==b)switch(this.Gn(c,e)){case "L":k.ls(c);break;case "R":k.js(c)}else"panmove"==b?k.Gu(c):"panend"==b&&k.bq(c);return!0}},{s:null,h:function(){b.s||(b.s=new b);return b.s}});window.a("beevirtua.ui.book.behavior.PageTurn",b);window.require("beevirtua.event.BookEventAggregator").lc("pageTurn",["panstart","panmove","panend"],b.h())})(JSF);(function(e){function c(b){var e=/(^|\s)t(\s|$)/.test(b.className),g=/(^|\s)TextLayer(\s|$)/.test(b.className),h=e;e||g||!b.parentElement||(h=c(b.parentElement));return h}function b(b,c,e,h){this.nt=c&&!c.windows()?91:17;this.pm=new b;this.context=e;this.Tb=h;this.ld=h.h();this.ni=this.ei=this.nf=!1;this.vf=this.ef=!0;this.Pl()}b.prototype.Zt=function(){this.gi=!0};b.prototype.Pl=function(){this.gi=!1};b.prototype.Vp=function(){this.ld.dispatchEvent(this.Tb.f.Ci,{left:this.ef,right:this.vf})};b.prototype.Og=
function(){this.ld.dispatchEvent(this.Tb.f.Fi)};b.prototype.destroy=function(){var b=this.Tb,c=b.h();c.$(b.f.Vc,this.Fl.bind(this));c.$(b.f.Qd,this.Ee.bind(this));c.$(b.f.Uc,this.Ee.bind(this));c.$(b.f.Gb,this.zb.bind(this));c.$(b.f.If,this.Kk.bind(this));c.$(b.f.Jf,this.Nk.bind(this));window.removeEventListener("keydown",this.Lk.bind(this));window.removeEventListener("keyup",this.Mk.bind(this))};b.prototype.Lk=function(b){var c=this.ei;b.keyCode!==this.nt||c||(this.ei=!0,this.Zt(),this.Vp())};b.prototype.Mk=
function(){var b=""===this.Ek();this.ei=!1;this.Pl();b&&this.Og()};b.prototype.Ee=function(){this.nf=!1};b.prototype.Fl=function(){this.Nj();this.Og();this.nf=!0};b.prototype.zb=function(b){var c=b[2].Pb;b[2].$h&&(this.ef=c,this.vf=!c)};b.prototype.Kk=function(b){this.ef=b=b[1].Pb;this.vf=!b};b.prototype.Nk=function(){this.vf=this.ef=!0};b.prototype.Fr=function(b){var c=this.Tb,e=this.ld;e.on(c.f.Qd,this.Ee.bind(this));e.on(c.f.Uc,this.Ee.bind(this));e.on(c.f.Vc,this.Fl.bind(this));e.on(c.f.Gb,this.zb.bind(this));
e.on(c.f.If,this.Kk.bind(this));e.on(c.f.Jf,this.Nk.bind(this));b.lc("textSelect","tap panstart panmove panend mousedown mouseup mousemove touchstart keyup keydown".split(" "),this);window.addEventListener("keydown",this.Lk.bind(this));window.addEventListener("keyup",this.Mk.bind(this))};b.prototype.dm=function(b){var c=this.pm,e=this.context.hb,h=e.T("toolTipMessageClick"),e=e.T("toolTipMessage");c.show(b,h,e);this.ni=!0};b.prototype.Ar=function(){this.pm.Y();this.ni=!1};b.prototype.Mb=function(b,
e){var g=this.Ek(),h=this.ni;this.gi||("panstart"===b&&!this.nf&&""===g&&e.target&&c(e.target)?(console.log("panstart"),this.dm(e.center)):"panmove"===b&&!this.nf&&""===g&&h&&this.dm(e.center),"panend"===b&&this.Ar(),"mousedown"===b&&""!==g&&e.preventDefault());"tap"===b&&""!==g&&(this.Nj(),this.Og());return!this.gi};b.prototype.Ek=function(){var b="";window.getSelection?""!=window.getSelection().toString()&&(b=window.getSelection().toString()):document.selection&&(b=document.selection);return b};
b.prototype.Nj=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()};e("beevirtua.ui.book.behavior.TextSelect",b)})(window.a,window.require);var X=angular.module("beevirtua.ui.menu.MenuLevelDirective",[]);function Y(e,c){for(var b=c.split(/\s+/),d=0,f=b.length;d<f;d++)e.className=e.className.replace(new RegExp("(^|\\s+)"+b[d]+"(\\s+|$)")," ")}function Z(e,c){Y(e,c);var b=e.className.split(" ");b.push(c);e.className=b.join(" ")}
X.factory("RecursionHelper",["$compile",function(e){return{compile:function(c,b){angular.isFunction(b)&&(b={post:b});var d=c.contents().remove(),f;return{pre:b&&b.pre?b.pre:null,post:function(c,h){f||(f=e(d));var k=arguments;f(c,function(c){h.append(c);b&&b.post&&setTimeout(function(){b.post.apply(null,k)})})}}}}}]);X.filter("menuItemFilter",function(){return function(e){return e.filter(function(c){return c.enabled})}});
X.directive("beeMenu",["RecursionHelper","$timeout",function(e){var c={scope:{menuItem:"=",level:"="},replace:!0,templateUrl:window.engineUrl+"beevirtua/ui/menu/MenuLevelDirective.html",compile:function(b){return e.compile(b,c.link)},link:function(b,c){function e(){for(var b=window.require("beevirtua.ui.utility.CSS"),f=c[0].parentElement,k=b.fb(f),m=c[0].offsetHeight,n=f.clientHeight,q=document.body.clientHeight;f&&0>f.className.indexOf("menu-level")&&"body"!=f.tagName.toLowerCase();)f=f.parentElement;
f&&(f.scrollTop=0,c[0].style.height=Math.max(m,f.scrollHeight)+"px",b.Ff(c[0],0,k.y,1,n/q))}b.Gl=function(b){b||e()};b.Ts=function(b){setTimeout(function(){b||e()},1)}},controller:["$scope","$rootScope",function(b,c){b.$on("OpenMenu",function(c,d){d==b.menuItem&&(b.Gl(b.menuItem.root),b.open=!0,b.$broadcast("PrepareOpen",b.level),b.$parent.qs=!0)});b.$on("PrepareOpen",function(c,d){d+1===b.level&&b.Gl(b.menuItem.root)});b.closeMenu=function(){b.menuItem.root&&(b.$parent.qs=!1);b.Ts(b.menuItem.root);
b.open=!1;b.$parent.hideCover&&b.$parent.hideCover()};b.Gs=function(c){b.$broadcast("OpenMenu",c)};b.$on("CloseAllMenu",function(){b.closeMenu()});b.getMenuElementClasses=function(c){var d=[];c.children&&0<c.children.length&&d.push("icon-arrow");c.classes&&0<c.classes.length&&c.classes.forEach(function(b){d.push(b)});c.id===b.currentLang&&d.push("menu-level__selected");return d};var e=0;b.getMenuElementAction=function(c,d){d.stopPropagation();var k=new Date;!window.Wk&&50<k-e&&(e=k,c.action&&c.action.click?
c.action.click(d):c.action&&c.action.href?window.location=c.action.href:b.Gs(c))};c.$watch("currentLang",function(){b.currentLang=c.currentLang});c.$watch("versionNumber",function(){b.versionNumber=c.versionNumber});b.nbClicks=0;b.incrementClicks=function(){b.nbClicks++}}]};return c}]);(function(e){e("beevirtua.ui.pod.XmlCommandBuilder",function(){})})(window.a);(function(e){function c(){this.Rt=new b}var b=window.require("beevirtua.data.utility.SOAPCaller");c.prototype.post=function(b,c,e,h){var k=this.Rt,m=null;return m=b?new Promise(function(m,q){k.request({method:c,params:e,url:b,timeout:h||0,yl:function(b){m(b)},lf:function(b){q(Error(b))},xl:function(){q(Error("XHR abort"))},zl:function(){q(Error("XHR timeout"))}})}):Promise.reject(Error("URL Error"))};angular.module("angularSoap",[]).factory("$soap",function(){return new c});e("beevirtua.data.utility.SOAPPromise",
c)})(window.a);(function(e){var c=e("beevirtua.ui.core.UiObject"),b,d;e=angular.module("beevirtua.ui.utility.angular.BeeDirectives",[]);e.directive("beeScrollable",["$parse","$rootScope",function(c){return{restrict:"A",compile:function(e,h){return function(e,g){c(h.beeScrollable)(e)&&(g[0].style.overflowY="auto",g[0].style.overflowX="hidden",g[0].style.WebkitOverflowScrolling="touch",void 0!==window.kb&&document.addEventListener("touchstart",function(){window.kb=!0;clearTimeout(window.Qe);window.Qe=setTimeout(function(){window.kb=
!1},250)}),g[0].addEventListener("scroll",function(){b=!0;clearTimeout(d);d=setTimeout(function(){b=!1},250)}))}}}}]);e.directive("beeClick",["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,k){var m=c(k.beeClick,null,!0);return function(c,e){"a"===e[0].tagName.toLowerCase()&&e[0].setAttribute("href","javascript:");e[0].addEventListener("click",function(e){if(!b){var f=function(){m&&m(c,{$event:e})};d.$$phase?c.$evalAsync(f):c.$apply(f)}})}}}}]);e.directive("beeFastClick",
["$parse","$rootScope",function(b,d){return{restrict:"A",compile:function(e,k){var m=b(k.beeFastClick,null,!0);return function(b,e){"a"===e[0].tagName.toLowerCase()&&e[0].setAttribute("href","javascript:");var f=navigator.userAgent.toLowerCase(),f=-1!=f.indexOf("android")&&!device.windows()&&-1<f.indexOf("mozilla")&&-1<f.indexOf("applewebkit")&&0>f.indexOf("chrome")?"click":c.qk().click;e[0].addEventListener(f,function(c){function e(){m&&m(b,{$event:c})}c.preventDefault();d.$$phase?b.$evalAsync(e):
b.$apply(e)})}}}}]);e.directive("beeRipple",function(){function b(c){var d=c.clientX,e=c.clientY,f=c.changedTouches;f&&0<f.length&&(d=f[0].clientX,e=f[0].clientY);if(d&&e){var n=document.createElement("span");c.currentTarget.appendChild(n);f=Math.max(parseInt(c.currentTarget.clientWidth/2),parseInt(c.currentTarget.clientHeight/2));n.className="ink";n.style.width=f+"px";n.style.height=f+"px";n.style.top=e-c.currentTarget.offsetTop-f/2+"px";n.style.left=d-c.currentTarget.offsetLeft-f/2+"px";Z(n,"animate-ripple");
setTimeout(function(){n.parentElement&&n.parentElement.removeChild(n)},1E3)}}return{restrict:"A",compile:function(){return function(d,e){e[0].addEventListener(c.qk().click,function(c){b(c)})}}}})})(window.require);var locales={aa:["Afar","Afaraf","Afar"],ab:["Abkhaze","\u0410\u04a7\u0441\u0443\u0430","Abkhazian"],ae:["Avestique","Avesta","Avestan"],af:["Afrikaans","Afrikaans","Afrikaans"],ak:["Akan","Akan","Akan"],am:["Amharique","\u12a0\u121b\u122d\u129b","Amharic"],an:["Aragonais","Aragon\u00e9s","Aragonese"],ar:["Arabe","\u202b\u0627\u0644\u0639\u0631\u0628\u064a\u0629","Arabic"],as:["Assamais","\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be","Assamese"],av:["Avar","\u0430\u0432\u0430\u0440 \u043c\u0430\u0446\u04c0 ; \u043c\u0430\u0433\u04c0\u0430\u0440\u0443\u043b \u043c\u0430\u0446\u04c0",
"Avaric"],ay:["Aymara","Aymar aru","Aymara"],az:["Az\u00e9ri","Az\u0259rbaycan dili","Azerbaijani"],ba:["Bachkir","\u0431\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435","Bashkir"],be:["Bi\u00e9lorusse","\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f","Belarusian"],bg:["Bulgare","\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a","Bulgarian"],bh:["Bihari","\u092d\u094b\u091c\u092a\u0941\u0930\u0940","Bihari"],bi:["Bichelamar","Bislama","Bislama"],
bm:["Bambara","Bamanankan","Bambara"],bn:["Bengali","\u09ac\u09be\u0982\u09b2\u09be","Bengali"],bo:["Tib\u00e9tain","\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42","Tibetan"],br:["Breton","Brezhoneg","Breton"],bs:["Bosnien","Bosanski jezik","Bosnian"],ca:["Catalan","Catal\u00e0","Catalan"],ce:["Tch\u00e9tch\u00e8ne","\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442","Chechen"],ch:["Chamorro","Chamoru","Chamorro"],co:["Corse","Corsu ; lingua corsa","Corsican"],cr:["Cri","\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",
"Cree"],cs:["Tch\u00e8que","\u010cesky ; \u010de\u0161tina","Czech"],cu:["Vieux-slave","\u0421\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a","Old Church Slavonic"],cv:["Tchouvache","\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438","Chuvash"],cy:["Gallois","Cymraeg","Welsh"],da:["Danois","Dansk","Danish"],de:["Allemand","Deutsch","German"],dv:["Maldivien","\u202b\u078b\u07a8\u0788\u07ac\u0780\u07a8","Divehi"],dz:["Dzongkha","\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41","Dzongkha"],
ee:["Ewe","\u0190\u028b\u025bgb\u025b","Ewe"],el:["Grec moderne","\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac","Greek"],en:["Anglais","English","English"],eo:["Esp\u00e9ranto","Esperanto","Esperanto"],es:["Espagnol","Espa\u00f1ol; castellano","Spanish"],et:["Estonien","Eesti keel","Estonian"],eu:["Basque","Euskara","Basque"],fa:["Persan","\u202b\u0641\u0627\u0631\u0633\u06cc","Persian"],ff:["Peul","Fulfulde","Fulah"],fi:["Finnois","Suomen kieli","Finnish"],fj:["Fidjien","Vosa Vakaviti","Fijian"],
fo:["F\u00e9ro\u00efen","F\u00f8royskt","Faroese"],fr:["Fran\u00e7ais","Fran\u00e7ais","French"],fy:["Frison","Frysk","Western Frisian"],ga:["Irlandais","Gaeilge","Irish"],gd:["\u00c9cossais","G\u00e0idhlig","Scottish Gaelic"],gl:["Galicien","Galego","Galician"],gn:["Guarani","Ava\u00f1e'\u1ebd","Guarani"],gu:["Gujarati","\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0","Gujarati"],gv:["Mannois","Ghaelg","Manx"],ha:["Haoussa","\u202b\u0647\u064e\u0648\u064f\u0633\u064e","Hausa"],he:["H\u00e9breu","\u202b\u05e2\u05d1\u05e8\u05d9\u05ea",
"Hebrew"],hi:["Hindi","\u0939\u093f\u0928\u094d\u0926\u0940 ; \u0939\u093f\u0902\u0926\u0940","Hindi"],ho:["Hiri motu","Hiri Motu","Hiri Motu"],hr:["Croate","Hrvatski","Croatian"],ht:["Cr\u00e9ole ha\u00eftien","Krey\u00f2l ayisyen","Haitian"],hu:["Hongrois","magyar","Hungarian"],hy:["Arm\u00e9nien","\u0540\u0561\u0575\u0565\u0580\u0565\u0576","Armenian"],hz:["H\u00e9r\u00e9ro","Otjiherero","Herero"],ia:["Interlingua","Interlingua","Interlingua"],id:["Indon\u00e9sien","Bahasa Indonesia","Indonesian"],
ie:["Occidental","Interlingue","Interlingue"],ig:["Igbo","Igbo","Igbo"],ii:["Yi","\ua187\ua259","Sichuan Yi"],ik:["Inupiak","I\u00f1upiaq ; I\u00f1upiatun","Inupiaq"],io:["Ido","Ido","Ido"],is:["Islandais","\u00cdslenska","Icelandic"],it:["Italien","Italiano","Italian"],iu:["Inuktitut","\u1403\u14c4\u1483\u144e\u1450\u1466","Inuktitut"],ja:["Japonais","\u65e5\u672c\u8a9e (\u306b\u307b\u3093\u3054)","Japanese"],jv:["Javanais","Basa Jawa","Javanese"],ka:["G\u00e9orgien","\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",
"Georgian"],kg:["Kikongo","KiKongo","Kongo"],ki:["Kikuyu","G\u0129k\u0169y\u0169","Kikuyu"],kj:["Kuanyama","Kuanyama","Kwanyama"],kk:["Kazakh","\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456","Kazakh"],kl:["Groenlandais","Kalaallisut ; kalaallit oqaasii","Kalaallisut"],km:["Khmer","\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a","Khmer"],kn:["Kannada","\u0c95\u0ca8\u0ccd\u0ca8\u0ca1","Kannada"],ko:["Cor\u00e9en","\ud55c\uad6d\uc5b4 (\u97d3\u570b\u8a9e) ; \uc870\uc120\ub9d0 (\u671d\u9bae\u8a9e)",
"Korean"],kr:["Kanouri","Kanuri","Kanuri"],ks:["Cachemiri","\u0915\u0936\u094d\u092e\u0940\u0930\u0940 ; \u0643\u0634\u0645\u064a\u0631\u064a","Kashmiri"],ku:["Kurde","Kurd\u00ee ; \u0643\u0648\u0631\u062f\u06cc","Kurdish"],kv:["Komi","\u043a\u043e\u043c\u0438 \u043a\u044b\u0432","Komi"],kw:["Cornique","Kernewek","Cornish"],ky:["Kirghiz","\u043a\u044b\u0440\u0433\u044b\u0437 \u0442\u0438\u043b\u0438","Kirghiz"],la:["Latin","Latine ; lingua latina","Latin"],lb:["Luxembourgeois","L\u00ebtzebuergesch",
"Luxembourgish"],lg:["Ganda","Luganda","Ganda"],li:["Limbourgeois","Limburgs","Limburgish"],ln:["Lingala","Ling\u00e1la","Lingala"],lo:["Lao","\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7","Lao"],lt:["Lituanien","Lietuvi\u0173 kalba","Lithuanian"],lu:["Luba-katanga","kiluba","Luba-Katanga"],lv:["Letton","Latvie\u0161u valoda","Latvian"],mg:["Malgache","Fiteny malagasy","Malagasy"],mh:["Marshallais","Kajin M\u0327aje\u013c","Marshallese"],mi:["Maori de Nouvelle-Z\u00e9lande","Te reo M\u0101ori","M\u0101ori"],
mk:["Mac\u00e9donien","\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a","Macedonian"],ml:["Malayalam","\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02","Malayalam"],mn:["Mongol","\u041c\u043e\u043d\u0433\u043e\u043b","Mongolian"],mo:["Moldave","\u043b\u0438\u043c\u0431\u0430 \u043c\u043e\u043b\u0434\u043e\u0432\u0435\u043d\u044f\u0441\u043a\u044d","Moldavian"],mr:["Marathi","\u092e\u0930\u093e\u0920\u0940","Marathi"],ms:["Malais","Bahasa Melayu ; \u0628\u0647\u0627\u0633 \u0645\u0644\u0627\u064a\u0648",
"Malay"],mt:["Maltais","Malti","Maltese"],my:["Birman","\u1017\u1019\u102c\u1005\u102c","Burmese"],na:["Nauruan","Ekakair\u0169 Naoero","Nauru"],nb:["Norv\u00e9gien Bokm\u00e5l","Norsk bokm\u00e5l","Norwegian Bokm\u00e5l"],nd:["Sindebele","isiNdebele","North Ndebele"],ne:["N\u00e9palais","\u0928\u0947\u092a\u093e\u0932\u0940","Nepali"],ng:["Ndonga","Owambo","Ndonga"],nl:["N\u00e9erlandais","Nederlands","Dutch"],nn:["Norv\u00e9gien Nynorsk","Norsk nynorsk","Norwegian Nynorsk"],no:["Norv\u00e9gien",
"Norsk","Norwegian"],nr:["Nrebele","Nd\u00e9b\u00e9l\u00e9","South Ndebele"],nv:["Navajo","Din\u00e9 bizaad ; Din\u00e9k\u02bceh\u01f0\u00ed","Navajo"],ny:["Chichewa","ChiChe\u0175a ; chinyanja","Chichewa"],oc:["Occitan","Occitan","Occitan"],oj:["Ojibw\u00e9","\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0","Ojibwa"],om:["Oromo","Afaan Oromoo","Oromo"],or:["Oriya","\u0b13\u0b21\u0b3c\u0b3f\u0b06","Oriya"],os:["Oss\u00e8te","\u0418\u0440\u043e\u043d \u00e6\u0432\u0437\u0430\u0433","Ossetian"],pa:["Pendjabi",
"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 ; \u067e\u0646\u062c\u0627\u0628\u06cc","Panjabi"],pi:["Pali","\u092a\u093e\u093f\u0934","P\u0101li"],pl:["Polonais","Polski","Polish"],ps:["Pachto","\u202b\u067e\u069a\u062a\u0648","Pashto"],pt:["Portugais","Portugu\u00eas","Portuguese"],qu:["Quechua","Runa Simi ; Kichwa","Quechua"],rm:["Romanche","Rumantsch grischun","Romansh"],rn:["Kirundi","kiRundi","Kirundi"],ro:["Roumain","Rom\u00e2n\u0103","Romanian"],ru:["Russe","\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",
"Russian"],rw:["Kinyarwanda","Kinyarwanda","Kinyarwanda"],sa:["Sanskrit","\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d","Sanskrit"],sc:["Sarde","sardu","Sardinian"],sd:["Sindhi","\u0938\u093f\u0928\u094d\u0927\u0940 ; \u202b\u0633\u0646\u068c\u064a\u060c \u0633\u0646\u062f\u06be\u06cc","Sindhi"],se:["Same du Nord","Davvis\u00e1megiella","Northern Sami"],sg:["Sango","Y\u00e2ng\u00e2 t\u00ee s\u00e4ng\u00f6","Sango"],si:["Cingalais","\u0dc3\u0dd2\u0d82\u0dc4\u0dbd","Sinhalese"],sk:["Slovaque",
"Sloven\u010dina","Slovak"],sl:["Slov\u00e8ne","Sloven\u0161\u010dina","Slovene"],sm:["Samoan","Gagana fa'a Samoa","Samoan"],sn:["Shona","chiShona","Shona"],so:["Somali","Soomaaliga ; af Soomaali","Somali"],sq:["Albanais","Shqip","Albanian"],sr:["Serbe","\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a","Serbian"],ss:["Swati","SiSwati","Swati"],st:["Sotho du Sud","seSotho","Sotho"],su:["Soundanais","Basa Sunda","Sundanese"],sv:["Su\u00e9dois","Svenska","Swedish"],sw:["Swahili",
"Kiswahili","Swahili"],ta:["Tamoul","\u0ba4\u0bae\u0bbf\u0bb4\u0bcd","Tamil"],te:["T\u00e9lougou","\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41","Telugu"],tg:["Tadjik","\u0442\u043e\u04b7\u0438\u043a\u04e3 ; to\u011fik\u012b ; \u202b\u062a\u0627\u062c\u06cc\u06a9\u06cc","Tajik"],th:["Tha\u00ef","\u0e44\u0e17\u0e22","Thai"],ti:["Tigrigna","\u1275\u130d\u122d\u129b","Tigrinya"],tk:["Turkm\u00e8ne","T\u00fcrkmen ; \u0422\u04af\u0440\u043a\u043c\u0435\u043d","Turkmen"],tl:["Tagalog","Tagalog","Tagalog"],tn:["Tswana",
"seTswana","Tswana"],to:["Tongien","faka Tonga","Tonga"],tr:["Turc","T\u00fcrk\u00e7e","Turkish"],ts:["Tsonga","xiTsonga","Tsonga"],tt:["Tatar","\u0442\u0430\u0442\u0430\u0440\u0447\u0430 ; tatar\u00e7a ; \u202b\u062a\u0627\u062a\u0627\u0631\u0686\u0627","Tatar"],tw:["Twi","Twi","Twi"],ty:["Tahitien","Reo M\u0101`ohi","Tahitian"],ug:["Ou\u00efghour","Uy\u01a3urq\u0259 ; \u202b\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686","Uighur"],uk:["Ukrainien","\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430 \u043c\u043e\u0432\u0430",
"Ukrainian"],ur:["Ourdou","\u202b\u0627\u0631\u062f\u0648","Urdu"],uz:["Ouzbek","O'zbek ; \u040e\u0437\u0431\u0435\u043a ; \u0623\u06c7\u0632\u0628\u06d0\u0643","Uzbek"],ve:["Venda","tshiVen\u1e13a","Venda"],vi:["Vietnamien","Ti\u1ebfng Vi\u1ec7t","Vi\u00eat Namese"],vo:["Volap\u00fck","Volap\u00fck","Volap\u00fck"],wa:["Wallon","Walon","Walloon"],wo:["Wolof","Wollof","Wolof"],xh:["Xhosa","isiXhosa","Xhosa"],yi:["Yiddish","\u202b\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9","Yiddish"],yo:["Yoruba","Yor\u00f9b\u00e1",
"Yoruba"],za:["Zhuang","Sa\u026f cue\u014b\u0185 ; Saw cuengh","Zhuang"],zh:["Chinois","\u4e2d\u6587, \u6c49\u8bed, \u6f22\u8a9e","Chinese"],zu:["Zoulou","isiZulu","Zulu"]};(function(){var e=window.require("beevirtua.event.BookManager"),c=JSF.o(window.require("beevirtua.core.FrameworkObject"),function d(c,e,h,k,m,n,q,l){d.i.constructor.call(this,null);d.wh++;this.tu=d.wh;this.Vb=angular.element(c);this.j=e;this.m=h;this.Na=q;this.Un=l;this.oa=k.width;this.ma=k.height;this.A=k.width;this.w=k.height;this.oe="left"==this.m?parseInt(this.oa.toFixed(0),10):parseInt(this.ma.toFixed(0),10)-1;this.V=function(){return Promise.resolve()};this.ke()},{start:function(d,f){!0===f?
(this.Ya=this.dj=!0,e.h().dispatchEvent(e.f.Gi)):e.h().dispatchEvent(e.f.Vc);this.Do=!0;c.fg++;this.jg(d,f)},move:function(c,f,g){c&&e.h().dispatchEvent(e.f.Ji);this.hg(c,f,g)},end:function(d){c.Xa&&console.log("End of manual interaction.");c.Xa&&console.log("Final sequence 1 -> generate finish and activate final sequence...");this.Ya=this.fd(d);this.ag=!0;this.Ec=this.Wf(d);this.we(0)},vh:function(){var c=this.ag,e=this.Ya,g=!1;return g=this.Na?c&&e:c&&!e},j:null,m:null,dj:null,vc:null,Vb:null,La:null,
L:null,O:null,C:null,ag:null,Ec:null,Zb:null,Yd:null,Pa:400,Si:null,Hb:null,pg:null,ma:null,oa:null,w:null,A:null,Oa:null,Pe:function(){return 42},Qe:function(){return 43},ke:function(){var d=window.require("beevirtua.ui.book.BookContext").h();this.Hb=d.Eb;this.Si=d.qc;this.Vb.addClass("transition-in-progress");this.Yd=c.va().fb(this.Vb[0])},Yo:function(){var d=this;this.Ya?(this.xj(),this.Mj=function(){d.Vi();d.dj?e.h().dispatchEvent(e.f.Om):e.h().dispatchEvent(e.f.Qd)}):(e.h().dispatchEvent(e.f.Uc),
this.Mj=function(){d.Vi()});if(this.op){this.Of.aq(this.Ri);var f=this.Of.Xg(this.Ri);window.require("beevirtua.context.PerformanceManager").h().Xn(f)}c.Xa&&console.log("Final sequence 2 : Generated Finish Ended, firing 'end' event...");this.ua("end",this.Ya)},xj:function(){},Vi:function(){c.Xa&&console.log("Final sequence 5 : _cleanOncePageChanged is called.");this.Vb.removeClass("transition-in-progress");var d=this.Vb[0];d&&d.parentElement&&d.parentElement.removeChild(d);c.fg--;this.gg()},qe:function(){console.error("_onInitialize should be overriden")},
jg:function(){console.error("_onStart should be overriden")},hg:function(){console.error("_onMove should be overriden")},sb:function(){console.error("_getX should be overriden")},cd:function(){console.error("_getY should be overriden")},Wf:function(){console.error("_getFinish should be overriden")},gg:function(){console.error("_onCleanOncePageChanged should be overriden")},fd:function(d){if(!d.center)throw"Evt should have center property";var e;d.distance>this.A/24?e=this.Cc(this.m,this.xa(this.j,
d.direction==Hammer.DIRECTION_RIGHT||d.direction==Hammer.Hf,d.direction==Hammer.DIRECTION_LEFT||d.direction==Hammer.Hf),this.xa(this.j,d.direction==Hammer.DIRECTION_DOWN||d.direction==Hammer.Hf,d.direction==Hammer.DIRECTION_UP||d.direction==Hammer.Hf)):e=!1;c.Xa&&console.log("Final sequence : moveToPage returns ->",e);return e},zc:function(c,e,g){var h=!1;return function(k){if(k>=c){if(h)return!1;h=!0;return{x:-e,y:1}}return{x:e*(1-2*k/c),y:Math.sin(k/c*Math.PI)*g}}},yc:function(c,e,g,h){var k=!1;
return function(m){if(m>=c){if(k)return!1;k=!0;m={x:h,y:1}}else m={x:(h-e)/c*m+e,y:-g/c*m+g};return m}},fe:function(){this.sj||(this.sj=c.Bq());return this.sj},Ac:function(){this.Oi||(this.Oi=c.Iq());return this.Oi},hj:function(){this.rj||(this.rj=c.Hq());return this.rj},we:function(d){if(0===d){if(this.Ya){d=window.require("beevirtua.ui.book.BookContext").h();var e=this.xa(this.j,function(){c.jb.Bf(!0)},function(){c.jb.Af(!0)});(1===d.navigation.ah()||d.navigation.Ze()||d.navigation.$e())&&e()}this.bp=
new Date}d=100/6;e=new Date-this.bp;d=this.ov?e/d*5:e/d;if(d=this.Ec(d)){this.move(void 0,d.x,d.y);var g=this;requestAnimationFrame(function(){g.we(1)})}else this.Yo()},$a:function(c,e,g,h,k){switch(c){case "TL":return e;case "TR":return g;case "BL":return h;case "BR":return k}},xa:function(c,e,g){switch(c){case "L":case "TL":case "BL":return e;case "R":case "TR":case "BR":return g}},Cc:function(c,e,g){switch(c){case "left":return e;case "top":return g}}},{PI:Math.PI,rb:Math.PI/2,wh:0,Gw:function(d){return d.tu===
c.wh},va:function(){return window.require("beevirtua.ui.utility.CSS")},jb:void 0,fg:0,Xa:!1,wd:function(){return"Transition"},hh:1E5,Bq:function(){c.hh+=2;return c.hh},Ch:1E5,Iq:function(){c.Ch=c.Ch-2;return c.Ch},Bh:5E4,Hq:function(){c.Bh+=5;return c.Bh}});window.a("beevirtua.ui.book.transition.component.Transition",c)})();(function(){window.require("beevirtua.event.BookManager");var e=window.require("beevirtua.ui.book.transition.component.Transition"),e=JSF.o(e,function b(d,e,g){b.i.constructor.call(this,void 0,d,e,g);this.qe()},{},{wd:function(){return"LightTransition"}});window.a("beevirtua.ui.book.transition.component.LightTransition",e)})();(function(){window.require("beevirtua.event.BookManager");var e=window.require("beevirtua.ui.book.transition.component.Transition"),c=JSF.o(e,function(b,d,e,g,h,k,m,n){c.i.constructor.call(this,b,d,e,g,h,k,m,n);this.xo(b,g,d,h,k);this.op=!0;this.qe()},{xo:function(b,c,f,g,h){var k=this,m=this.qn(c);m.active.R.className+=this.xa(f," back-face"," front-face");m.Pc.R.className+=this.xa(f," front-face"," back-face");this.og=m.page;this.La=angular.element(m.active.R);this.L=angular.element(m.active.ym);
this.O=angular.element(m.Pc.R);this.C=angular.element(m.Pc.ym);this.V=function(){return Promise.all([g,h]).then(function(e){var g=e[0],h=e[1];k.Wm=k.xa(f,h,g);k.Ko=k.xa(f,g,h);e.forEach(function(b){b.forEach(function(b){b.setPosition(0,0);b.ra(c.width,c.height);b.uf({X:c.height})})});m.Pc.R.style.display="none";m.qt(k.Wm);m.At(k.Ko);m.Pc.R.style.display="none";b.appendChild(k.og);b.style.display="";e=window.require("beevirtua.context.Benchmark");k.Of=new e;k.Ri=k.Of.fm();setTimeout(function(){k.nj=
!0},0)}).catch(function(b){console.log(b)})};e.Xa&&this.qo()},qo:function(){this.La.css({background:"rgba(0,255,0,0.5)",opacity:.5,border:"3px solid black"});this.L.css({background:"green",opacity:.5,border:"1px solid black"});this.O.css({background:"rgba(255,0,0,0.5)",opacity:.5,border:"3px solid black"});this.C.css({background:"green",opacity:.5,border:"1px solid black"})},Xi:function(b){var c=document.createElement("div");c.className="face-container";b&&(c.style.height=b.height+"px");var e=document.createElement("div");
e.className="face-wrapper face-content";c.appendChild(e);return{R:c,ym:e,zf:function(g){c.style.width=0<g.length?b.width+"px":"0px";g.forEach(function(b){b.Ej(e);b.show()})}}},qn:function(b){var c=document.createElement("div");c.className="page-container simple-transition";c.style.position="absolute";b&&(c.style.left=b.left+this.xa(this.j,1,0)+"px",c.style.top=b.top+"px",c.style.width=b.width+"px",c.style.height=b.height+"px",this.pg=b.top,this.Po=b.left);var e=this.Xi(b),g=this.Xi(b);c.appendChild(g.R);
c.appendChild(e.R);return{page:c,active:e,Pc:g,qt:function(b){e.zf(b)},At:function(b){g.zf(b)}}}},{wd:function(){return"LayeredTransition"}});window.a("beevirtua.ui.book.transition.component.LayeredTransition",c)})();(function(){var e=window.require("beevirtua.ui.book.transition.component.Transition"),c=window.require("beevirtua.ui.book.transition.component.LayeredTransition"),b=JSF.o(c,function f(){f.i.constructor.apply(this,arguments)},{qe:function(){this.wj(this.L);this.wj(this.C);"left"==this.m?this.O.css({left:this.xa(this.j,this.oa,-this.oa)+"px"}):"top"==this.m&&(this.og.className=this.og.className+" attach-point-top",this.O.css({top:this.xa(this.j,this.ma,-this.ma)+"px"}));this.C[0].style.display="none"},
jg:function(b,c){e.Xa&&console.log("Start Simple Transition");c&&("left"==this.m?this.Ec=this.zc(this.Pa/16,this.xa(this.j,-this.A,this.A),0):"top"==this.m&&(this.Ec=this.Na?this.zc(this.Pa/16,-this.w,0):this.zc(this.Pa/16,this.w,0)),this.we(0))},sb:function(b){var c;if("left"==this.m)return b&&b.center?b.center.x-this.Hb/2:0;"top"==this.m&&(c=b?b.center.y-this.Yd.y-this.pg:-1);return c},cd:function(){return 0},Wf:function(b){if("left"==this.m)return this.xa(this.j,this.yc(this.Pa/16,this.sb(b),0,
this.Ya?this.A:-this.A),this.yc(this.Pa/16,this.sb(b),0,this.Ya?-this.A:this.A));if("top"==this.m)return this.xa(this.j,this.yc(this.Pa/16,this.sb(b),0,this.Ya?this.w:-this.w),this.yc(this.Pa/16,this.sb(b),0,this.Ya?-this.w:this.w))},hg:function(b,c){var h;c?h=c:h=this.sb(b);"left"==this.m?this.N=90/this.A*h+90:"top"==this.m&&(this.N=90/this.w*h+90);this.N=.01>this.N?.01:this.N;this.N=179.99<this.N?179.99:this.N;"left"==this.m?"L"==this.j[0]?(e.va().rotate(this.L[0],2E3,this.N),e.va().rotate(this.C[0],
2E3,-180+this.N)):"R"==this.j[0]&&(this.N=180-this.N,e.va().rotate(this.L[0],2E3,-this.N),e.va().rotate(this.C[0],2E3,-this.N-180)):"top"==this.m&&("L"==this.j[0]?(e.va().wf(this.L[0],2E3,180-this.N),e.va().wf(this.C[0],2E3,-180+this.N)):"R"==this.j[0]&&(this.N=180-this.N,e.va().wf(this.L[0],2E3,this.N),e.va().wf(this.C[0],2E3,this.N-180)));this.Na?90<this.N?(this.C[0].style.zIndex=this.Ac(),this.L[0].style.zIndex=1):(this.C[0].style.zIndex=1,this.L[0].style.zIndex=this.fe()):90<this.N?(this.C[0].style.zIndex=
this.fe(),this.L[0].style.zIndex=1):(this.C[0].style.zIndex=1,this.L[0].style.zIndex=this.Ac());this.C[0].style.display="";this.nj&&(this.O[0].style.display="")},gg:function(){this.Wi(this.L);this.Wi(this.C)},fd:function(c){var g;c.center?g=b.i.fd.apply(this,arguments):g=90<this.N;e.Xa&&console.log("Final sequence : moveToPage returns ->",g);return g},N:null,wj:function(b){b&&b.css({transition:"none",opacity:1})},Wi:function(b){b&&b.css({transform:"","-webkit-transform":"",transition:"",opacity:"",
zIndex:""})}});window.a("beevirtua.ui.book.transition.component.CardboardLayeredTransition",{constructor:b,type:c.wd()})})();(function(){var e=window.require("beevirtua.event.BookManager"),c=e.h(),b=window.require("beevirtua.ui.book.transition.component.Transition"),d=window.require("beevirtua.ui.book.transition.component.LayeredTransition"),f=window.require("beevirtua.context.PerformanceManager"),g=JSF.o(d,function k(){k.i.constructor.apply(this,arguments)},{qe:function(){this.dd=c.dh(e.properties.Me);this.Na?(this.Vb[0].style.opacity=0,this.L[0].style.zIndex=this.hj(),this.C[0].style.zIndex=this.Ac()):(this.C[0].style.zIndex=
this.fe(),this.L[0].style.zIndex=this.Ac())},jg:function(c,d){b.Xa&&console.log("Start Paper Transition");var e=f.h().Ic();1<b.fg&&!e.Gj&&(this.dd=!1);e=this.j;if(d)this.j=this.dd?"T":"B";else{var g=this.cd(c);this.dd?"left"==this.m?g<this.ma/3?(this.j="T",this.Jb=!1):g>2*this.ma/3?(this.j="B",this.Jb=!1):(this.j="T",this.Jb=!0):"top"==this.m&&(g<this.oa/3?(this.j="T",this.Jb=!1):g>2*this.oa/3?(this.j="B",this.Jb=!1):(this.j="T",this.Jb=!0)):this.j="B"}this.j+=e;b.Xa&&console.log("Transition origin : ",
this.j);this.O.css(this.Ln(this.j,this.Hb,this.w));this.C.css(this.Mn(this.j));this.La.css(this.Dn(this.j,this.Hb));this.L.css(this.En(this.j));this.Na?(e=this.Ac(),g=this.hj()):(e=this.fe(),g=this.Ac());this.O.css({overflow:"hidden",zIndex:e,width:2*this.Hb+"px",height:4*this.Si+"px"});this.C.css({opacity:1,zIndex:e,width:this.A+"px",height:this.w+"px",overflow:"hidden",boxShadow:"0px 0px 10px 0px rgba(50, 50, 50, 0.75)"});this.La.css({overflow:"hidden",zIndex:g,width:5*this.oa+"px",height:5*this.ma+
"px"});this.L.css({opacity:1,zIndex:g,width:this.oa+"px",height:this.ma+"px"});"left"==this.m&&(this.Oa=angular.element(document.createElement("div")),this.Oa.css({width:this.tb+2+"px",height:2*this.w+"px"}),this.Oa.css(this.Qn(this.j)),this.Oa.addClass(this.Pn(this.j)),this.C.append(this.Oa));this.O.css({opacity:0});d&&("left"==this.m?this.Ec=this.zc(this.Pa/16,this.A,this.eg):"top"==this.m&&(this.Ec=this.Na?this.zc(this.Pa/16,-this.w,this.eg):this.zc(this.Pa/16,this.w,this.eg)),this.we(0))},sb:function(b){if("left"==
this.m)return b=b?b.center.x-this.Hb/2:-1,b=this.xa(this.j,Math.min(-b,this.oe),Math.min(b,this.oe)),b-1;if("top"==this.m)return b=b?b.center.y-this.Yd.y-this.pg:-1,b=this.xa(this.j,Math.min(-b,this.oe),Math.min(b,this.oe))},cd:function(b){var c;b?b.bw?c=0:"left"==this.m?c=b.center.y-this.Un:"top"==this.m&&(c=this.Yd.x+this.Po+this.oa-b.center.x):c=0;return c},Wf:function(b){var c=this.sb(b);b=this.cd(b);"BR"==this.j||"BL"==this.j?b=this.w-b:this.Jb&&(b=b-this.w/2,c>this.A-100&&(b=1));this.Na&&(c-=
this.w);if("left"==this.m)return this.yc(this.Pa/16,c,b,this.Ya?-this.A:this.A);if("top"==this.m)return this.yc(this.Pa/16,c,b,this.Ya?-this.w:this.w)},hg:function(c,d,e){var g,f,p,r;d||e?c=e:(d=this.sb(c),c=this.cd(c),"BR"==this.j||"BL"==this.j?"left"==this.m?c=this.w-c:"top"==this.m&&(c=this.A-c):this.Jb&&(c=c-this.w/2,d>this.A-100&&(c=1)),this.Na&&(d-=this.w));this.O.css({opacity:1});this.Na&&(this.Vb[0].style.opacity=1);this.dd||(c=0);"left"==this.m?(g=Math.sqrt(Math.pow(c,2)+Math.pow(this.oa-
d,2)),p=Math.asin(c/g),r=b.rb-p,e=b.PI-2*r,f=d+this.w*Math.sin(e)+this.A*Math.cos(e),0>f&&(p=c+this.w*Math.cos(e)-this.A*Math.sin(e),d=d-f+1,c=c-p+this.w,g=Math.sqrt(Math.pow(c,2)+Math.pow(this.oa-d,2)),p=Math.asin(c/g),r=b.rb-p),g/=2*Math.cos(p),f=this.oa-g,g=g>this.oa?this.oa:g,f=0>f?0:f-1):"top"==this.m&&(g=Math.sqrt(Math.pow(c,2)+Math.pow(this.ma-d,2)),p=Math.asin(c/g),r=b.rb-p,e=b.PI-2*r,f=d+this.A*Math.sin(e)+this.ma*Math.cos(e),0>f&&(p=c+this.A*Math.cos(e)-this.ma*Math.sin(e),d=d-f+1,c=c-p+
this.A,g=Math.sqrt(Math.pow(c,2)+Math.pow(this.ma-d,2)),p=Math.asin(c/g),r=b.rb-p),g/=2*Math.cos(p),f=this.ma-g,g=g>this.ma?this.ma:g,f=0>f?0:f-1);this.Rn(this.j).call(this,f,g,this.oa,p,r);"left"==this.m&&(this.Oa[0].style.opacity=d/(2*this.A)+.5);this.pj=d;this.nj&&(this.O[0].style.display="")},gg:function(){this.Zm()},fd:function(c){var d;0>this.pj?d=!0:d=g.i.fd.apply(this,arguments);b.Xa&&console.log("Final sequence : moveToPage returns ->",this.Na?!d:d);return this.Na?!d:d},xj:function(){this.C.css({boxShadow:""});
"left"===this.m&&this.O.css({overflow:"visible"});"BL"==this.j&&"left"===this.m?(this.O[0].style.width=this.A+"px",b.va().transform(this.O[0],0,0,b.PI+b.rb,this.A,0),this.C[0].style.left="0px",b.va().transform(this.C[0],0,0,b.rb,this.A-this.w,this.A)):"BR"==this.j&&"left"===this.m&&(this.O[0].style.width=this.A+"px",b.va().transform(this.O[0],0,0,b.rb,-this.A,0),this.C[0].style.right="0px",b.va().transform(this.C[0],0,0,-b.rb,this.w-this.A,this.A))},Jb:!1,tb:100,eg:100,pj:null,dd:!0,Ln:function(){return this.Cc(this.m,
this.$a(this.j,{left:"auto",right:"0px",transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%"},{left:"0px",right:"auto",transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%"},{left:"auto",right:"0px",transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",top:this.w+"px"},{left:"0px",right:"auto",transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%",top:this.w+"px"}),this.$a(this.j,{},{left:"auto",right:"0px",transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%"},
{},{left:"0px",right:"auto",transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%"}))},Mn:function(){return this.Cc(this.m,this.$a(this.j,{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",left:"auto",right:"100px"},{transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%",left:"100px",right:"auto"},{transformOrigin:"100% 100%","-webkit-transform-origin":"100% 100%",left:"100px",right:"auto"},{transformOrigin:"0% 100%","-webkit-transform-origin":"0% 100%",left:"auto",right:"100px"}),
this.$a(this.j,{},{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",top:"100px",left:"auto",right:"0px"},{},{transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%",top:"100px",left:"0px",right:"auto"}))},Dn:function(){return this.Cc(this.m,this.$a(this.j,{left:"auto",right:"0px",transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%"},{left:"0px",right:"auto",transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%"},{left:"auto",right:"0px",transformOrigin:"100% 100%","-webkit-transform-origin":"100% 100%",
top:-4*this.ma+"px"},{left:"0px",right:"auto",transformOrigin:"0% 100%","-webkit-transform-origin":"0% 100%",top:-4*this.ma+"px"}),this.$a(this.j,{},{top:"0px",left:"auto",right:"0px",transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%"},{},{top:"0px",left:"0px",right:"auto",transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%"}))},En:function(){return this.Cc(this.m,this.$a(this.j,{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",left:"auto",right:"0px"},{transformOrigin:"0% 0%",
"-webkit-transform-origin":"0% 0%",left:"0px",right:"auto"},{transformOrigin:"100% 100%","-webkit-transform-origin":"100% 100%",left:"auto",right:"0px",top:"auto",bottom:"0px"},{transformOrigin:"0% 100%","-webkit-transform-origin":"0% 100%",left:"0px",right:"auto",top:"auto",bottom:"0px"}),this.$a(this.j,{},{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",top:"0px",left:"auto",right:"0px"},{},{transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%",left:"0px",right:"auto",top:"0px",
bottom:"auto"}))},Pn:function(){return this.xa(this.j,"left-shadow","right-shadow")},Qn:function(){return this.Cc(this.m,this.$a(this.j,{transformOrigin:"0% 0%","-webkit-transform-origin":"0% 0%",right:"0px",top:"0px"},{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",left:"0px",top:"0px"},{transformOrigin:"100% 100%","-webkit-transform-origin":"100% 100%",bottom:"0px",right:"0px"},{transformOrigin:"100% 100%","-webkit-transform-origin":"100% 100%",bottom:"0px",left:"0px"}),this.$a(this.j,
{},{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",top:"0px",right:"0px"},{},{transformOrigin:"100% 0%","-webkit-transform-origin":"100% 0%",top:"0px",left:"0px"}))},ze:{mu:function(c,d,e,g,f){var p=-f-b.PI,r=b.va();r.transform(this.La[0],-c,0,-f,e,0);r.transform(this.L[0],-e,0,f,c,0);r.transform(this.O[0],-c,0,-f,100,0);r.transform(this.C[0],Math.cos(p)*d,Math.abs(Math.sin(p))*d,p);r.transform(this.Oa[0],this.tb-d,0,-g,0,-this.tb)},nu:function(c,d,e,g,f){var p=f+b.PI,r=b.va();"left"==
this.m?(r.transform(this.La[0],c,0,f,-e,0),r.transform(this.L[0],e,0,-f,-c,0),r.transform(this.O[0],c,0,f,-100,0),r.transform(this.C[0],-Math.cos(p)*d,-Math.sin(p)*d,p),r.transform(this.Oa[0],d-this.tb,0,g,0,-this.tb)):"top"==this.m&&(r.transform(this.La[0],0,c,f,0,-e-this.oa),r.transform(this.L[0],0,e+this.oa,-f,0,-c),r.transform(this.O[0],0,c,f,0,-500),r.transform(this.C[0],Math.sin(p)*d,-Math.cos(p)*d+400,p))},Ap:function(c,d,e,g,f){var p=b.va();p.transform(this.La[0],-c,0,f,e,0);p.transform(this.L[0],
-e,0,-f,c,0);p.transform(this.O[0],-c,0,b.PI+f,2*this.Hb-100,0);p.transform(this.C[0],Math.cos(f)*d-this.A,Math.abs(Math.sin(f))*d-this.w,f);p.transform(this.Oa[0],this.tb-d,0,g,0,this.tb)},Bp:function(c,d,e,g,f){var p=-f,r=b.va();"left"==this.m?(r.transform(this.La[0],c,0,-f,-e,0),r.transform(this.L[0],e,0,f,-c,0),r.transform(this.O[0],c,0,b.PI-f,2*-this.Hb+100,0),r.transform(this.C[0],this.A-Math.cos(p)*d,Math.abs(Math.sin(p))*d-this.w,p),r.transform(this.Oa[0],d-this.tb,0,-g,0,this.tb)):"top"==
this.m&&(r.transform(this.La[0],0,c,-f,0,-e-this.w),r.transform(this.L[0],0,e+this.w,f,0,-c),r.transform(this.O[0],0,c,-f,0,-200),r.transform(this.C[0],-Math.sin(p)*d,Math.sin(b.rb-p)*d+100,p+Math.PI))}},Rn:function(){return this.$a(this.j,this.ze.mu,this.ze.nu,this.ze.Ap,this.ze.Bp)},Xd:function(b,c,d){b.css({left:"",right:"",top:"",bottom:"",opacity:"",overflow:"",display:"",transformOrigin:"",zIndex:"",width:c?c+"px":"",height:d?d+"px":"",transform:"",boxShadow:"",xm:"","-webkit-transform":"",
"-webkit-transform-origin":""})},Zm:function(){this.O&&this.Xd(this.O,this.A,this.w);this.C&&this.Xd(this.C);this.La&&this.Xd(this.La,this.oa,this.ma);this.L&&this.Xd(this.L);this.Oa&&this.Oa.remove()}});window.a("beevirtua.ui.book.transition.component.PaperLayeredTransition",{constructor:g,type:d.wd()})})();(function(e,c){function b(b,c,d){this.message=b;this.Jg=c;this.Gp=d;this.Ua(document.body,"beevirtua/ui/alert/Alert.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){var b=this.I,c=this.Jg;b.message=this.message;b.closeButtonText=c};b.prototype.D=function(){var b=this.Gp;this.destroy();b&&b()};b.prototype.Ia={closeAlert:b.prototype.D};e("beevirtua.ui.alert.Alert",b)})(window.a,window.require);(function(e,c){function b(b,c){this.message=b;this.Jg=c;this.Ua(document.body,"beevirtua/ui/fingerTooltip/FingerTooltip.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){var b=this.I,c=this.Jg;b.message=this.message;b.closeButtonText=c};b.prototype.D=function(){this.I.destroyed=!0;setTimeout(this.destroy.bind(this),350)};b.prototype.Ia={closeFingerTooltip:b.prototype.D};e("beevirtua.ui.fingerTooltip.FingerTooltip",b)})(window.a,
window.require);(function(e,c){function b(){this.zp=d.h();this.Ua(document.body,"beevirtua/ui/debug/Debug.html")}var d=window.require("beevirtua.context.Benchmark"),f=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,f.prototype);b.kb=5E3;b.D=[{id:0,src:"http://www.beebuzziness.com/var/ezwebin_site/storage/images/design/beebuzziness/172-10-fre-FR/BeeBuzziness.png",size:7.9},{id:1,src:"http://www.beebuzziness.com/extension/beezext_beebuzziness/design/beezdsg_beebuzziness/images/Logo_footer.png",
size:7.6}];b.prototype.Ea=function(){function c(){m.Xt(b.D);var d=m.Zc;e.currentNetworkSpeed=0<d?d+" kb/s":"Network error"}var e=this.I,f=this.Bi,m=this.zp;this.kq=f(function(){e.currentFps=m.Pv=m.Xg()},1E3);c();this.xs=f(c,1E3);e.systemInfo=d.Uq();window.performance&&(window.performance.timing&&(e.timing=window.performance.timing),window.performance.memory&&(e.memory=window.performance.memory));navigator&&navigator.D&&(e.hardwareConcurrency=navigator.D)};b.prototype.D=function(){return d.Qq()};b.prototype.destroy=
function(){var b=this.Bi;b.cancel(this.kq);b.cancel(this.xs);f.prototype.destroy.apply(this,[])};b.prototype.Ia={close:b.prototype.destroy,screenInfo:b.prototype.D};e("beevirtua.ui.debug.Debug",b)})(window.a,window.require);(function(e,c){function b(b,e,g,h){this.ck=b.Zg();this.fullPage=!1;this.Yj=b.lang.cb;this.gb=e;this.K=g;this.context=h;this.Ra=c("beevirtua.ui.book.BookContext").h();this.Kc(this.Yj)}b.prototype.Kc=function(b){function e(){var b=document.querySelector(".header");b&&(b.style.display="")}var g=this.Ra,h=this.ck,k=this.gb,m=this.K,n=this.context,q=c("beevirtua.ui.book.BookContext"),l=c("beevirtua.event.BookManager"),p=l.h(),r=c("beevirtua.context.PerformanceManager").h(),u=c("beevirtua.data.cooked.FaceRegistry"),
t=document.querySelector(".book-container"),w=document.querySelector(".bee-fullsize-book"),x=document.querySelector(".page-in-transition"),A=c("beevirtua.ui.book.display.Displayer"),B=c("beevirtua.ui.book.display.DisplayMode"),ea=c("beevirtua.ui.book.display.BookLayout"),fa=c("beevirtua.ui.book.transition.control.TransitionProvider"),C=c("beevirtua.ui.book.transition.control.Transitionner"),O=c("beevirtua.ui.book.layer.LayerProvider"),ga=c("beevirtua.ui.book.layer.control.FaceLayerStrategy"),E=c("beevirtua.ui.book.navigation.Navigation"),
P=c("beevirtua.ui.book.navigation.SinglePageMode"),Q=c("beevirtua.ui.book.display.BookResize"),I=c("beevirtua.ui.book.navigation.PromiseQueue"),S=c("beevirtua.ui.book.navigation.DisplayCoordinator"),T=c("beevirtua.ui.book.navigation.TransitionStrategyProvider"),F=c("beevirtua.data.cooked.PageRegistry").h(),U=c("beevirtua.data.cooked.PageInfo"),ha=c("beevirtua.ui.book.behavior.PageMode"),ia=c("beevirtua.ui.book.layer.component.FaceLayer"),ja=c("beevirtua.ui.book.transition.component.Transition"),J=
new (c("beevirtua.ui.book.display.LayoutManager")),ka=c("beevirtua.ui.book.display.ZzoContainer"),la=new (c("beevirtua.ui.utility.DomUtilities"));this.wt(la,b);g.orientation="monoplan"==b?q.Ed.wi:q.Ed.jh;b=new ea(g,q.Ed,t,x);var G=this.cb=new B(b),H=new P(ha,l);ja.jb=H;var B=c("beevirtua.ui.book.display.NativeContext"),P=c("beevirtua.ui.book.display.NativeContainer"),K=c("beevirtua.ui.book.display.ViewportLayout"),B=new P(50,B,c("beevirtua.ui.utility.CSS"),K,r,b);B.vt(t);K.Ba=B;var L=new A(B);L.Kc(G);
t=new fa(F,G,B);t=new C(t);T=new T(L,t);p.on(l.f.uc,e);var V=this.xb=new u,t=document.querySelector(".book-container");c("beevirtua.ui.book.BookContainer").h().rt(t);var u=new ka(document.body,m),aa=this.Gc=new ga(V,ia,r,m,n,t,u,g),O=new O(aa),I=new S(I,50,O,T);I.jb=H;var S=Number(n.yk()),y=this.navigation=new E(S,G.nk(h.length).Eh,I,function(b){g.$b=b;p.dispatchEvent(l.f.Gb,g.$b,{$h:H.isEnabled(),Pb:H.Pb()});k.Kh(b);J.Ot()},K,m);g.Bt(y);g.Dt(F);g.yt(V);h.map(function(b,c){V.Xl(c,b);0===c%2&&F.vm(c,
new U(y,c,c+1,h[c],h[c+1]))});E=document.querySelector(".bee-navigation-button.right-button");J.Ol(document.querySelector(".bee-navigation-button.left-button"),{Ug:"left",oi:.5},function(){return y.ea>y.Cd});J.Ol(E,{Ug:"right",oi:.5},function(){return y.ea<y.Oc});var M=this.mf=function(){function b(c,d){return c&&c.Ka()?c.Ka():d&&d.Ka()?d.Ka():void 0}var c=z.resize(h[0],200),d=y.ea,e=d-1,g=b(h[e],h[d]),f=b(h[d],h[e]);if(g||f)g=z.Tt(c.Sc,g,f),U.Di=g.left,U.Ei=g.right,F.um(e,g.left),F.um(d,g.right),
K.ut({width:c.Sc.Ga,height:c.Sc.X}),L.resize({width:c.Sc.Ga,height:c.Sc.X,top:z.xd+z.paddingTop,viewport:z.ir()},g.left,g.right),H.enable(c.Le,y.Ze(),y.$e()),p.dispatchEvent(l.f.Ki),J.$s(G.Fq(g,z.xd+z.paddingTop))};angular.element(window).bind("resize",M);var z=new Q(g,w,t,G,window.device,M,m);z.Yk();this.Ig=z;var ba=this.nextPage=function(){return y.next().catch(function(b){console.log("next error",b)})},ca=this.Rh=function(){return y.Jl().catch(function(b){console.log("previous error",b)})},da=
this.ob=function(b){return y.ob(b).catch(function(){console.log("goTo error")})};this.destroy=function(){aa.destroy();c("beevirtua.data.cooked.PageRegistry").h().destroy();W&&W.destroy();p.$(l.f.Sd,ba);p.$(l.f.Td,ca);p.$(l.f.Li,da);p.$(l.f.uc,e);y.destroy();L.destroy();angular.element(window).unbind("resize",M)};y.Kc().then(function(){M();p.on(l.f.Sd,ba);p.on(l.f.Td,ca);p.on(l.f.Li,da)});w=c("beevirtua.event.BookEventAggregator");m=new w(t,m);Q={textSelect:device.desktop()?700:null,hotZone:600,pageMode:500,
internalLink:400,externalLink:300,bookZoom:200,pageTurn:100};if(device.desktop()){var t=c("beevirtua.ui.book.behavior.TextSelect"),E=c("beevirtua.ui.tooltip.Tooltip"),W=new t(E,device,n,l);W.Fr(w)}m.Up(Q);r.Wt()};b.prototype.update=function(b){var e=this.ck=b.Zg();b=this.cb;var g=this.xb,h=this.Gc,k=c("beevirtua.data.cooked.PageRegistry").h(),m=this.navigation,n=c("beevirtua.data.cooked.PageInfo");h.destroy();k.destroy();g.destroy();e.map(function(b,c){g.Xl(c,b);0===c%2&&k.vm(c,new n(m,c,c+1,e[c],
e[c+1]))});m.update(b.nk(e.length).Eh);m.ob(0)};b.prototype.aj=function(b){c("beevirtua.context.Benchmark");var e=b.type;"number"!==typeof b.length||"PageChanged"!==b[0]&&"Relayout"!==b[0]||(e="relayout");if(!device.desktop()||!this.pv)if(!b.srcEvent||!b.srcEvent.target||-1==b.srcEvent.target.className.indexOf("avoid-hammer")){var g=this.Zd[e],h=0;if(g)for(var k=c("beevirtua.ui.book.BookContext").h();g[h].Nb.Mb(e,b,k,this.xc[g[h].name])&&h<g.length-1;)h++}};b.prototype.vd=function(){return"biplan"===
this.Yj?Math.max(0,this.Ra.$b-1):Math.max(0,this.Ra.$b)};b.prototype.cq=function(){this.Ig.du(this.xb.Yg(this.vd()));this.fullPage=!0};b.prototype.yh=function(){this.Ig.yh(this.xb.Yg(this.vd()));this.fullPage=!1};b.prototype.resize=function(){this.Ig.Yk();this.mf()};b.prototype.wt=function(b,c){b.removeClass(document.body,"monoplan","biplan");b.addClass(document.body,c)};e("beevirtua.ui.book.Book",b)})(window.a,window.require);(function(e,c){function b(b,c,e,f){this.H=b;this.ph=!1;this.Ua(document.body,"beevirtua/ui/book/BookFacade.html").then(function(){var n=this.Aa=new d(b,c,e,f);f.As(n.navigation.ob.bind(n.navigation));e.V("bookCreated")}.bind(this))}var d=c("beevirtua.ui.book.Book"),f=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,f.prototype);b.prototype.vd=function(){return this.Aa.vd()};b.prototype.Rh=function(){this.Aa.Rh()};b.prototype.nextPage=function(){this.Aa.nextPage()};b.prototype.ob=
function(b){this.Aa.ob(b)};b.prototype.resize=function(){var b=this.Aa;b&&b.resize()};b.prototype.mm=function(){var b=this.Aa;this.ph?(b.yh(),this.ph=!1):(b.cq(),this.ph=!0)};b.prototype.destroy=function(){this.Aa&&this.Aa.destroy();f.prototype.destroy.apply(this)};b.prototype.update=function(b){var c=this.Aa;c&&c.update(b)};b.prototype.Ea=function(){};b.prototype.Ia={previousPage:b.prototype.Rh,nextPage:b.prototype.nextPage};b.prototype.ud=[b.prototype.vd,b.prototype.resize,b.prototype.mm];e("beevirtua.ui.book.BookFacade",
b)})(window.a,window.require);(function(e,c){function b(b,c){this.H=b;this.context=c;this.cl=!0;this.Ua(document.body,"beevirtua/ui/menu/Menu.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement"),f=new (c("beevirtua.ui.utility.DomUtilities"));_.assign(b.prototype,d.prototype);b.prototype.update=function(b){this.yd.then(function(){this.H=b;this.Ea();this.close()}.bind(this))};b.prototype.Ea=function(){var b=this.H,c=this.I,d=this.Dm,e=this.$timeout,f=this.context;c.mainMenu=b.Jq(f.hb);d.currentLang=b.lang.id;f.Wg().then(function(b){d.versionNumber=
b});this.Oj=this.target.getElementsByClassName("cover-menu")[0];e(function(){c.$digest()},0)};b.prototype.ju=function(){var b=this.cl,c=document.querySelector(".menu-button");b?f.addClass(c,"menu-fullscreen"):f.removeClass(c,"menu-fullscreen");this.cl=!b};b.kb=250;b.D="cover-menu--open";b.prototype.open=function(){var b=this.I;b.$broadcast("OpenMenu",b.mainMenu);this.Lt()};b.prototype.close=function(){this.I.$broadcast("CloseAllMenu");this.Qk()};b.prototype.Qk=function(){var c=this.Oj;Y(c,b.D);this.yr=
setTimeout(function(){c.style.zIndex=-1},b.kb)};b.prototype.Lt=function(){var c=this.Oj;clearTimeout(this.yr);c.style.zIndex=1E4;Z(c,b.D)};b.prototype.Ia={closeMenu:b.prototype.close,hideCover:b.prototype.Qk};e("beevirtua.ui.menu.Menu",b)})(window.a,window.require);(function(e,c){function b(b){this.H=b;this.Ua(document.body,"beevirtua/ui/pageNumber/PageNumber.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.update=function(b){this.yd.then(function(){this.H=b;this.Ea();this.Yh(this.Ns)}.bind(this))};b.prototype.destroy=function(){d.prototype.destroy.apply(this)};b.prototype.Ea=function(){var b=this.H,c=this.I;c.representationMode=b.lang.cb;c.faces=b.Zg();c.nbFaces=c.faces.length};b.prototype.Yh=function(b){this.I.currentPageIndex=
this.Ns=b};b.prototype.Ia={};b.prototype.ud=[b.prototype.Yh];e("beevirtua.ui.pageNumber.PageNumber",b)})(window.a,window.require);(function(e,c){function b(b,c,d,e,f){this.H=b;this.Nd=d;this.Va=f;this.rh=!0;this.context=e;this.Ia=_.extend(this.Ia,{openPod:c.Is,openMenu:c.Hs,openRecomposer:c.Js,resetSections:c.bt,showNoPodTooltip:this.Nt.bind(this)});this.Ua(document.body,"beevirtua/ui/header/Header.html")}c("beevirtua.ui.tooltip.Tooltip");var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);var f=c("beevirtua.ui.fingerTooltip.FingerTooltip");b.prototype.destroy=function(){d.prototype.destroy.apply(this)};
b.prototype.update=function(b){this.yd.then(function(){this.H=b;this.Ea()}.bind(this))};b.prototype.Ea=function(){var b=this.H,c=this.I,d=this.context,e=this.Va;this.Nd.set("headerElementHeight",document.querySelector("#header").clientHeight);c.podIsActive=b.lang.rf.active;c.recomposerIsActive=_.find(b.Ak(),function(b){return!b.required&&!b.Xk})?!0:!1;c.themePath=e?e.Vq():!1;c.strings=d.hb;c.hasSections=b.vr()};b.prototype.fu=function(){var b=document.querySelector("#header");b.style.top=this.rh?
"-"+b.clientHeight+"px":"0px";this.rh=this.rh?!1:!0};b.prototype.Nt=function(){var b=this.context.hb;new f(b.T("podIsAnactive"),b.T("ok"))};b.prototype.Ia={};e("beevirtua.ui.header.Header",b)})(window.a,window.require);(function(e,c){function b(b,c){this.H=b;this.context=c;this.nh={};this.dl=!1;this.Dl={"":""};this.Er=!1;this.Ua(document.body,"beevirtua/ui/pod/Pod.html")}var d=c("beevirtua.ui.alert.Alert"),f=c("beevirtua.ui.loader.Loader"),g=c("beevirtua.data.utility.SOAPPromise"),h=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,h.prototype);h=c("beevirtua.data.utility.Http");_.assign(b.prototype,h.prototype);c("beevirtua.ui.pod.XmlCommandBuilder");b.prototype.Ea=function(){var b=this.I,
c=this.context,d=this;b.options=this.H.lang.rf;b.strings=c.hb;b.isOpen=!0;b.submitted=!1;b.delivery={Mv:""};b.infosChecked=this.Er;b.$watch("infosChecked",function(c){c||(c=b.delivery,c.userTitle=c.title,c.userLastName=c.lastName,c.userFirstName=c.firstName,c.userMail=c.mail)});this.get(window.engineUrl+"beevirtua/ui/pod/countries.json").then(function(b){d.Cj(b)}).catch(console.log.bind(console));c=c.Kl("deliveryForm");null!==c&&(b.delivery=c)};b.prototype.Cj=function(b){var c=this.I,d=this.Dl;c.countries=
b;c.countries.forEach(function(b){d[b.name]=b.dialCode});c.delivery.country="France";c.delivery.phoneCode="+33"};b.prototype.close=function(){this.context.zm("deliveryForm",this.I.delivery);this.destroy()};b.prototype.Zb=function(b,c){var d=this.I;this.nh[c]||(d.delivery[c]=d.delivery[b])};b.prototype.kb=function(b,c){var d=this.I,e=this.nh;d.delivery[b]="";e[b]=!0;c&&!e[c]&&(d.delivery[c]=d.delivery[b])};b.prototype.Wk=function(b){this.nh[b]=!!this.I.delivery[b]};b.prototype.D=function(){this.dl=
!!this.I.delivery.phoneCode};b.prototype.gs=function(){var b=this.I,c=this.Dl;this.dl||(b.delivery.phoneCode=c[b.delivery.country])};b.prototype.Sr=function(){function b(c){var d=document.createElementNS("","mail");d.innerText=c;return d}function c(b){var d=document.createElementNS("","XItemsStr"),e=document.createElementNS("","Items");d.appendChild(e);b.map(function(b){var c=document.createElementNS("","Item");c.setAttribute("documentId",b.Rp);c.setAttribute("lang",b.lang);c.setAttribute("quantity",
b.Vs);var d=document.createElementNS("","ItemInfos");c.appendChild(d);var e=document.createElementNS("","ItemInfo");e.setAttribute("id","Title");e.setAttribute("value",b.title);d.appendChild(e);return c}).reduce(function(b,c){b.appendChild(c);return b},e);return d}function e(b){var c=document.createElementNS("","XCommandInfosStr"),d=document.createElementNS("","CommandInfoList");c.appendChild(d);var f,g;for(g in b)f=document.createElementNS("","CommandInfo"),d.appendChild(f),f.setAttribute("value",
"undefined"===typeof b[g]?"":b[g]),f.setAttribute("id",g);return c}function h(d,f,g){var l={},q="+"==f.phoneCode[0]?f.phoneCode.substr(1):f.phoneCode;l.Mail=f.userMail;l.User_Title=f.userTitle;l.User_FirstName=f.userFirstName;l.User_LastName=f.userLastName;l.User_Company="";l.User_PhoneNumber1="";l.User_PhoneNumber2="";l.User_Address1="";l.User_Address2="";l.User_PostalCode="";l.User_City="";l.User_Region="";l.User_Country="";l.Dest_Mail=f.mail;l.Title=f.title;l.FirstName=f.firstName;l.LastName=f.lastName;
l.Company=f.company;l.PhoneNumber1=q;l.PhoneNumber2=f.phoneNumber;l.Address1=f.address1;l.Address2=f.address2;l.PostalCode=f.postalCode;l.City=f.city;l.Region=f.region;l.Country=f.country;l.Langue="";l.Comment="";l.Date="";f=f.Rw;q=document.createElementNS("","params");q.appendChild(b(f));q.appendChild(c(d));q.appendChild(e(l));d=(new XMLSerializer).serializeToString(q);return t.post(p.options.Ru,"Execute",{configurationName:"Pod",workflowFullName:"Pod.BeforeCreate",actionName:"",parameters:d,lang:g})}
var l=this.H,p=this.I,r=l.lang.id,u=l.lang.title,t=new g;p.submitted=!0;if(p.podForm.$invalid)(l=_.find(document.getElementsByTagName("input"),function(b){return-1<(" "+b.className+" ").indexOf(" ng-invalid ")}))&&l.parentNode&&l.parentNode.firstElementChild&&l.parentNode.firstElementChild.scrollIntoView();else var w,x=p.$watch("options",function(){if(p.options){var b=this.context.hb;x();p.processingPod=!0;w=new f;var c=[];c.push({Rp:p.options.au,lang:r,Vs:"1",title:u});return h(c,p.delivery,r).then(function(c){if(c=
c.getElementsByTagName("ExecuteResult")){if(c=c[0].childNodes,"Info"!=(c&&c[0]&&c[0].nodeName))throw Error("ExecuteResult error");}else throw Error("Missing expected ExecuteResult in XML response");w.close();return new d(b.T("podSendSuccess"),b.T("backToBeevirtua"),this.close.bind(this))}.bind(this)).catch(function(c){console.log(c);w.close();return new d(b.T("podSendFail"),b.T("backToBeevirtua"))})}}.bind(this))};b.prototype.Pr=function(){};b.prototype.Pe=function(b){b.target.parentElement.children[0].focus()};
b.prototype.Qe=function(b){b=b.target.parentElement.nextElementSibling.children[1];b.focus();0<b.value.length&&b.select()};b.prototype.Ia={closePod:b.prototype.close,copyValue:b.prototype.Zb,clearValues:b.prototype.kb,markDirty:b.prototype.Wk,phoneCodeChanged:b.prototype.D,countryChanged:b.prototype.gs,processForm:b.prototype.Sr,onTextClick:b.prototype.Pr,labelClicked:b.prototype.Qe,crossFocusText:b.prototype.Pe};b.prototype.ud=[b.prototype.Cj];e("beevirtua.ui.pod.Pod",b)})(window.a,window.require);(function(e,c){function b(b,c,d){this.H=b;this.Qg=c;this.context=d;this.Ua(document.body,"beevirtua/ui/recomposer/Recomposer.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){var b=this.I,c=this.context,d=this.H.Ak(),e=this.Nn();b.strings=c.hb;b.updateNbPages=function(){var c=0,d=0;_.forEach(b.sections,function(b){b.included&&!b.required&&(c+=b.nbPages);b.required&&(d+=b.nbPages)});b.nbPages=c+d};b.openHelp=!0;b.selectionChecked=
!1;b.checkAllClicked=0==_.filter(d,function(b){return!b.Xk}).length;b.checkAll=function(){b.checkAllClicked=!b.checkAllClicked;_.forEach(b.sections,function(c){c.required||(c.included=b.checkAllClicked)});b.updateNbPages()};b.sections=d.map(function(b,c){var d=!1;_.isArray(e)&&0<e.length&&(d=e?0!==e[c]:!1);return{label:b.label,included:b.required||d,thumbUrl:b.Ld,nbPages:b.vs,required:b.required}});b.updateNbPages()};b.prototype.Vh=function(){this.destroy();var b=this.Qg,c=_.map(this.I.sections,function(b){return b.included||
b.required?1:0});b.Vh(c);this.To(c)};b.prototype.Nn=function(){return this.context.Kl("recomposerSelectSections")||[]};b.prototype.To=function(b){this.context.zm("recomposerSelectSections",b)};b.prototype.Ia={selectSections:b.prototype.Vh,destroy:b.prototype.destroy};e("beevirtua.ui.recomposer.Recomposer",b)})(window.a,window.require);(function(e,c){function b(b,c,d){this.H=b;this.Qg=c;this.context=d;this.Ua(document.body,"beevirtua/ui/universe/Universe.html")}var d=c("beevirtua.ui.utility.angular.AngularUiElement");_.assign(b.prototype,d.prototype);b.prototype.Ea=function(){var b=this.H,c=this.I;c.strings=this.context.hb;c.universes=b.gr();c.openHelp=!0;c.saveUniverse=!0;var d=c.universes;_.forEach(c.universes,function(b){1==b.priority?b.selected=!0:b.selected=!1});c.updatenbUnivers=function(){var b=0;_.forEach(d,function(d){d.selected&&
(b+=d.selected);c.nbUnivers=b})};c.updatenbUnivers()};b.prototype.D=function(){var b=this.I,c=this.Qg,d=this.I.universes,e=_.map(d,function(b){return b.selected?1:0});b.saveUniverse?this.context.Am("universes",e.join("")):this.context.at();c.ot(d.map(function(b){return b.selected?"1":"0"}));this.destroy()};b.prototype.Ia={setUniverse:b.prototype.D,destroy:b.prototype.destroy};e("beevirtua.ui.universe.Universe",b)})(window.a,window.require);(function(e,c){function b(b,c,d,e,f){this.H=b;this.K=d;this.Nd=e;this.us=c;this.context=f;this.hash=f.hash;this.ke()}var d=c("beevirtua.ui.book.BookFacade"),f=c("beevirtua.ui.menu.Menu"),g=c("beevirtua.ui.header.Header"),h=c("beevirtua.ui.pageNumber.PageNumber"),k=c("beevirtua.ui.pod.Pod"),m=c("beevirtua.ui.recomposer.Recomposer"),n=c("beevirtua.ui.universe.Universe"),q=c("beevirtua.ui.loader.Loader");b.prototype.ke=function(){var b=this.K;console.log("UiFacade","_initialize");this.dn().then(this.pn()).then(this.hn()).then(this.un());
b.on("bookCreated",function(){c("beevirtua.ui.book.display.ViewportLayout").jl={top:-1,bottom:-1,right:-1,left:-1}});b.on("openPod",this.wn.bind(this));b.on("openRecomposer",this.xn.bind(this));b.on("openUniverse",this.yn.bind(this))};b.prototype.Ag=function(b){b=b?b:this.H;var c=this.wl,d=this.Ok,e=this.Bl;this.Aa.update(b);c.update(b);d.update(b);e.update(b)};b.prototype.dn=function(){return new Promise(function(b){var c=this.H,e=this.Nd,f=this.K,g=this.context;this.Aa||(c=this.Aa=new d(c,{Kh:e.set.bind(e,
"currentPageIndex")},f,g),e.watch("headerElementHeight",c.resize.bind(c),!0),f.on("toggleFullPage",c.mm.bind(c),!0),f.on("lastNavigation",g.Ct.bind(g),!0));b(this.Aa)}.bind(this))};b.prototype.pn=function(){return new Promise(function(b){var c=this.K,d=this.wl=new f(this.H,this.context);c.on("openMenu",d.open.bind(d),!0);c.on("closeMenu",d.close.bind(d),!0);c.on("toggleFullPage",d.ju.bind(d),!1);b(d)}.bind(this))};b.prototype.hn=function(){return new Promise(function(b){var c=this.K,d=this.Nd,e=this.us,
f=this.context,d=this.Ok=new g(this.H,{Is:c.V.bind(c,"openPod"),Hs:c.V.bind(c,"openMenu"),Js:c.V.bind(c,"openRecomposer"),bt:c.V.bind(c,"selectSections",[])},d,f,e);c.on("toggleFullPage",d.fu.bind(d),!1);b(d)}.bind(this))};b.prototype.un=function(){return new Promise(function(b){var c=this.Nd,d=this.Bl=new h(this.H);c.watch("currentPageIndex",d.Yh.bind(d));b(d)}.bind(this))};b.prototype.wn=function(){this.rf=new k(this.H,this.context)};b.prototype.xn=function(){var b=this.H,c=this.K,d=this.context;
this.Id&&this.Id.destroy();this.Id=new m(b,{Vh:function(b){c.V("selectSections",b)}},d)};b.prototype.yn=function(){var b=this.H,c=this.K,d=this.context;this.Db&&this.Db.destroy();this.Db=new n(b,{ot:function(b){c.V("selectUniverses",b)}},d)};b.prototype.Fu=function(b,c){c=c?c:new q;this.H=b;this.Ag(b);c.close(2500)};b.prototype.Hu=function(b){var c=this.K;this.H.Iu(b);this.Ag();c.on("bookCreated",function(){this.Aa.ob(0);c.kf("bookCreated")}.bind(this))};b.prototype.Ku=function(b){var c=this.K;this.H.Ju(b);
this.Ag();c.on("bookCreated",function(){this.Aa.ob(0);c.kf("bookCreated")}.bind(this))};b.prototype.destroy=function(){var b=this.K;b.kf("openPod");b.kf("openRecomposer");c("beevirtua.event.BookManager").h().reset();return[this.Aa,this.wl,this.Bl,this.Ok,this.rf,this.Id,this.hash].map(function(b){b&&b.destroy()})};e("beevirtua.ui.UiFacade",b)})(window.a,window.require);(function(e){window.Pe=new Promise(function(c){e.module("bee",["beevirtua.ui.menu.MenuLevelDirective","beevirtua.ui.utility.angular.BeeDirectives","ngSanitize","ngMessages"],["$controllerProvider","$compileProvider","$provide",function(b,d,e){window.Zb={$controllerProvider:b,$compileProvider:d,$provide:e};c()}]).config(["$sceDelegateProvider",function(b){b.resourceUrlWhitelist(["self",window.engineUrl+"**"])}]).controller("GlobalController",["$scope",function(b){window.engineUrl=window.engineUrl||
"";b.engineUrl=window.engineUrl;var c=window.require("beevirtua.event.BookManager"),e=window.require("beevirtua.context.BrowserDetector"),g=c.h();b.handleKeydown=function(b){-1==document.body.parentNode.className.indexOf("mejs-fullscreen")&&(39==b.keyCode?g.dispatchEvent(c.f.Sd):37==b.keyCode&&g.dispatchEvent(c.f.Td));window.onKeyDown&&window.onKeyDown()};b.nextPage=function(){g.dispatchEvent(c.f.Sd)};b.previousPage=function(){g.dispatchEvent(c.f.Td)};e.qr("pointer-events")||(document.body.className+=
" pointer-events-patch");e=e.Cr();b.ieVersion=e?"ie"+e:""}]);document.addEventListener("touchmove",function(b){for(var c=b.target;c!==document.body;){if(-1<c.className.indexOf("avoid-bouncing-default"))return;c=c.parentElement}b.preventDefault()});e.element(document).ready(function(){e.resumeBootstrap()})})})(window.angular);(function(e){var c=new (e("beevirtua.ui.loader.Loader")),b=new (e("beevirtua.context.ContextFacade")),d=new (e("beevirtua.data.raw.DataFetcher")),f=new (e("beevirtua.event.EventHub")),g=new (e("beevirtua.event.ValueWatcher")),h=e("beevirtua.data.cooked.Motor"),k=e("beevirtua.ui.utility.ThemeLoader"),m=new (e("beevirtua.ui.utility.CssLoader")),n;return d.pq().then(function(q){function l(){var c=p(),g=c.version,c=c.lang,h=b.Ck();return Promise.all([d.Eq(g,c),b.ds(c)]).then(function(b){b=b[0];document.title=
b.title;return new (e("beevirtua.data.cooked.Lang"))(b,q,f,h,w)})}function p(){var c=b.Ik();_.isNull(c)&&(c=b.Zh(q.version[0].id,q.version[0].lang[0].id));return c}function r(c){return new Promise(function(d){var h=e("beevirtua.ui.UiFacade");n?n.H=c:n=new h(c,t,f,g,b);d(n)})}var u=q.Va[0],t=new h(u),w=b.Sq();w&&b.Yl(w);b.Fs(function(){l().then(r).then(function(b){b.Fu(b.H,c)})});b.Ds(function(b){n.Hu(b)});b.Es(function(b){n.Ku(b)});f.on("selectLang",function(c,d){b.Zh(c,d)});f.on("selectSections",
function(c){b.Ft(c)});f.on("selectUniverses",function(c){b.Yl(c)});return function(){var b=new k;if(!u.mc)throw"No selected theme";return b.load(t,m)}().then(l).then(r).then(function(){c.close(2500)})}).catch(function(b){console.log("SOWWY, the beevirtua could not be loawded..",b)})})(window.require);
//# sourceMappingURL=beevirtua.js.map
